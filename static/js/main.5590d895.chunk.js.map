{"version":3,"sources":["util/interleave.ts","WithToggle/WithToggle.tsx","routes/util/AbstractRouteConfig.ts","FullPage/FullPage.tsx","Time/Time.tsx","api/index.ts","WithUpdates/WithUpdates.tsx","api/firebase.ts","ContentHtml/ContentHtml.tsx","util/arrayEquals.ts","util/clamp.ts","util/noop.ts","util/StatefulPromise.ts","util/index.ts","Headline/Headline.tsx","i18n/locales lazy /^/.//.*/.json$/ groupOptions: {} namespace object","../node_modules/date-fns/locale lazy /^/.//.*$/ include: /(en-GB|en-US)//index.js$/ groupOptions: {} namespace object","Root/StorageProvider/interfaces/index.ts","Breakpoint/Breakpoint.tsx","Async/Pending.tsx","Async/Rejected.tsx","Async/Resolved.tsx","Async/Async.tsx","ErrorPage/ErrorPage.tsx","LoadingPage/LoadingPage.tsx","Root/LanguageProvider/LanguageProvider.tsx","i18n/index.ts","Root/ThemeProvider/ThemeProvider.tsx","Header/Settings/OptionList/OptionList.tsx","Header/Settings/Settings.tsx","Header/Header.tsx","Root/Root.tsx","routes/NotFoundRoute/NotFoundRoute.tsx","routes/RootRoute/RootRoute.tsx","App/App.tsx","index.tsx","routes/FeedRoute/FeedRoute.tsx","routes/ItemRoute/ItemRoute.tsx","routes/util/withSuspense.tsx","Link/Link.tsx","routes/util/SimpleRouteConfig.tsx","Root/StorageProvider/NamespacedAbstractStorage/NamespacedAbstractStorage.ts","Root/StorageProvider/LocalStorage/LocalStorage.ts","Root/StorageProvider/SessionStorage/SessionStorage.ts","Root/StorageProvider/StorageProvider.tsx","routes/UserRoute/UserRoute.tsx"],"names":["interleave","array","insert","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","push","err","return","pop","__webpack_require__","d","__webpack_exports__","Toggle","Bind","props","_this","Object","_Users_barnabasforgo_repos_hacker_news_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_barnabasforgo_repos_hacker_news_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_barnabasforgo_repos_hacker_news_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","initial","children","_toggle","_this2","setState","_ref","onChange","Component","AbstractRouteConfig","Memoize","params","_compileURL","URL","fn","compile","FullPage","classes","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_material_ui_core__WEBPACK_IMPORTED_MODULE_5__","container","alignItems","justify","className","withStyles","height","Time","_this$props","distance","t","react__WEBPACK_IMPORTED_MODULE_5___default","dateTime","Date","toISOString","time","withNamespaces","_firebase__WEBPACK_IMPORTED_MODULE_0__","WithUpdates","_subscribe","prevProps","from","_unsubscribe","data","_unsubscriber","snap","val","withUnsubscriber","getItem","getUser","getTopStories","getNewStories","getBestStories","getAskStories","getShowStories","getJobStories","_firebase_app__WEBPACK_IMPORTED_MODULE_0__","_firebase_app__WEBPACK_IMPORTED_MODULE_0___default","n","mem__WEBPACK_IMPORTED_MODULE_2__","mem__WEBPACK_IMPORTED_MODULE_2___default","authDomain","concat","databaseURL","api","app","initializeApp","projectId","database","ref","path","cb","child","off","on","whenExists","id","getFeed","mem","ContentHtml","react__WEBPACK_IMPORTED_MODULE_8___default","classnames","content","dangerouslySetInnerHTML","__html","theme","_Users_barnabasforgo_repos_hacker_news_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_5__","typography","body2","margin","width","overflow","wordBreak","& *","& p","marginTop","spacing","unit","maxWidth","& pre, & code","fontFamily","& a","color","palette","link","default","display","whiteSpace","textOverflow","verticalAlign","textDecoration","&:hover, &:focus","&:focus, &:active, &:visited","active","outline","arrayEquals","left","right","length","every","v","i","clamp","low","arguments","high","Infinity","noop","StatefulPromiseState","PENDING","REJECTED","RESOLVED","StatefulPromise","classCallCheck","then","catch","StatefulPromise_StatefulPromise","Headline","react__WEBPACK_IMPORTED_MODULE_10___default","_WithUpdates_WithUpdates__WEBPACK_IMPORTED_MODULE_19__","_renderItem","Error","subscriber","_item","_empty","Fragment","_material_ui_core__WEBPACK_IMPORTED_MODULE_7__","variant","_caption","type","_core","_pollOption","_comment","_headerToUrlOrComments","_deriveCaption","_maybeText","_maybePollOptions","text","score","poll","count","_captionLink","ItemRoute","makeURL","comment","by","parent","dead","deleted","UserRoute","_Time_Time__WEBPACK_IMPORTED_MODULE_17__","key","external","href","_Link_Link__WEBPACK_IMPORTED_MODULE_14__","assign","title","url","_header","inline","component","_Users_barnabasforgo_repos_hacker_news_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","descendants","spaced","_this$props2","expanded","_ContentHtml_ContentHtml__WEBPACK_IMPORTED_MODULE_13__","expandedText","_this$props3","pollOptions","parts","map","part","Self","paddingLeft","./en/Comment.json","./en/Header.json","./en/Headline.json","./en/HeadlineList.json","./en/Settings.json","./en/Submissions.json","./en/User.json","./en/shared.json","webpackAsyncContext","req","ids","e","Promise","resolve","code","keys","module","exports","./en-GB","./en-GB/","./en-GB/index","./en-GB/index.js","./en-US","./en-US/","./en-US/index","./en-US/index.js","Up","react_default","Down","_ref2","Breakpoint","up","isWidthUp","at","render","Children","forEach","_dieInvalidChild","withWidth","Pending","Rejected","error","Resolved","Async","possibleConstructorReturn","getPrototypeOf","promise","result","stateToChild","_getStateToChild","element","cloneElement","_this3","objectSpread","_emptyStateToChild","ErrorPage","mdi_material_ui_index_es","icon","fontSize","h1","LoadingPage","index_es","size","DEFAULT_LANGUAGE","LanguageContext","React","createContext","selectedLanguage","setLanguage","LanguageProvider","Once","language","storage","get","src_Async_Async","_i18n","src_LoadingPage_LoadingPage","i18next","es","i18n","Provider","_getLanguageContext","src_ErrorPage_ErrorPage","changeLanguage","set","initLanguage","currentLocale","reject","use","read","namespace","callback","init","debug","lng","fallbackLng","defaultNS","ns","interpolation","escapeValue","formatSeparator","format","formatDistance","addSuffix","locale","formatDate","react","wait","setup","withStorage","DEFAULT_THEME","ThemeContext","selectedTheme","setTheme","ThemeProvider","core_styles","_createMuiTheme","_setTheme","createMuiTheme","mixins","appMaxWidth","toolbarMaxWidth","indigo","A700","A100","useNextVariants","OptionList","optionTranslations","onSelected","isSelected","options","subheader","option","button","onClick","checked","tabIndex","disableRipple","withSettingsNamespace","LanguageSettings","languages","returnObjects","Consumer","context","ThemeSettings","themes","ResponsiveDialog","withMobileDialog","Dialog","Settings","WithToggle","toggle","aria-label","aria-haspopup","open","onClose","dialogContent","padding","Header","toolbar","src_Breakpoint_Breakpoint","Link","FeedRoute","feed","home","feedList","feeds","feedLink","feedLinkText","homeButton","anchor","drawer","spacer","Header_Settings_Settings","contentShift","alignSelf","marginRight","fontWeight","fontWeightLight","flexGrow","&.isActive::before","textTransform","minWidth","Root","StorageProvider","HashRouter","Root_ThemeProvider_ThemeProvider","Root_LanguageProvider_LanguageProvider","lazy","bind","routes_NotFoundRoute_NotFoundRoute","withSuspense","Route","NotFoundRoute_FullPage","routes_RootRoute_RootRoute","Redirect","to","exact","App","src_Root_Root","src_Header_Header","Switch","RootRoute","NotFoundRoute","reactDom","src_App_App","document","getElementById","HeadlineList","join","page","Number","SimpleRouteConfig","Thread","_material_ui_core__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","fallback","withHref","other","_Users_barnabasforgo_repos_hacker_news_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_5__","react_router_dom__WEBPACK_IMPORTED_MODULE_11__","activeClassName","_withHref","_this$props$external","_this$props$color","_this$props$variant","_material_ui_core__WEBPACK_IMPORTED_MODULE_6__","_theme","&:hover, &:focus, &:active","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","_translateParams","match","translateParams","NamespacedAbstractStorage","_namespace","_cache","_decode","otherwise","_encode","JSON","parse","setItem","stringify","LocalStorage","window","localStorage","create","SessionStorage","sessionStorage","StorageType","LOCAL","SESSION","StorageContext","getStore","Cmp","p","_getStore","User"],"mappings":"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","file":"static/js/main.5590d895.chunk.js","sourcesContent":["export function interleave<T = unknown, U = unknown>(\n  array: T[],\n  insert: U,\n): Array<T | U> {\n  const res: Array<T | U> = []\n  for (const item of array) {\n    res.push(item, insert)\n  }\n  res.pop()\n  return res\n}\n","import { Bind } from 'lodash-decorators'\nimport { Component, ReactNode } from 'react'\n\ninterface ToggleProps {\n  initial: boolean\n  onChange?(state: boolean): void\n  children(state: boolean, toggle: () => void): ReactNode\n}\n\ninterface ToggleState {\n  value: boolean\n}\n\nclass Toggle extends Component<ToggleProps, ToggleState> {\n  constructor(props: ToggleProps) {\n    super(props)\n    this.state = { value: props.initial }\n  }\n\n  public render(): ReactNode {\n    return this.props.children(this.state.value, this._toggle)\n  }\n\n  @Bind()\n  private _toggle(): void {\n    this.setState(\n      ({ value }: ToggleState) => ({ value: !value }),\n      () => {\n        if (this.props.onChange) this.props.onChange(this.state.value)\n      },\n    )\n  }\n}\n\nexport default Toggle\n","import { Memoize } from 'lodash-decorators'\nimport { compile } from 'path-to-regexp'\nimport { ReactNode } from 'react'\nimport { AnyRecord } from '../../types'\nimport RouteConfig from './RouteConfig'\n\nabstract class AbstractRouteConfig<Params extends AnyRecord = {}>\n  implements RouteConfig<Params> {\n  protected abstract URL: string\n\n  public abstract use(): ReactNode\n\n  public makeURL(params: Params): string {\n    const fn: this['makeURL'] = this._compileURL(this.URL)\n    return fn(params)\n  }\n\n  @Memoize()\n  private _compileURL(URL: string): this['makeURL'] {\n    return compile(URL)\n  }\n}\n\nexport default AbstractRouteConfig\n","import { Grid } from '@material-ui/core'\nimport { StyleRules, withStyles, WithStyles } from '@material-ui/core/styles'\nimport React, { Component, ReactNode } from 'react'\n\nconst styles: StyleRules = {\n  container: {\n    height: '100vh',\n  },\n}\n\nclass FullPage extends Component<WithStyles> {\n  public render(): ReactNode {\n    const { classes }: FullPage['props'] = this.props\n\n    return (\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"center\"\n        className={classes.container}\n      >\n        <Grid item>{this.props.children}</Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default withStyles(styles)(FullPage)\n","import React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\n\ninterface TimeProps {\n  distance: number\n}\n\nclass Time extends Component<TimeProps & WithNamespaces> {\n  public render(): ReactNode {\n    const { distance, t }: this['props'] = this.props\n\n    return (\n      <time dateTime={new Date(distance * 1000).toISOString()}>\n        {t('shared:timeDistance', { time: distance })}\n      </time>\n    )\n  }\n}\n\nexport default withNamespaces()(Time)\n","export * from './firebase'\n","import { Component, ReactNode } from 'react'\nimport { Snapshot, Subscriber, Unsubscriber } from '../api/types'\n\nexport type WithUpdatesFrom<T> = (subscriber: Subscriber<T>) => Unsubscriber\n\ninterface WithUpdatesProps<T> {\n  from: WithUpdatesFrom<T>\n  children(data?: T): ReactNode\n}\n\ninterface WithUpdatesState<T> {\n  data?: T\n}\n\nclass WithUpdates<T> extends Component<\n  WithUpdatesProps<T>,\n  WithUpdatesState<T>\n> {\n  public state: WithUpdatesState<T> = {}\n  private _unsubscriber?: () => void\n\n  public componentDidMount(): void {\n    this._subscribe()\n  }\n\n  public componentDidUpdate(prevProps: WithUpdatesProps<T>): void {\n    if (prevProps.from !== this.props.from) {\n      this._unsubscribe()\n      this._subscribe()\n    }\n  }\n\n  public componentWillUnmount(): void {\n    this._unsubscribe()\n  }\n\n  public render(): ReactNode {\n    const { children }: this['props'] = this.props\n    return children(this.state.data)\n  }\n\n  private _subscribe(): void {\n    this._unsubscriber = this.props.from(\n      (snap: Snapshot<T>): void => {\n        this.setState({ data: snap.val() })\n      },\n    )\n  }\n\n  private _unsubscribe(): void {\n    if (this._unsubscriber) this._unsubscriber()\n    delete this._unsubscriber\n  }\n}\n\nexport default WithUpdates\n","import app from '@firebase/app'\nimport { FirebaseApp } from '@firebase/app-types'\nimport '@firebase/database'\nimport { FirebaseDatabase, Reference } from '@firebase/database-types'\nimport mem from 'mem'\nimport {\n  Feed,\n  FeedId,\n  FeedReader,\n  Item,\n  ItemId,\n  Snapshot,\n  Subscriber,\n  Unsubscriber,\n  User,\n  UserId,\n} from './types'\n\nconst projectId: string = 'hacker-news'\nconst authDomain: string = `${projectId}.firebaseio.com`\nconst databaseURL: string = `https://${authDomain}`\n\nconst firebase: Required<FirebaseApp> = app.initializeApp({\n  authDomain,\n  databaseURL,\n  projectId,\n}) as Required<FirebaseApp>\n\nconst database: FirebaseDatabase = firebase.database()\nconst api: Reference = database.ref('v0')\n\nfunction whenExists<T>(cb: Subscriber<T>): (snap: Snapshot<T> | null) => void {\n  return (snap: Snapshot<T> | null): void => {\n    if (snap) cb(snap)\n  }\n}\n\nexport function withUnsubscriber<T>(\n  path: string,\n  cb: Subscriber<T>,\n): Unsubscriber {\n  const ref: Reference = api.child(path)\n  const off: ReturnType<Reference['off']> = ref.on('value', whenExists(cb))\n  return (): void => {\n    ref.off('value', off)\n  }\n}\n\nexport function getItem<T extends Item>(\n  id: ItemId,\n  cb: Subscriber<T>,\n): Unsubscriber {\n  return withUnsubscriber(`item/${id}`, cb)\n}\n\nexport function getUser(id: UserId, cb: Subscriber<User>): Unsubscriber {\n  return withUnsubscriber(`user/${id}`, cb)\n}\n\nconst getFeed: (id: FeedId) => FeedReader = mem(\n  (id: FeedId): FeedReader => (cb: Subscriber<Feed>): Unsubscriber =>\n    withUnsubscriber(id, cb),\n)\n\nexport const getTopStories: FeedReader = getFeed('topstories')\nexport const getNewStories: FeedReader = getFeed('newstories')\nexport const getBestStories: FeedReader = getFeed('beststories')\nexport const getAskStories: FeedReader = getFeed('askstories')\nexport const getShowStories: FeedReader = getFeed('showstories')\nexport const getJobStories: FeedReader = getFeed('jobstories')\n","import {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport classnames from 'classnames'\nimport React, { Component, ReactNode } from 'react'\n\ninterface ContentHtmlProps {\n  className?: string\n  children: string\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  content: {\n    ...theme.typography.body2,\n    margin: 0,\n    width: '100%',\n    overflow: 'auto',\n    wordBreak: 'break-word',\n    '& *': {\n      margin: 0,\n    },\n    '& p': {\n      ...theme.typography.body2,\n      marginTop: theme.spacing.unit / 2,\n      maxWidth: '100%',\n      overflow: 'auto',\n      wordBreak: 'break-word',\n    },\n    '& pre, & code': {\n      ...theme.typography.body2,\n      maxWidth: '100%',\n      overflow: 'auto',\n      fontFamily: 'monospace',\n    },\n    '& a': {\n      ...theme.typography.body2,\n      color: theme.palette.link.default,\n      display: 'inline-block',\n      maxWidth: '100%',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n      verticalAlign: 'top',\n      textDecoration: 'none',\n      '&:hover, &:focus': {\n        textDecoration: 'underline',\n      },\n      '&:focus, &:active, &:visited': {\n        color: theme.palette.link.active,\n        outline: 'none',\n      },\n    },\n  },\n})\n\nclass ContentHtml extends Component<ContentHtmlProps & WithStyles> {\n  public render(): ReactNode {\n    const { classes, className }: this['props'] = this.props\n\n    return (\n      <p\n        className={classnames(classes.content, className)}\n        dangerouslySetInnerHTML={{ __html: this.props.children }}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ContentHtml)\n","export function arrayEquals<T>(left: T[], right: T[]): boolean {\n  return (\n    left.length === right.length &&\n    left.every((v: T, i: number): boolean => v === right[i])\n  )\n}\n","export function clamp(\n  n: number,\n  low: number = 0,\n  high: number = Infinity,\n): number {\n  if (n < low) {\n    return low\n  }\n\n  if (n > high) {\n    return high\n  }\n\n  return n\n}\n","// tslint:disable-next-line no-any\nexport function noop(...args: any[]): void {\n  // noop\n}\n","export enum StatefulPromiseState {\n  PENDING,\n  RESOLVED,\n  REJECTED,\n}\n\nexport const {\n  PENDING,\n  REJECTED,\n  RESOLVED,\n}: typeof StatefulPromiseState = StatefulPromiseState\n\nexport class StatefulPromise<T> {\n  public state: StatefulPromiseState = StatefulPromiseState.PENDING\n  constructor(public value: Promise<T>) {\n    value\n      .then(() => {\n        this.state = StatefulPromiseState.RESOLVED\n      })\n      .catch(() => {\n        this.state = StatefulPromiseState.REJECTED\n      })\n  }\n}\n","export * from './arrayEquals'\nexport * from './clamp'\nexport * from './interleave'\nexport * from './noop'\nexport * from './StatefulPromise'\n","import { Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { getItem } from '../api'\nimport {\n  Comment,\n  Item,\n  ItemId,\n  Job,\n  Poll,\n  PollOption,\n  Story,\n  Subscriber,\n  Unsubscriber,\n} from '../api/types'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\nimport Time from '../Time/Time'\nimport { interleave } from '../util/interleave'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface HeadlineProps {\n  id?: ItemId\n  item?: Item\n  expanded?: true\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  link: {\n    color: theme.palette.link.default,\n    '&:focus, &:active, &:visited': {\n      color: theme.palette.link.active,\n      outline: 'none',\n    },\n  },\n  inline: {\n    display: 'inline-block',\n  },\n  expandedText: {\n    marginTop: theme.spacing.unit,\n  },\n  pollOptions: {\n    paddingLeft: theme.spacing.unit * 4,\n  },\n})\n\ntype Core = Story | Job | Poll\nclass Headline extends Component<HeadlineProps & WithStyles & WithNamespaces> {\n  public render(): ReactNode {\n    const { item, id }: this['props'] = this.props\n\n    if (id) {\n      return (\n        <WithUpdates from={this._subscribe(id)}>{this._renderItem}</WithUpdates>\n      )\n    }\n\n    if (item) {\n      return this._renderItem(item)\n    }\n\n    throw new Error('either id or item should be provided')\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<Item> {\n    return (subscriber: Subscriber<Item>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n\n  @Bind()\n  private _renderItem(item?: Item): ReactNode {\n    return <section>{item ? this._item(item) : this._empty()}</section>\n  }\n\n  private _empty(): ReactNode {\n    return (\n      <>\n        <Typography variant=\"body1\">???</Typography>\n        {this._caption(['???'])}\n      </>\n    )\n  }\n\n  private _item(item: Item): ReactNode {\n    switch (item.type) {\n      case 'story':\n        return this._core(item)\n      case 'job':\n        return this._core(item)\n      case 'poll':\n        return this._core(item)\n      case 'pollopt':\n        return this._pollOption(item)\n      case 'comment':\n        return this._comment(item)\n      default:\n        throw new Error(`unknown item type ${(item as Item).type}`)\n    }\n  }\n\n  private _core(item: Core): ReactNode {\n    return (\n      <>\n        {this._headerToUrlOrComments(item)}\n        {this._deriveCaption(item)}\n        {this._maybeText(item, true)}\n        {this._maybePollOptions(item)}\n      </>\n    )\n  }\n\n  private _pollOption({ text, score, poll }: PollOption): ReactNode {\n    const { t }: this['props'] = this.props\n\n    return (\n      <>\n        <Typography variant=\"body1\">{text}</Typography>\n        {this._caption([\n          t('points', { count: score }),\n          '|',\n          this._captionLink(\n            'parentPoll',\n            ItemRoute.makeURL({ id: poll }),\n            t('poll'),\n          ),\n        ])}\n      </>\n    )\n  }\n\n  private _comment(comment: Comment): ReactNode {\n    const { by, id, time, parent, dead, deleted }: Comment = comment\n    if (dead || deleted) return null\n    const { t }: this['props'] = this.props\n\n    return (\n      <>\n        {this._caption([\n          this._captionLink('by', UserRoute.makeURL({ id: by }), by),\n          this._captionLink(\n            'time',\n            ItemRoute.makeURL({ id }),\n            <Time distance={time} key=\"time\" />,\n          ),\n          '|',\n          this._captionLink(\n            'parent',\n            ItemRoute.makeURL({ id: parent }),\n            t('parent'),\n          ),\n        ])}\n        {this._maybeText(comment, false)}\n      </>\n    )\n  }\n\n  private _header(\n    external: boolean,\n    href: string,\n    children: ReactNode,\n  ): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return (\n      <Link\n        variant=\"body1\"\n        className={classes.link}\n        {...{ external, href, children }}\n      />\n    )\n  }\n\n  private _headerToUrlOrComments(item: Core): ReactNode {\n    const { id, title }: typeof item = item\n    return 'url' in item && item.url\n      ? this._header(true, item.url, title)\n      : this._header(false, ItemRoute.makeURL({ id }), title)\n  }\n\n  private _caption(content: ReactNode[]): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return (\n      <Typography\n        variant=\"caption\"\n        color=\"textSecondary\"\n        className={classes.inline}\n        component=\"aside\"\n      >\n        {interleave(content, ' ')}\n      </Typography>\n    )\n  }\n\n  private _captionLink(\n    key: string,\n    href: string,\n    children: ReactNode,\n  ): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return <Link className={classes.inline} {...{ key, href, children }} />\n  }\n\n  private _deriveCaption(item: Core): ReactNode {\n    const { t }: this['props'] = this.props\n    const { score, by, time, id }: typeof item = item\n\n    return this._caption([\n      t('points', { count: score }),\n      t('by'),\n      this._captionLink('by', UserRoute.makeURL({ id: by }), by),\n      this._captionLink(\n        'time',\n        ItemRoute.makeURL({ id }),\n        <Time distance={time} key=\"time\" />,\n      ),\n      ...('descendants' in item\n        ? [\n            '|',\n            this._captionLink(\n              'comments',\n              ItemRoute.makeURL({ id }),\n              t('comments', { count: item.descendants }),\n            ),\n          ]\n        : []),\n    ])\n  }\n\n  private _maybeText(item: Item, spaced: boolean): ReactNode {\n    const { expanded, classes }: this['props'] = this.props\n\n    return expanded && 'text' in item ? (\n      <ContentHtml className={spaced ? classes.expandedText : ''}>\n        {item.text}\n      </ContentHtml>\n    ) : null\n  }\n\n  private _maybePollOptions(item: Core): ReactNode {\n    const { expanded, classes }: this['props'] = this.props\n\n    return expanded && 'parts' in item ? (\n      <section className={classes.pollOptions}>\n        {item.parts.map(\n          (part: ItemId): ReactNode => (\n            <Self id={part} key={part} />\n          ),\n        )}\n      </section>\n    ) : null\n  }\n}\n\nconst Self: ComponentType<HeadlineProps> = withNamespaces('Headline')(\n  withStyles(styles)(Headline),\n)\nexport default Self\n","var map = {\n\t\"./en/Comment.json\": [\n\t\t3759,\n\t\t4\n\t],\n\t\"./en/Header.json\": [\n\t\t3760,\n\t\t5\n\t],\n\t\"./en/Headline.json\": [\n\t\t3761,\n\t\t6\n\t],\n\t\"./en/HeadlineList.json\": [\n\t\t3762,\n\t\t7\n\t],\n\t\"./en/Settings.json\": [\n\t\t3763,\n\t\t8\n\t],\n\t\"./en/Submissions.json\": [\n\t\t3764,\n\t\t9\n\t],\n\t\"./en/User.json\": [\n\t\t3765,\n\t\t10\n\t],\n\t\"./en/shared.json\": [\n\t\t3766,\n\t\t11\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3735;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./en-GB\": [\n\t\t120,\n\t\t0\n\t],\n\t\"./en-GB/\": [\n\t\t120,\n\t\t0\n\t],\n\t\"./en-GB/index\": [\n\t\t120,\n\t\t0\n\t],\n\t\"./en-GB/index.js\": [\n\t\t120,\n\t\t0\n\t],\n\t\"./en-US\": [\n\t\t121,\n\t\t1\n\t],\n\t\"./en-US/\": [\n\t\t121,\n\t\t1\n\t],\n\t\"./en-US/index\": [\n\t\t121,\n\t\t1\n\t],\n\t\"./en-US/index.js\": [\n\t\t121,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3736;\nmodule.exports = webpackAsyncContext;","export * from './Storage'\n","import { Breakpoint as BreakpointId } from '@material-ui/core/styles/createBreakpoints'\nimport withWidth, { isWidthUp, WithWidth } from '@material-ui/core/withWidth'\nimport React, {\n  Children,\n  Component,\n  ComponentClass,\n  ComponentType,\n  Fragment,\n  ReactChild,\n  ReactElement,\n  ReactNode,\n} from 'react'\n\ninterface BreakpointProps {\n  at: BreakpointId\n}\n\ninterface JustChildren {\n  children: ReactNode\n}\nconst Up: ComponentType<JustChildren> = ({\n  children,\n}: JustChildren): ReactElement<{}> => <>{children}</>\nconst Down: ComponentType<JustChildren> = ({\n  children,\n}: JustChildren): ReactElement<{}> => <>{children}</>\n\nclass Breakpoint extends Component<BreakpointProps & WithWidth> {\n  public render(): ReactNode {\n    const up: boolean = isWidthUp(this.props.at, this.props.width)\n    let render: ReactNode = null\n    Children.forEach(\n      this.props.children,\n      (child: ReactChild): void => {\n        if (typeof child !== 'object') return this._dieInvalidChild()\n\n        switch (child.type) {\n          case Up:\n            if (up) {\n              render = render || child\n            }\n            break\n          case Down:\n            if (!up) {\n              render = render || child\n            }\n            break\n          default:\n            this._dieInvalidChild()\n        }\n      },\n    )\n\n    return render\n  }\n  private _dieInvalidChild(): void {\n    throw new Error('use only Breakpoint.* components as a child to Breakpoint')\n  }\n}\n\nexport default Object.assign(withWidth()(Breakpoint), { Up, Down })\n","import { Component, ReactNode } from 'react'\n\nclass Pending extends Component {\n  public render(): ReactNode {\n    return this.props.children\n  }\n}\n\nexport default Pending\n","import { Component, ReactNode } from 'react'\n\nexport interface RejectedProps {\n  error?: Error\n  children(error: Error): ReactNode\n}\n\nclass Rejected extends Component<RejectedProps> {\n  public render(): ReactNode {\n    return this.props.children(this.props.error as Error)\n  }\n}\n\nexport default Rejected\n","import { Component, ReactNode } from 'react'\n\nexport interface ResolvedProps<T> {\n  data?: T\n  children(data: T): ReactNode\n}\n\nclass Resolved<T> extends Component<ResolvedProps<T>> {\n  public render(): ReactNode {\n    return this.props.children(this.props.data as T)\n  }\n}\n\nexport default Resolved\n","import {\n  Children,\n  cloneElement,\n  Component,\n  ReactChild,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { PENDING, REJECTED, RESOLVED, StatefulPromise } from '../util'\nimport Pending from './Pending'\nimport Rejected, { RejectedProps } from './Rejected'\nimport Resolved, { ResolvedProps } from './Resolved'\n\nexport interface AsyncProps<T> {\n  promise(): Promise<T>\n}\n\ninterface StateToChild<T = unknown> {\n  [PENDING]: null | ReactElement<{}>\n  [RESOLVED]: null | ReactElement<ResolvedProps<T>>\n  [REJECTED]: null | ReactElement<RejectedProps>\n}\n\ninterface AsyncState<T> {\n  promise: StatefulPromise<T>\n  data?: T\n  error?: Error\n}\n\nclass Async<T> extends Component<AsyncProps<T>, AsyncState<T>> {\n  public static Pending: typeof Pending = Pending\n  public static Rejected: typeof Rejected = Rejected\n  public static Resolved: typeof Resolved = Resolved\n  private static _emptyStateToChild: StateToChild = {\n    [PENDING]: null,\n    [RESOLVED]: null,\n    [REJECTED]: null,\n  }\n\n  public constructor(props: Async<T>['props']) {\n    super(props)\n    const promise: StatefulPromise<T> = new StatefulPromise(props.promise())\n    this.state = { promise }\n  }\n\n  public componentDidMount(): void {\n    this.state.promise.value\n      .then((result: T) =>\n        this.setState({\n          data: result,\n        }),\n      )\n      .catch((error: unknown) =>\n        this.setState({\n          error: error instanceof Error ? error : new Error(`${error}`),\n        }),\n      )\n  }\n\n  public render(): ReactNode {\n    const stateToChild: StateToChild<T> = this._getStateToChild()\n    let element:\n      | null\n      | ReactElement<ResolvedProps<T>>\n      | ReactElement<RejectedProps> = null\n\n    switch (this.state.promise.state) {\n      case PENDING:\n        return stateToChild[PENDING]\n      case RESOLVED:\n        element = stateToChild[RESOLVED]\n        if (!element) return null\n        return cloneElement(element, { data: this.state.data })\n      case REJECTED:\n        element = stateToChild[REJECTED]\n        if (!element) return null\n        return cloneElement(element, { error: this.state.error })\n    }\n  }\n\n  private _getStateToChild(): StateToChild<T> {\n    const result: StateToChild = { ...Async._emptyStateToChild }\n    Children.forEach(this.props.children, (child: ReactChild) => {\n      if (typeof child !== 'object') return this._dieInvalidChild()\n\n      switch (child.type) {\n        case Pending:\n          result[PENDING] = result[PENDING] || child\n          break\n        case Resolved:\n          result[RESOLVED] = result[RESOLVED] || child\n          break\n        case Rejected:\n          result[REJECTED] = result[REJECTED] || child\n          break\n        default:\n          this._dieInvalidChild()\n      }\n    })\n\n    return result as StateToChild<T>\n  }\n\n  private _dieInvalidChild(): never {\n    throw new Error('use only Async.* components as a child to Async')\n  }\n}\n\nexport default Async\n","import {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { AlertCircle } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport FullPage from '../FullPage/FullPage'\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  icon: {\n    fontSize: theme.typography.h1.fontSize,\n  },\n})\n\nclass ErrorPage extends Component<WithStyles> {\n  public render(): ReactNode {\n    const { classes }: ErrorPage['props'] = this.props\n\n    return (\n      <FullPage>\n        <AlertCircle className={classes.icon} color=\"error\" />\n      </FullPage>\n    )\n  }\n}\n\nexport default withStyles(styles)(ErrorPage)\n","import { CircularProgress } from '@material-ui/core'\nimport React, { Component, ReactNode } from 'react'\nimport FullPage from '../FullPage/FullPage'\n\nclass LoadingPage extends Component {\n  public render(): ReactNode {\n    return (\n      <FullPage>\n        <CircularProgress size={80} />\n      </FullPage>\n    )\n  }\n}\n\nexport default LoadingPage\n","import { i18n } from 'i18next'\nimport { Bind, Once } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { I18nextProvider } from 'react-i18next'\nimport Async from '../../Async/Async'\nimport ErrorPage from '../../ErrorPage/ErrorPage'\nimport { setup } from '../../i18n'\nimport LoadingPage from '../../LoadingPage/LoadingPage'\nimport { noop } from '../../util'\nimport { withStorage, WithStorage } from '../StorageProvider/StorageProvider'\n\ninterface LanguageProviderProps extends WithStorage<LanguageProviderState> {}\ninterface LanguageProviderState {\n  language: string\n}\n\nexport interface LanguageContextType {\n  selectedLanguage: string\n  setLanguage(language: string): void\n}\n\nconst DEFAULT_LANGUAGE: string = 'en-GB'\nexport const LanguageContext: React.Context<\n  LanguageContextType\n> = React.createContext({\n  selectedLanguage: DEFAULT_LANGUAGE,\n  setLanguage: noop,\n})\n\nclass LanguageProvider extends React.Component<\n  LanguageProviderProps,\n  LanguageProviderState\n> {\n  public state: LanguageProviderState = { language: DEFAULT_LANGUAGE }\n  constructor(props: LanguageProviderProps) {\n    super(props)\n    this.state = {\n      language: props.storage.get('language', DEFAULT_LANGUAGE),\n    }\n  }\n\n  public render(): ReactNode {\n    return (\n      <Async promise={this._i18n}>\n        <Async.Pending>\n          <LoadingPage />\n        </Async.Pending>\n        <Async.Resolved>\n          {(i18next: i18n): ReactNode => {\n            return (\n              <I18nextProvider i18n={i18next}>\n                <LanguageContext.Provider\n                  value={this._getLanguageContext(i18next)}\n                >\n                  {this.props.children}\n                </LanguageContext.Provider>\n              </I18nextProvider>\n            )\n          }}\n        </Async.Resolved>\n        <Async.Rejected>{(): ReactNode => <ErrorPage />}</Async.Rejected>\n      </Async>\n    )\n  }\n\n  private _getLanguageContext(i18next: i18n): LanguageContextType {\n    return {\n      selectedLanguage: this.state.language,\n      setLanguage: (language: string): void => {\n        if (this.state.language !== language) {\n          i18next.changeLanguage(language)\n          this.props.storage.set('language', language)\n          this.setState({ language })\n        }\n      },\n    }\n  }\n\n  @Bind()\n  @Once()\n  private _i18n(): Promise<i18n> {\n    return setup(this.state.language)\n  }\n}\n\nexport default withStorage('language')(LanguageProvider)\n","import { format as formatDate, formatDistance, Locale } from 'date-fns'\nimport i18next, { i18n } from 'i18next'\n\nexport function setup(initLanguage: string): Promise<i18n> {\n  let currentLocale: Locale | undefined\n\n  return new Promise(\n    (resolve: (i: i18n) => void, reject: (e: Error) => void): void => {\n      i18next\n        .use({\n          type: 'backend',\n          read(\n            language: string,\n            namespace: string,\n            callback: (err: Error | null, result?: object) => void,\n          ): void {\n            import(`./locales/${language}/${namespace}.json`)\n              .then((result: object) => callback(null, result))\n              .catch(() => {\n                callback(null, {})\n              })\n          },\n        })\n        .init(\n          {\n            debug: false,\n            lng: initLanguage,\n            fallbackLng: false,\n            defaultNS: 'shared',\n            ns: 'shared',\n            interpolation: {\n              escapeValue: false,\n              formatSeparator: '|',\n              format(value: unknown, format?: string): string {\n                switch (format) {\n                  case 'distance': {\n                    if (typeof value !== 'number') {\n                      throw new Error('invalid distance value')\n                    }\n                    return formatDistance(new Date(1000 * value), new Date(), {\n                      addSuffix: true,\n                      locale: currentLocale,\n                    })\n                  }\n                  case 'date': {\n                    if (typeof value !== 'number') {\n                      throw new Error('invalid distance value')\n                    }\n                    return formatDate(new Date(1000 * value), 'PP', {\n                      locale: currentLocale,\n                    })\n                  }\n                  default:\n                    throw new Error('formatter not implemented')\n                }\n              },\n            },\n            react: {\n              wait: true,\n            },\n          },\n          (error: unknown) => {\n            if (error) {\n              reject(new Error(`${error}`))\n            } else {\n              resolve(i18next)\n            }\n          },\n        )\n        .on('languageChanged', (language: string) => {\n          import(/* webpackInclude: /(en-GB|en-US)\\/index.js$/ */ `date-fns/locale/${language}`)\n            .then(\n              (locale: Locale): void => {\n                currentLocale = locale\n              },\n            )\n            .catch((error: Error) => {\n              if (process.env.NODE_ENV === 'development') {\n                // tslint:disable-next-line no-console\n                console.warn('locale not found', language, error)\n              }\n            })\n        })\n    },\n  )\n}\n","import {\n  createMuiTheme,\n  CssBaseline,\n  MuiThemeProvider,\n  PaletteType,\n  Theme,\n} from '@material-ui/core'\nimport { indigo } from '@material-ui/core/colors'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { noop } from '../../util'\nimport { WithStorage, withStorage } from '../StorageProvider/StorageProvider'\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    appMaxWidth: number\n    toolbarMaxWidth: number\n  }\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface PaletteOptions {\n    link: {\n      default: string\n      active: string\n    }\n  }\n\n  interface Palette {\n    link: {\n      default: string\n      active: string\n    }\n  }\n}\n\ninterface ThemeProviderProps extends WithStorage<ThemeProviderState> {}\n\ninterface ThemeProviderState {\n  theme: PaletteType\n}\n\nexport interface ThemeContextType {\n  selectedTheme: PaletteType\n  setTheme(theme: PaletteType): void\n}\n\nconst DEFAULT_THEME: PaletteType = 'dark'\nexport const ThemeContext: React.Context<\n  ThemeContextType\n> = React.createContext({\n  selectedTheme: DEFAULT_THEME,\n  setTheme: noop,\n} as ThemeContextType)\n\nclass ThemeProvider extends React.Component<\n  ThemeProviderProps,\n  ThemeProviderState\n> {\n  constructor(props: ThemeProviderProps) {\n    super(props)\n    this.state = {\n      theme: props.storage.get('theme', DEFAULT_THEME),\n    }\n  }\n\n  public render(): ReactNode {\n    return (\n      <MuiThemeProvider theme={this._createMuiTheme(this.state.theme)}>\n        <CssBaseline />\n        <ThemeContext.Provider\n          value={{\n            setTheme: this._setTheme,\n            selectedTheme: this.state.theme,\n          }}\n        >\n          {this.props.children}\n        </ThemeContext.Provider>\n      </MuiThemeProvider>\n    )\n  }\n\n  @Bind()\n  private _setTheme(theme: PaletteType): void {\n    if (this.state.theme !== theme) {\n      this.setState({ theme })\n      this.props.storage.set('theme', theme)\n    }\n  }\n\n  @Memoize()\n  private _createMuiTheme(type: PaletteType): Theme {\n    return createMuiTheme({\n      mixins: {\n        appMaxWidth: 8 * 120,\n        toolbarMaxWidth: 8 * 150,\n      },\n      palette: {\n        type,\n        link:\n          type === 'light'\n            ? {\n                default: indigo.A700,\n                active: indigo[700],\n              }\n            : {\n                default: indigo.A100,\n                active: indigo[100],\n              },\n      },\n      typography: {\n        useNextVariants: true,\n      },\n    })\n  }\n}\n\nexport default withStorage('theme')(ThemeProvider)\n","import {\n  List,\n  ListItem,\n  ListItemText,\n  ListSubheader,\n  Radio,\n} from '@material-ui/core'\nimport React, { ReactElement, ReactNode } from 'react'\n\nexport function OptionList<Key extends string | number = string>(\n  title: string,\n  optionTranslations: { [k in Key]: string },\n  onSelected: (option: Key) => () => void,\n  isSelected: (option: Key) => boolean,\n): ReactElement<{}> {\n  const options: Key[] = Object.keys(optionTranslations) as Key[]\n\n  return (\n    <List subheader={<ListSubheader>{title}</ListSubheader>}>\n      {options.map(\n        (option: Key): ReactNode => (\n          <ListItem key={option} button onClick={onSelected(option)}>\n            <Radio checked={isSelected(option)} tabIndex={-1} disableRipple />\n            <ListItemText>{optionTranslations[option]}</ListItemText>\n          </ListItem>\n        ),\n      )}\n    </List>\n  )\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  PaletteType,\n  withMobileDialog,\n} from '@material-ui/core'\nimport { DialogProps } from '@material-ui/core/Dialog'\nimport { StyleRules, WithStyles, withStyles } from '@material-ui/core/styles'\nimport { Settings as SettingsIcon } from 'mdi-material-ui'\nimport React, { Component, ComponentType, ReactElement, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport {\n  LanguageContext,\n  LanguageContextType,\n} from '../../Root/LanguageProvider/LanguageProvider'\nimport {\n  ThemeContext,\n  ThemeContextType,\n} from '../../Root/ThemeProvider/ThemeProvider'\nimport WithToggle from '../../WithToggle/WithToggle'\nimport { OptionList } from './OptionList/OptionList'\n\nconst withSettingsNamespace: ReturnType<typeof withNamespaces> = withNamespaces(\n  'Settings',\n)\n\nconst LanguageSettings: ComponentType = withSettingsNamespace(\n  ({ t }: WithNamespaces): ReactElement<{}> => {\n    const languages: { [language: string]: string } = t('languages', {\n      returnObjects: true,\n    })\n\n    return (\n      <LanguageContext.Consumer>\n        {(context: LanguageContextType): ReactNode =>\n          OptionList(\n            t('language'),\n            languages,\n            (language: string) => (): void => context.setLanguage(language),\n            (language: string) => context.selectedLanguage === language,\n          )\n        }\n      </LanguageContext.Consumer>\n    )\n  },\n)\nconst ThemeSettings: ComponentType = withSettingsNamespace(\n  ({ t }: WithNamespaces): ReactElement<{}> => {\n    const themes: { [language in PaletteType]: string } = t('themes', {\n      returnObjects: true,\n    })\n\n    return (\n      <ThemeContext.Consumer>\n        {(context: ThemeContextType): ReactNode =>\n          OptionList(\n            t('theme'),\n            themes,\n            (theme: PaletteType) => (): void => context.setTheme(theme),\n            (theme: PaletteType) => context.selectedTheme === theme,\n          )\n        }\n      </ThemeContext.Consumer>\n    )\n  },\n)\n\nconst ResponsiveDialog: ComponentType<DialogProps> = withMobileDialog<\n  DialogProps\n>()(Dialog)\n\nconst styles: StyleRules = {\n  dialogContent: { padding: 0 },\n}\n\nclass Settings extends Component<WithNamespaces & WithStyles> {\n  public render(): ReactNode {\n    const { t, classes }: Settings['props'] = this.props\n\n    return (\n      <WithToggle initial={false}>\n        {(state: boolean, toggle: () => void): ReactNode => (\n          <>\n            <IconButton\n              onClick={toggle}\n              color=\"inherit\"\n              aria-label={t('settings')}\n              aria-haspopup\n            >\n              <SettingsIcon />\n            </IconButton>\n            <ResponsiveDialog open={state} onClose={toggle}>\n              <DialogTitle>{t('settings')}</DialogTitle>\n              <DialogContent className={classes.dialogContent}>\n                <LanguageSettings />\n                <ThemeSettings />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={toggle}>{t('shared:close')}</Button>\n              </DialogActions>\n            </ResponsiveDialog>\n          </>\n        )}\n      </WithToggle>\n    )\n  }\n}\n\nexport default withSettingsNamespace(withStyles(styles)(Settings))\n","import {\n  AppBar,\n  Button,\n  Drawer,\n  Grid,\n  List,\n  ListItem,\n  Toolbar,\n  Typography,\n} from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { Hackernews } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport Breakpoint from '../Breakpoint/Breakpoint'\nimport Link from '../Link/Link'\nimport FeedRoute, { feeds, MainFeed } from '../routes/FeedRoute/FeedRoute'\nimport { interleave } from '../util'\nimport WithToggle from '../WithToggle/WithToggle'\nimport Settings from './Settings/Settings'\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  toolbar: {\n    maxWidth: theme.mixins.toolbarMaxWidth,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  home: {\n    display: 'flex',\n    alignItems: 'center',\n    marginRight: theme.spacing.unit,\n  },\n  feedList: {\n    display: 'block',\n    margin: 0,\n    padding: 0,\n  },\n  feedLink: {\n    display: 'inline-block',\n    margin: 0,\n    padding: 0,\n  },\n  feedLinkText: {\n    fontWeight: theme.typography.fontWeightLight,\n    flexGrow: 1,\n    '&.isActive::before': {\n      content: '\"> \"',\n    },\n  },\n  homeButton: {\n    textTransform: 'none',\n  },\n  drawer: {\n    minWidth: '50vw',\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n  contentShift: {\n    ...theme.mixins.toolbar,\n    display: 'block',\n  },\n})\n\nclass Header extends Component<WithNamespaces & WithStyles> {\n  public render(): ReactNode {\n    const { t, classes }: Header['props'] = this.props\n\n    return (\n      <>\n        <AppBar>\n          <Toolbar className={classes.toolbar}>\n            <Breakpoint at=\"sm\">\n              <Breakpoint.Up>\n                <Grid container component=\"nav\">\n                  <Link\n                    href={FeedRoute.makeURL({ feed: 'top' })}\n                    className={classes.home}\n                  >\n                    <Hackernews />\n                    <Typography variant=\"h6\" color=\"inherit\">\n                      {t('shared:appName')}\n                    </Typography>\n                  </Link>\n                  <ul className={classes.feedList} aria-label={t('feeds')}>\n                    {interleave(\n                      feeds.map((feed: MainFeed) => (\n                        <li className={classes.feedLink} key={feed}>\n                          <Link\n                            href={FeedRoute.makeURL({ feed })}\n                            variant=\"h6\"\n                            className={classes.feedLinkText}\n                          >\n                            {t(feed)}\n                          </Link>\n                        </li>\n                      )),\n                      ' | ',\n                    )}\n                  </ul>\n                </Grid>\n              </Breakpoint.Up>\n              <Breakpoint.Down>\n                <WithToggle initial={false}>\n                  {(open: boolean, toggle: () => void): ReactNode => (\n                    <>\n                      <Button\n                        className={classes.homeButton}\n                        onClick={toggle}\n                        color=\"inherit\"\n                      >\n                        <Hackernews color=\"inherit\" />\n                        <Typography variant=\"h6\" color=\"inherit\">\n                          {t('shared:appName')}\n                        </Typography>\n                      </Button>\n                      <Drawer anchor=\"left\" open={open} onClose={toggle}>\n                        <nav>\n                          <List\n                            className={classes.drawer}\n                            aria-label={t('feeds')}\n                          >\n                            {feeds.map((feed: MainFeed) => (\n                              <ListItem key={feed} button component=\"li\">\n                                <Link\n                                  href={FeedRoute.makeURL({ feed })}\n                                  color=\"textPrimary\"\n                                  variant=\"h6\"\n                                  className={classes.feedLinkText}\n                                  onClick={toggle}\n                                >\n                                  {t(feed)}\n                                </Link>\n                              </ListItem>\n                            ))}\n                          </List>\n                        </nav>\n                      </Drawer>\n                    </>\n                  )}\n                </WithToggle>\n              </Breakpoint.Down>\n            </Breakpoint>\n            <span className={classes.spacer} />\n            <Settings />\n          </Toolbar>\n        </AppBar>\n        <span className={classes.contentShift} />\n      </>\n    )\n  }\n}\n\nexport default withNamespaces('Header')(withStyles(styles)(Header))\n","import React, { Component, ReactNode } from 'react'\nimport { HashRouter } from 'react-router-dom'\nimport LanguageProvider from './LanguageProvider/LanguageProvider'\nimport StorageProvider from './StorageProvider/StorageProvider'\nimport ThemeProvider from './ThemeProvider/ThemeProvider'\n\nclass Root extends Component {\n  public render(): ReactNode {\n    return (\n      <StorageProvider>\n        <HashRouter>\n          <ThemeProvider>\n            <LanguageProvider>{this.props.children}</LanguageProvider>\n          </ThemeProvider>\n        </HashRouter>\n      </StorageProvider>\n    )\n  }\n}\n\nexport default Root\n","import { Typography } from '@material-ui/core'\nimport React, { lazy, ReactNode } from 'react'\nimport { Route } from 'react-router-dom'\nimport RouteConfig from '../util/RouteConfig'\nimport withSuspense from '../util/withSuspense'\n\n// tslint:disable:typedef\nconst FullPage = lazy(() => import('../../FullPage/FullPage'))\n\nclass NotFoundRoute implements RouteConfig {\n  public makeURL(): never {\n    throw new Error('cannot make 404 URL')\n  }\n\n  public use(): ReactNode {\n    return withSuspense(\n      <Route>\n        <FullPage>\n          <Typography variant=\"h2\">404</Typography>\n        </FullPage>\n      </Route>,\n    )\n  }\n}\n\nexport default new NotFoundRoute()\n","import React, { ReactNode } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport FeedRoute from '../FeedRoute/FeedRoute'\nimport AbstractRouteConfig from '../util/AbstractRouteConfig'\n\nclass RootRoute extends AbstractRouteConfig {\n  protected URL: string = '/'\n  public use(): ReactNode {\n    return (\n      <Redirect from={this.URL} to={FeedRoute.makeURL({ feed: 'top' })} exact />\n    )\n  }\n}\n\nexport default new RootRoute()\n","import React, { Component } from 'react'\nimport { Switch } from 'react-router-dom'\nimport Header from '../Header/Header'\nimport Root from '../Root/Root'\nimport FeedRoute from '../routes/FeedRoute/FeedRoute'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport NotFoundRoute from '../routes/NotFoundRoute/NotFoundRoute'\nimport RootRoute from '../routes/RootRoute/RootRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\n\nimport '../Headline/Headline'\n\nclass App extends Component {\n  public render(): JSX.Element {\n    return (\n      <Root>\n        <Header />\n        <main>\n          <Switch>\n            {RootRoute.use()}\n            {FeedRoute.use()}\n            {ItemRoute.use()}\n            {UserRoute.use()}\n            {NotFoundRoute.use()}\n          </Switch>\n        </main>\n      </Root>\n    )\n  }\n}\n\nexport default App\n","import 'typeface-roboto'\n\nimport React from 'react'\nimport reactDom from 'react-dom'\n\nimport App from './App/App'\n\n// import { register } from './serviceWorker/serviceWorker'\n// register()\n\nreactDom.render(<App />, document.getElementById('root'))\n","import React, { lazy, ReactNode, Suspense } from 'react'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\nimport withSuspense from '../util/withSuspense'\n\n// tslint:disable-next-line:typedef\nconst HeadlineList = lazy(() => import('../../HeadlineList/HeadlineList'))\n\nexport type MainFeed = 'top' | 'new' | 'best' | 'ask' | 'show' | 'job'\nexport const feeds: MainFeed[] = ['top', 'new', 'best', 'ask', 'show', 'job']\n\ninterface FeedRouteParams {\n  feed: MainFeed\n  page?: number\n}\n\nclass FeedRoute extends SimpleRouteConfig<FeedRouteParams> {\n  protected URL: string = `/:feed(${feeds.join('|')})/:page(\\\\d+)?`\n  protected translateParams({\n    feed,\n    page,\n  }: AsString<FeedRouteParams>): ReactNode {\n    return withSuspense(<HeadlineList feed={feed} page={Number(page || '0')} />)\n  }\n}\n\nexport default new FeedRoute()\n","import React, { lazy, ReactNode } from 'react'\nimport { ItemId } from '../../api/types'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\nimport withSuspense from '../util/withSuspense'\n\n// tslint:disable-next-line:typedef\nconst Thread = lazy(() => import('../../Thread/Thread'))\n\ninterface ItemRouteParams {\n  id: ItemId\n}\n\nclass ItemRoute extends SimpleRouteConfig<ItemRouteParams> {\n  protected URL: string = '/item/:id(\\\\d+)'\n  protected translateParams({ id }: AsString<ItemRouteParams>): ReactNode {\n    return withSuspense(<Thread id={Number(id)} />)\n  }\n}\n\nexport default new ItemRoute()\n","import { LinearProgress } from '@material-ui/core'\nimport React, { ReactNode, Suspense } from 'react'\n\nfunction withSuspense(\n  children: ReactNode,\n  fallback: ReactNode = <LinearProgress />,\n): ReactNode {\n  return <Suspense {...{ children, fallback }} />\n}\n\nexport default withSuspense\n","import { Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { TypographyProps } from '@material-ui/core/Typography'\nimport classnames from 'classnames'\nimport mem from 'mem'\nimport React, {\n  Component,\n  FunctionComponent,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { NavLink } from 'react-router-dom'\n\ninterface LinkProps extends TypographyProps {\n  external?: boolean\n  href: string\n  children: ReactNode\n}\n\nconst styles: StyleRulesCallback = (_theme: Theme): StyleRules => ({\n  link: {\n    textDecoration: 'none',\n    '&:hover, &:focus, &:active': {\n      textDecoration: 'underline',\n      outline: 'none',\n    },\n  },\n})\n\nfunction withHref(href: string, external: boolean): FunctionComponent {\n  return function Anchor({\n    children,\n    ...other\n  }: {\n    children?: ReactNode\n  }): ReactElement<{}> {\n    return external ? (\n      <a href={href} {...other}>\n        {children}\n      </a>\n    ) : (\n      <NavLink to={href} activeClassName=\"isActive\" {...other}>\n        {children}\n      </NavLink>\n    )\n  }\n}\n\nclass Link extends Component<LinkProps & WithStyles> {\n  private _withHref: (\n    href: string,\n    external: boolean,\n  ) => FunctionComponent = mem(withHref)\n\n  public render(): ReactNode {\n    const {\n      classes,\n      href,\n      children,\n      className,\n      external = false,\n      color = 'inherit',\n      variant = 'inherit',\n      ...other\n    }: Link['props'] = this.props\n\n    return (\n      <Typography\n        className={classnames(classes.link, className)}\n        component={this._withHref(href, external)}\n        {...{ color, variant }}\n        {...other}\n      >\n        {children}\n      </Typography>\n    )\n  }\n}\n\nexport default withStyles(styles)(Link)\n","import { Bind } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { Route, RouteComponentProps } from 'react-router-dom'\nimport { AnyRecord } from '../../types'\nimport AbstractRouteConfig from './AbstractRouteConfig'\n\nexport type AsString<T extends AnyRecord> = {\n  [k in keyof T]: T[k] extends string ? T[k] : string\n}\n\nabstract class SimpleRouteConfig<\n  Params extends AnyRecord = {}\n> extends AbstractRouteConfig<Params> {\n  public use(): ReactNode {\n    return <Route path={this.URL}>{this._translateParams}</Route>\n  }\n\n  protected abstract translateParams(params: AsString<Params>): ReactNode\n\n  @Bind()\n  private _translateParams({\n    match,\n  }: RouteComponentProps<AsString<Params>>): ReactNode {\n    return match ? this.translateParams(match.params) : null\n  }\n}\n\nexport default SimpleRouteConfig\n","import { AnyRecord } from '../../../types'\nimport { Storage as StorageInterface } from '../interfaces'\n\nabstract class NamespacedAbstractStorage<T extends AnyRecord>\n  implements StorageInterface<T> {\n  private _cache: T\n\n  constructor(private _namespace: string) {\n    this._cache = this._decode()\n  }\n\n  public get<Key extends keyof T>(key: Key): T[Key] | undefined\n  public get<Key extends keyof T, Otherwise>(\n    key: Key,\n    otherwise?: Otherwise,\n  ): T[Key] | Otherwise {\n    return (this._cache[key] || otherwise) as T[Key] | Otherwise\n  }\n\n  public set<Key extends keyof T>(key: Key, value: T[Key]): void {\n    this._cache[key] = value\n    this._encode()\n  }\n\n  public delete<Key extends keyof T>(key: Key): void {\n    delete this._cache[key]\n    this._encode()\n  }\n\n  protected abstract get storage(): Storage\n\n  private _decode(): T {\n    return JSON.parse(this.storage.getItem(this._namespace) || '{}')\n  }\n\n  private _encode(): void {\n    this.storage.setItem(this._namespace, JSON.stringify(this._cache))\n  }\n}\n\nexport default NamespacedAbstractStorage\n","import mem from 'mem'\nimport { AnyRecord } from '../../../types'\nimport { Storage as StorageInterface, StorageFactory } from '../interfaces'\nimport NamespacedAbstractStorage from '../NamespacedAbstractStorage/NamespacedAbstractStorage'\n\nclass LocalStorage<T extends AnyRecord> extends NamespacedAbstractStorage<T> {\n  public static create: StorageFactory['create'] = mem<\n    StorageFactory['create']\n  >(\n    <T extends AnyRecord>(namespace: string): StorageInterface<T> => {\n      return new LocalStorage(namespace)\n    },\n  )\n\n  protected get storage(): Storage {\n    if (!window.localStorage) {\n      throw new Error('no local storage')\n    }\n\n    return localStorage\n  }\n}\n\nexport default LocalStorage as StorageFactory\n","import mem from 'mem'\nimport { AnyRecord } from '../../../types'\nimport { Storage as StorageInterface, StorageFactory } from '../interfaces'\nimport NamespacedAbstractStorage from '../NamespacedAbstractStorage/NamespacedAbstractStorage'\n\nclass SessionStorage<T extends AnyRecord> extends NamespacedAbstractStorage<T> {\n  public static create: StorageFactory['create'] = mem<\n    StorageFactory['create']\n  >(\n    <T extends AnyRecord>(namespace: string): StorageInterface<T> => {\n      return new SessionStorage(namespace)\n    },\n  )\n\n  protected get storage(): Storage {\n    if (!window.sessionStorage) {\n      throw new Error('no session storage')\n    }\n\n    return sessionStorage\n  }\n}\n\nexport default SessionStorage as StorageFactory\n","import { Bind } from 'lodash-decorators'\nimport React, {\n  Component,\n  ComponentType,\n  Context,\n  createContext,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { AnyRecord } from '../../types'\nimport { noop } from '../../util'\nimport { Storage } from './interfaces'\nimport LocalStorage from './LocalStorage/LocalStorage'\nimport SessionStorage from './SessionStorage/SessionStorage'\n\nexport type Storage<T extends AnyRecord> = Storage<T>\nexport enum StorageType {\n  LOCAL,\n  SESSION,\n}\nexport const { LOCAL, SESSION }: typeof StorageType = StorageType\n\ninterface StorageContextType {\n  getStore<T extends AnyRecord>(\n    namespace: string,\n    type?: StorageType,\n  ): Storage<T>\n}\n\nconst StorageContext: Context<StorageContextType> = createContext({\n  getStore: noop,\n} as StorageContextType)\n\nexport function StorageConsumer<T>({\n  namespace,\n  type,\n  children,\n}: {\n  namespace: string\n  type?: StorageType\n  children: (storage: Storage<T>) => ReactNode\n}): ReactElement<{}> {\n  return (\n    <StorageContext.Consumer>\n      {(context: StorageContextType): ReactNode =>\n        children(context.getStore(namespace, type))\n      }\n    </StorageContext.Consumer>\n  )\n}\n\nexport interface WithStorage<T> {\n  storage: Storage<T>\n}\ntype WithoutStorage<P> = Pick<P, Exclude<keyof P, 'storage'>>\n\nexport function withStorage<T extends AnyRecord>(\n  namespace: string,\n  type?: StorageType,\n): <P extends WithStorage<T>>(\n  Cmp: ComponentType<P>,\n) => ComponentType<WithoutStorage<P>> {\n  return <P extends WithStorage<T>>(\n    Cmp: ComponentType<P>,\n  ): ComponentType<WithoutStorage<P>> => {\n    return function WithStorageCmp(props: WithoutStorage<P>): ReactElement<{}> {\n      return (\n        <StorageContext.Consumer>\n          {(context: StorageContextType): ReactElement<{}> => {\n            const p: P = {\n              ...props,\n              storage: context.getStore(namespace, type),\n            } as P\n            return <Cmp {...p} />\n          }}\n        </StorageContext.Consumer>\n      )\n    }\n  }\n}\n\nclass StorageProvider extends Component {\n  public render(): ReactNode {\n    return (\n      <StorageContext.Provider\n        value={{\n          getStore: this._getStore,\n        }}\n      >\n        {this.props.children}\n      </StorageContext.Provider>\n    )\n  }\n\n  @Bind()\n  private _getStore<T extends AnyRecord>(\n    namespace: string,\n    type: StorageType = LOCAL,\n  ): Storage<T> {\n    switch (type) {\n      case LOCAL:\n        return LocalStorage.create(namespace)\n      case SESSION:\n        return SessionStorage.create(namespace)\n    }\n  }\n}\n\nexport default StorageProvider\n","import React, { lazy, ReactNode } from 'react'\nimport { UserId } from '../../api/types'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\nimport withSuspense from '../util/withSuspense'\n\n// tslint:disable-next-line:typedef\nconst User = lazy(() => import('../../User/User'))\n\ninterface UserRouteParams {\n  id: UserId\n}\n\nclass UserRoute extends SimpleRouteConfig<UserRouteParams> {\n  protected URL: string = '/user/:id'\n  protected translateParams({ id }: AsString<UserRouteParams>): ReactNode {\n    return withSuspense(<User id={id} />)\n  }\n}\n\nexport default new UserRoute()\n"],"sourceRoot":""}