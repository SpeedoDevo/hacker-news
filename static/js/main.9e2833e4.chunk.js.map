{"version":3,"sources":["Root/StorageProvider/interfaces/index.ts","i18n/locales lazy /^/.//.*/.json$/ groupOptions: {} namespace object","../node_modules/date-fns/locale lazy /^/.//.*$/ include: /(en-GB|en-US)//index.js$/ groupOptions: {} namespace object","Breakpoint/Breakpoint.tsx","Link/Link.tsx","api/firebase.ts","util/StatefulPromise.ts","util/clamp.ts","util/interleave.ts","util/noop.ts","api/rx.ts","ContentHtml/ContentHtml.tsx","Root/StorageProvider/NamespacedAbstractStorage/NamespacedAbstractStorage.ts","Root/StorageProvider/LocalStorage/LocalStorage.ts","Root/StorageProvider/SessionStorage/SessionStorage.ts","Root/StorageProvider/StorageProvider.tsx","User/Submissions/Submissions.tsx","routes/util/AbstractRouteConfig.ts","routes/util/SimpleRouteConfig.tsx","routes/UserRoute/SubmissionsRoute/SubmissionsRoute.tsx","WithUpdates/WithUpdates.tsx","User/User.tsx","routes/UserRoute/UserRoute.tsx","Time/Time.tsx","WithToggle/WithToggle.tsx","Comment/Comment.tsx","Thread/Thread.tsx","routes/ItemRoute/ItemRoute.tsx","Headline/Headline.tsx","Paginated/Paginated.tsx","util/arrayEquals.ts","HeadlineList/HeadlineList.tsx","routes/FeedRoute/FeedRoute.tsx","Async/Pending.tsx","Async/Rejected.tsx","Async/Resolved.tsx","Async/Async.tsx","FullPage/FullPage.tsx","ErrorPage/ErrorPage.tsx","LoadingPage/LoadingPage.tsx","Root/LanguageProvider/LanguageProvider.tsx","i18n/index.ts","Root/ThemeProvider/ThemeProvider.tsx","Header/Settings/OptionList/OptionList.tsx","Header/Settings/Settings.tsx","Header/Header.tsx","Root/Root.tsx","routes/NotFoundRoute/NotFoundRoute.tsx","routes/RootRoute/RootRoute.tsx","App/App.tsx","index.tsx"],"names":["__webpack_require__","map","./en/Comment.json","./en/Header.json","./en/Headline.json","./en/HeadlineList.json","./en/Settings.json","./en/Submissions.json","./en/User.json","./en/shared.json","webpackAsyncContext","req","ids","e","then","id","t","Promise","resolve","Error","code","keys","Object","module","exports","./en-GB","./en-GB/","./en-GB/index","./en-GB/index.js","./en-US","./en-US/","./en-US/index","./en-US/index.js","Up","_ref","children","react_default","a","createElement","Fragment","Down","_ref2","Breakpoint","_this","this","up","isWidthUp","props","at","width","render","Children","forEach","child","_dieInvalidChild","type","Component","assign","withWidth","withHref","href","external","other","objectWithoutProperties","NavLink","to","activeClassName","Link","_withHref","mem","_this$props","classes","className","_this$props$external","_this$props$color","color","_this$props$variant","variant","index_es","classnames","link","component","withStyles","_theme","textDecoration","&:hover, &:focus, &:active","outline","authDomain","concat","databaseURL","api","app","initializeApp","projectId","database","ref","withUnsubscriber","path","cb","off","on","snap","whenExists","getItem","StatefulPromiseState","getFeed","getTopStories","getNewStories","getBestStories","getAskStories","getShowStories","getJobStories","clamp","n","low","arguments","length","undefined","high","Infinity","interleave","array","insert","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","item","value","push","err","return","pop","noop","PENDING","REJECTED","RESOLVED","StatefulPromise","classCallCheck","state","catch","getApi$","Observable","subscriber","val","filterFeed$","feed$","predicate","limit","pipe","items","getItem$","item$s","item$$","from","flatMap","parallel","round","Math","sqrt","lastFiltered","item$","first","filter","index","take","toArray","left","ContentHtml","content","dangerouslySetInnerHTML","__html","theme","objectSpread","typography","body2","margin","overflow","wordBreak","& *","& p","marginTop","spacing","unit","maxWidth","& pre, & code","fontFamily","& a","palette","default","display","whiteSpace","textOverflow","verticalAlign","&:hover, &:focus","&:focus, &:active, &:visited","active","NamespacedAbstractStorage","_namespace","_cache","_decode","key","otherwise","_encode","JSON","parse","storage","setItem","stringify","LocalStorage","window","localStorage","create","namespace","SessionStorage","sessionStorage","StorageType","LOCAL","SESSION","StorageContext","createContext","getStore","withStorage","Cmp","Consumer","context","StorageProvider","Bind","Provider","_getStore","Submissions","loading","_subscribe","prevProps","reload","amount","_unsubscribe","setState","_renderEmptyPlaceholder","_renderComments","_renderSubmissions","_renderPager","_this$state","container","alignItems","direction","aria-label","src_Headline_Headline","expanded","justify","onClick","_more","history","SubmissionsRoute","makeURL","_getAmount","dead","deleted","by","_this2","_subscription","_predicate","subscribe","unsubscribe","withNamespaces","withRouter","AbstractRouteConfig","Memoize","params","_compileURL","URL","fn","compile","SimpleRouteConfig","Route","_translateParams","match","translateParams","filters","UserRoute_SubmissionsRoute_SubmissionsRoute","join","User_Submissions_Submissions","Number","WithUpdates","data","_unsubscriber","User","src_WithUpdates_WithUpdates","_renderUser","user","created","karma","about","usernameCaption","username","aria-labelledby","createdCaption","date","mdi_material_ui_index_es","fontSize","aboutCaption","src_ContentHtml_ContentHtml","links","src_Link_Link","submissions","use","getUser","defineProperty","mixins","appMaxWidth","padding","gridTemplateAreas","gridTemplateColumns","gridGap","justifyItems","breakpoints","down","gridArea","&.isActive::before","justifySelf","routes_UserRoute_UserRoute","src_User_User","Time","distance","dateTime","Date","toISOString","time","Toggle","possibleConstructorReturn","getPrototypeOf","call","initial","_toggle","onChange","Comment","_renderComment","comment","text","nodeId","WithToggle","get","_onToggle","collapsed","toggle","root","barContainer","bar","aria-controls","aria-expanded","aria-hidden","inline","UserRoute","ItemRoute","src_Time_Time","toConsumableArray","expandButton","disableRipple","_renderKids","kids","kid","Self","_this$props2","set","delete","& + &, & &","background","border","font","lineHeight","WebkitUserSelect","MozUserSelect","msUserSelect","&::-moz-focus-inner","height","minWidth","minHeight","boxShadow","shadows","cursor","borderLeft","grey","borderLeftColor","flex","marginRight","caption","marginLeft","secondary","fontWeight","fontWeightMedium","Thread","_renderItem","spacer","src_Comment_Comment","routes_ItemRoute_ItemRoute","src_Thread_Thread","Headline","_item","_empty","_caption","_core","_pollOption","_comment","_headerToUrlOrComments","_deriveCaption","_maybeText","_maybePollOptions","score","poll","count","_captionLink","parent","title","url","_header","descendants","spaced","expandedText","_this$props3","pollOptions","parts","part","Headline_Self","paddingLeft","Paginated","paginated","pageSize","floor","nextProps","right","nextPaginated","page","begin","slice","paginate","every","v","i","ButtonLinkTo","es_Link","HeadlineList","_getFeedReader","_paginated","src_Paginated_Paginated","_getPage","_renderList","numberOfPages","list","card","alignContent","disabled","FeedRoute","feed","_getFeed","pager","flexGrow","feeds","routes_FeedRoute_FeedRoute","src_HeadlineList_HeadlineList","Pending","Rejected","error","Resolved","Async","promise","result","stateToChild","_getStateToChild","element","cloneElement","_this3","_emptyStateToChild","FullPage","ErrorPage","src_FullPage_FullPage","icon","h1","LoadingPage","size","DEFAULT_LANGUAGE","LanguageContext","React","selectedLanguage","setLanguage","LanguageProvider","Once","language","src_Async_Async","_i18n","src_LoadingPage_LoadingPage","i18next","es","i18n","_getLanguageContext","src_ErrorPage_ErrorPage","changeLanguage","initLanguage","currentLocale","reject","read","callback","init","debug","lng","fallbackLng","defaultNS","ns","interpolation","escapeValue","formatSeparator","format","formatDistance","addSuffix","locale","formatDate","react","wait","setup","DEFAULT_THEME","ThemeContext","selectedTheme","setTheme","ThemeProvider","core_styles","_createMuiTheme","_setTheme","createMuiTheme","toolbarMaxWidth","indigo","A700","A100","useNextVariants","OptionList","optionTranslations","onSelected","isSelected","options","subheader","option","button","checked","tabIndex","withSettingsNamespace","LanguageSettings","languages","returnObjects","ThemeSettings","themes","ResponsiveDialog","withMobileDialog","Dialog","Settings","aria-haspopup","open","onClose","dialogContent","Header","toolbar","src_Breakpoint_Breakpoint","home","feedList","feedLink","feedLinkText","homeButton","anchor","drawer","Header_Settings_Settings","contentShift","alignSelf","fontWeightLight","textTransform","Root","Root_StorageProvider_StorageProvider","HashRouter","Root_ThemeProvider_ThemeProvider","Root_LanguageProvider_LanguageProvider","routes_NotFoundRoute_NotFoundRoute","routes_RootRoute_RootRoute","Redirect","exact","App","src_Root_Root","src_Header_Header","Switch","RootRoute","NotFoundRoute","reactDom","src_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.9e2833e4.chunk.js","sourcesContent":["export * from './Storage'\n","var map = {\n\t\"./en/Comment.json\": [\n\t\t3766,\n\t\t3\n\t],\n\t\"./en/Header.json\": [\n\t\t3767,\n\t\t4\n\t],\n\t\"./en/Headline.json\": [\n\t\t3768,\n\t\t5\n\t],\n\t\"./en/HeadlineList.json\": [\n\t\t3769,\n\t\t6\n\t],\n\t\"./en/Settings.json\": [\n\t\t3770,\n\t\t7\n\t],\n\t\"./en/Submissions.json\": [\n\t\t3771,\n\t\t8\n\t],\n\t\"./en/User.json\": [\n\t\t3772,\n\t\t9\n\t],\n\t\"./en/shared.json\": [\n\t\t3773,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3763;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./en-GB\": [\n\t\t133,\n\t\t0\n\t],\n\t\"./en-GB/\": [\n\t\t133,\n\t\t0\n\t],\n\t\"./en-GB/index\": [\n\t\t133,\n\t\t0\n\t],\n\t\"./en-GB/index.js\": [\n\t\t133,\n\t\t0\n\t],\n\t\"./en-US\": [\n\t\t134,\n\t\t1\n\t],\n\t\"./en-US/\": [\n\t\t134,\n\t\t1\n\t],\n\t\"./en-US/index\": [\n\t\t134,\n\t\t1\n\t],\n\t\"./en-US/index.js\": [\n\t\t134,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3764;\nmodule.exports = webpackAsyncContext;","import { Breakpoint as BreakpointId } from '@material-ui/core/styles/createBreakpoints'\nimport withWidth, { isWidthUp, WithWidth } from '@material-ui/core/withWidth'\nimport React, {\n  Children,\n  Component,\n  ComponentClass,\n  ComponentType,\n  Fragment,\n  ReactChild,\n  ReactElement,\n  ReactNode,\n} from 'react'\n\ninterface BreakpointProps {\n  at: BreakpointId\n}\n\ninterface JustChildren {\n  children: ReactNode\n}\nconst Up: ComponentType<JustChildren> = ({\n  children,\n}: JustChildren): ReactElement<{}> => <>{children}</>\nconst Down: ComponentType<JustChildren> = ({\n  children,\n}: JustChildren): ReactElement<{}> => <>{children}</>\n\nclass Breakpoint extends Component<BreakpointProps & WithWidth> {\n  public render(): ReactNode {\n    const up: boolean = isWidthUp(this.props.at, this.props.width)\n    let render: ReactNode = null\n    Children.forEach(\n      this.props.children,\n      (child: ReactChild): void => {\n        if (typeof child !== 'object') return this._dieInvalidChild()\n\n        switch (child.type) {\n          case Up:\n            if (up) {\n              render = render || child\n            }\n            break\n          case Down:\n            if (!up) {\n              render = render || child\n            }\n            break\n          default:\n            this._dieInvalidChild()\n        }\n      },\n    )\n\n    return render\n  }\n  private _dieInvalidChild(): void {\n    throw new Error('use only Breakpoint.* components as a child to Breakpoint')\n  }\n}\n\nexport default Object.assign(withWidth()(Breakpoint), { Up, Down })\n","import { Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { TypographyProps } from '@material-ui/core/Typography'\nimport classnames from 'classnames'\nimport mem from 'mem'\nimport React, {\n  Component,\n  FunctionComponent,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { NavLink } from 'react-router-dom'\n\ninterface LinkProps extends TypographyProps {\n  external?: boolean\n  href: string\n  children: ReactNode\n}\n\nconst styles: StyleRulesCallback = (_theme: Theme): StyleRules => ({\n  link: {\n    textDecoration: 'none',\n    '&:hover, &:focus, &:active': {\n      textDecoration: 'underline',\n      outline: 'none',\n    },\n  },\n})\n\nfunction withHref(href: string, external: boolean): FunctionComponent {\n  return function Anchor({\n    children,\n    ...other\n  }: {\n    children?: ReactNode\n  }): ReactElement<{}> {\n    return external ? (\n      <a href={href} {...other}>\n        {children}\n      </a>\n    ) : (\n      <NavLink to={href} activeClassName=\"isActive\" {...other}>\n        {children}\n      </NavLink>\n    )\n  }\n}\n\nclass Link extends Component<LinkProps & WithStyles> {\n  private _withHref: (\n    href: string,\n    external: boolean,\n  ) => FunctionComponent = mem(withHref)\n\n  public render(): ReactNode {\n    const {\n      classes,\n      href,\n      children,\n      className,\n      external = false,\n      color = 'inherit',\n      variant = 'inherit',\n      ...other\n    }: Link['props'] = this.props\n\n    return (\n      <Typography\n        className={classnames(classes.link, className)}\n        component={this._withHref(href, external)}\n        {...{ color, variant }}\n        {...other}\n      >\n        {children}\n      </Typography>\n    )\n  }\n}\n\nexport default withStyles(styles)(Link)\n","import app from '@firebase/app'\nimport { FirebaseApp } from '@firebase/app-types'\nimport '@firebase/database'\nimport { FirebaseDatabase, Reference } from '@firebase/database-types'\nimport mem from 'mem'\nimport {\n  Feed,\n  FeedId,\n  FeedReader,\n  Item,\n  ItemId,\n  Snapshot,\n  Subscriber,\n  Unsubscriber,\n  User,\n  UserId,\n} from './types'\n\nconst projectId: string = 'hacker-news'\nconst authDomain: string = `${projectId}.firebaseio.com`\nconst databaseURL: string = `https://${authDomain}`\n\nconst firebase: Required<FirebaseApp> = app.initializeApp({\n  authDomain,\n  databaseURL,\n  projectId,\n}) as Required<FirebaseApp>\n\nconst database: FirebaseDatabase = firebase.database()\nconst api: Reference = database.ref('v0')\n\nfunction whenExists<T>(cb: Subscriber<T>): (snap: Snapshot<T> | null) => void {\n  return (snap: Snapshot<T> | null): void => {\n    if (snap) cb(snap)\n  }\n}\n\nexport function withUnsubscriber<T>(\n  path: string,\n  cb: Subscriber<T>,\n): Unsubscriber {\n  const ref: Reference = api.child(path)\n  const off: ReturnType<Reference['off']> = ref.on('value', whenExists(cb))\n  return (): void => {\n    ref.off('value', off)\n  }\n}\n\nexport function getItem<T extends Item>(\n  id: ItemId,\n  cb: Subscriber<T>,\n): Unsubscriber {\n  return withUnsubscriber(`item/${id}`, cb)\n}\n\nexport function getUser(id: UserId, cb: Subscriber<User>): Unsubscriber {\n  return withUnsubscriber(`user/${id}`, cb)\n}\n\nconst getFeed: (id: FeedId) => FeedReader = mem(\n  (id: FeedId): FeedReader => (cb: Subscriber<Feed>): Unsubscriber =>\n    withUnsubscriber(id, cb),\n)\n\nexport const getTopStories: FeedReader = getFeed('topstories')\nexport const getNewStories: FeedReader = getFeed('newstories')\nexport const getBestStories: FeedReader = getFeed('beststories')\nexport const getAskStories: FeedReader = getFeed('askstories')\nexport const getShowStories: FeedReader = getFeed('showstories')\nexport const getJobStories: FeedReader = getFeed('jobstories')\n","export enum StatefulPromiseState {\n  PENDING,\n  RESOLVED,\n  REJECTED,\n}\n\nexport const {\n  PENDING,\n  REJECTED,\n  RESOLVED,\n}: typeof StatefulPromiseState = StatefulPromiseState\n\nexport class StatefulPromise<T> {\n  public state: StatefulPromiseState = StatefulPromiseState.PENDING\n  constructor(public value: Promise<T>) {\n    value\n      .then(() => {\n        this.state = StatefulPromiseState.RESOLVED\n      })\n      .catch(() => {\n        this.state = StatefulPromiseState.REJECTED\n      })\n  }\n}\n","export function clamp(\n  n: number,\n  low: number = 0,\n  high: number = Infinity,\n): number {\n  if (n < low) {\n    return low\n  }\n\n  if (n > high) {\n    return high\n  }\n\n  return n\n}\n","export function interleave<T = unknown, U = unknown>(\n  array: T[],\n  insert: U,\n): Array<T | U> {\n  const res: Array<T | U> = []\n  for (const item of array) {\n    res.push(item, insert)\n  }\n  res.pop()\n  return res\n}\n","// tslint:disable-next-line no-any\nexport function noop(...args: any[]): void {\n  // noop\n}\n","import { from, Observable, Subscriber, TeardownLogic } from 'rxjs'\nimport { filter, first, flatMap, map, take, toArray } from 'rxjs/operators'\nimport { clamp } from '../util'\nimport { withUnsubscriber } from './firebase'\nimport { Item, ItemId, Items, Snapshot, UserId } from './types'\n\nfunction getApi$<T>(path: string): Observable<T> {\n  return new Observable(\n    (subscriber: Subscriber<T>): TeardownLogic => {\n      return withUnsubscriber(path, (snap: Snapshot<T>) => {\n        subscriber.next(snap.val())\n      })\n    },\n  )\n}\n\nexport function getItem$(id: ItemId): Observable<Item> {\n  return getApi$(`item/${id}`)\n}\n\nexport function getUserSubmissions$(id: UserId): Observable<Items> {\n  return getApi$(`user/${id}/submitted`)\n}\n\ninterface WithLeft {\n  left: number\n  items: Item[]\n}\n\nexport function filterFeed$(\n  feed$: Observable<Items>,\n  predicate: (item: Item) => boolean,\n  limit: number = Infinity,\n): Observable<WithLeft> {\n  interface WithLength {\n    length: number\n    item$$: Observable<Observable<Item>>\n  }\n\n  return feed$.pipe(\n    map((items: Items) => items.map((id: ItemId) => getItem$(id))),\n    map(\n      (item$s: Array<Observable<Item>>): WithLength => ({\n        length: item$s.length,\n        item$$: from(item$s),\n      }),\n    ),\n    flatMap(({ length, item$$ }: WithLength) => {\n      const { round, sqrt }: typeof Math = Math\n      const parallel: number = clamp(round(sqrt(length)), 1, limit)\n      let lastFiltered: number = 0\n\n      return item$$.pipe(\n        flatMap((item$: Observable<Item>) => item$.pipe(first()), parallel),\n        filter((item: Item, index: number) => {\n          lastFiltered = index\n          return predicate(item)\n        }),\n        take(limit),\n        toArray(),\n        map(\n          (items: Item[]): WithLeft => ({\n            items,\n            left: length - lastFiltered - 1,\n          }),\n        ),\n      )\n    }),\n  )\n}\n","import {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport classnames from 'classnames'\nimport React, { Component, ReactNode } from 'react'\n\ninterface ContentHtmlProps {\n  className?: string\n  children: string\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  content: {\n    ...theme.typography.body2,\n    margin: 0,\n    width: '100%',\n    overflow: 'auto',\n    wordBreak: 'break-word',\n    '& *': {\n      margin: 0,\n    },\n    '& p': {\n      ...theme.typography.body2,\n      marginTop: theme.spacing.unit / 2,\n      maxWidth: '100%',\n      overflow: 'auto',\n      wordBreak: 'break-word',\n    },\n    '& pre, & code': {\n      ...theme.typography.body2,\n      maxWidth: '100%',\n      overflow: 'auto',\n      fontFamily: 'monospace',\n    },\n    '& a': {\n      ...theme.typography.body2,\n      color: theme.palette.link.default,\n      display: 'inline-block',\n      maxWidth: '100%',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n      verticalAlign: 'top',\n      textDecoration: 'none',\n      '&:hover, &:focus': {\n        textDecoration: 'underline',\n      },\n      '&:focus, &:active, &:visited': {\n        color: theme.palette.link.active,\n        outline: 'none',\n      },\n    },\n  },\n})\n\nclass ContentHtml extends Component<ContentHtmlProps & WithStyles> {\n  public render(): ReactNode {\n    const { classes, className }: this['props'] = this.props\n\n    return (\n      <p\n        className={classnames(classes.content, className)}\n        dangerouslySetInnerHTML={{ __html: this.props.children }}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ContentHtml)\n","import { Storage as StorageInterface, StorageBase } from '../interfaces'\n\nabstract class NamespacedAbstractStorage<T extends StorageBase>\n  implements StorageInterface<T> {\n  private _cache: T\n\n  constructor(private _namespace: string) {\n    this._cache = this._decode()\n  }\n\n  public get<Key extends keyof T, Otherwise = undefined>(\n    key: Key,\n    otherwise?: Otherwise,\n  ): T[Key] | Otherwise {\n    return this._cache[key] || otherwise\n  }\n\n  public set<Key extends keyof T>(key: Key, value: T[Key]): void {\n    this._cache[key] = value\n    this._encode()\n  }\n\n  public delete<Key extends keyof T>(key: Key): void {\n    delete this._cache[key]\n    this._encode()\n  }\n\n  protected abstract get storage(): Storage\n\n  private _decode(): T {\n    return JSON.parse(this.storage.getItem(this._namespace) || '{}')\n  }\n\n  private _encode(): void {\n    this.storage.setItem(this._namespace, JSON.stringify(this._cache))\n  }\n}\n\nexport default NamespacedAbstractStorage\n","import mem from 'mem'\nimport {\n  Storage as StorageInterface,\n  StorageBase,\n  StorageFactory,\n} from '../interfaces'\nimport NamespacedAbstractStorage from '../NamespacedAbstractStorage/NamespacedAbstractStorage'\n\nclass LocalStorage<T extends StorageBase> extends NamespacedAbstractStorage<T> {\n  public static create: StorageFactory['create'] = mem<\n    StorageFactory['create']\n  >(\n    <T extends StorageBase>(namespace: string): StorageInterface<T> => {\n      return new LocalStorage(namespace)\n    },\n  )\n\n  protected get storage(): Storage {\n    if (!window.localStorage) {\n      throw new Error('no local storage')\n    }\n\n    return localStorage\n  }\n}\n\nexport default LocalStorage as StorageFactory\n","import mem from 'mem'\nimport {\n  Storage as StorageInterface,\n  StorageBase,\n  StorageFactory,\n} from '../interfaces'\nimport NamespacedAbstractStorage from '../NamespacedAbstractStorage/NamespacedAbstractStorage'\n\nclass SessionStorage<T extends StorageBase> extends NamespacedAbstractStorage<\n  T\n> {\n  public static create: StorageFactory['create'] = mem<\n    StorageFactory['create']\n  >(\n    <T extends StorageBase>(namespace: string): StorageInterface<T> => {\n      return new SessionStorage(namespace)\n    },\n  )\n\n  protected get storage(): Storage {\n    if (!window.sessionStorage) {\n      throw new Error('no session storage')\n    }\n\n    return sessionStorage\n  }\n}\n\nexport default SessionStorage as StorageFactory\n","import { Bind } from 'lodash-decorators'\nimport React, {\n  Component,\n  ComponentType,\n  Context,\n  createContext,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { noop } from '../../util'\nimport { Storage, StorageBase } from './interfaces'\nimport LocalStorage from './LocalStorage/LocalStorage'\nimport SessionStorage from './SessionStorage/SessionStorage'\n\nexport type Storage<T extends StorageBase> = Storage<T>\nexport enum StorageType {\n  LOCAL,\n  SESSION,\n}\nexport const { LOCAL, SESSION }: typeof StorageType = StorageType\n\ninterface StorageContextType {\n  getStore<T extends StorageBase>(\n    namespace: string,\n    type?: StorageType,\n  ): Storage<T>\n}\n\nconst StorageContext: Context<StorageContextType> = createContext({\n  getStore: noop,\n} as StorageContextType)\n\nexport function StorageConsumer<T>({\n  namespace,\n  type,\n  children,\n}: {\n  namespace: string\n  type?: StorageType\n  children: (storage: Storage<T>) => ReactNode\n}): ReactElement<{}> {\n  return (\n    <StorageContext.Consumer>\n      {(context: StorageContextType): ReactNode =>\n        children(context.getStore(namespace, type))\n      }\n    </StorageContext.Consumer>\n  )\n}\n\nexport interface WithStorage<T> {\n  storage: Storage<T>\n}\ntype WithoutStorage<P> = Pick<P, Exclude<keyof P, 'storage'>>\n\nexport function withStorage<T extends StorageBase>(\n  namespace: string,\n  type?: StorageType,\n): <P extends WithStorage<T>>(\n  Cmp: ComponentType<P>,\n) => ComponentType<WithoutStorage<P>> {\n  return <P extends WithStorage<T>>(\n    Cmp: ComponentType<P>,\n  ): ComponentType<WithoutStorage<P>> => {\n    return function WithStorageCmp(props: WithoutStorage<P>): ReactElement<{}> {\n      return (\n        <StorageContext.Consumer>\n          {(context: StorageContextType): ReactElement<{}> => (\n            <Cmp storage={context.getStore(namespace, type)} {...props} />\n          )}\n        </StorageContext.Consumer>\n      )\n    }\n  }\n}\n\nclass StorageProvider extends Component {\n  public render(): ReactNode {\n    return (\n      <StorageContext.Provider\n        value={{\n          getStore: this._getStore,\n        }}\n      >\n        {this.props.children}\n      </StorageContext.Provider>\n    )\n  }\n\n  @Bind()\n  private _getStore<T extends StorageBase>(\n    namespace: string,\n    type: StorageType = LOCAL,\n  ): Storage<T> {\n    switch (type) {\n      case LOCAL:\n        return LocalStorage.create(namespace)\n      case SESSION:\n        return SessionStorage.create(namespace)\n    }\n  }\n}\n\nexport default StorageProvider\n","import { Button, Grid, LinearProgress, Typography } from '@material-ui/core'\nimport { Bind } from 'lodash-decorators'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport { RouteComponentProps, withRouter } from 'react-router-dom'\nimport { Subscription } from 'rxjs'\nimport { filterFeed$, getUserSubmissions$ } from '../../api'\nimport { Item, UserId } from '../../api/types'\nimport Headline from '../../Headline/Headline'\nimport SubmissionsRoute, {\n  Filter,\n} from '../../routes/UserRoute/SubmissionsRoute/SubmissionsRoute'\n\ninterface SubmissionsProps {\n  id: UserId\n  filter: Filter\n  amount?: number\n}\n\ninterface SubmissionsState {\n  items: Item[]\n  left: number\n  loading: boolean\n}\n\nconst PAGE_SIZE: number = 30\n\nclass Submissions extends Component<\n  SubmissionsProps & RouteComponentProps & WithNamespaces,\n  SubmissionsState\n> {\n  public state: SubmissionsState = { items: [], left: 0, loading: true }\n  private _subscription?: Subscription\n\n  public componentDidMount(): void {\n    this._subscribe()\n  }\n\n  public componentDidUpdate(prevProps: SubmissionsProps): void {\n    const reload: boolean =\n      this.props.id !== prevProps.id || this.props.filter !== prevProps.filter\n    if (reload || this.props.amount !== prevProps.amount) {\n      this._unsubscribe()\n      this._subscribe()\n      this.setState({ loading: true })\n    }\n\n    if (reload) {\n      this.setState({ items: [], left: 0 })\n    }\n  }\n\n  public componentWillUnmount(): void {\n    this._unsubscribe()\n  }\n\n  public render(): ReactNode {\n    return (\n      <>\n        {this._renderEmptyPlaceholder()}\n        {this.props.filter === 'comments'\n          ? this._renderComments()\n          : this._renderSubmissions()}\n        {this.state.loading ? <LinearProgress /> : null}\n        {this._renderPager()}\n      </>\n    )\n  }\n\n  private _renderEmptyPlaceholder(): ReactNode {\n    const { loading, items }: this['state'] = this.state\n    const { t }: this['props'] = this.props\n\n    return loading || items.length ? null : (\n      <Grid container spacing={16} alignItems=\"center\" direction=\"column\">\n        <Grid item>\n          <Typography variant=\"h6\">{t('empty')}</Typography>\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h4\" aria-label={t('shrugLabel')}>\n            {t('shrug')}\n          </Typography>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  private _renderComments(): ReactNode {\n    return this.state.items.map((item: Item) => (\n      <Headline item={item} expanded key={item.id} />\n    ))\n  }\n\n  private _renderSubmissions(): ReactNode {\n    return this.state.items.map((item: Item) => (\n      <Headline item={item} key={item.id} />\n    ))\n  }\n\n  private _renderPager(): ReactNode {\n    return this.state.left ? (\n      <Grid container spacing={8} justify=\"center\">\n        <Grid item>\n          <Button onClick={this._more}>{this.props.t('more')}</Button>\n        </Grid>\n      </Grid>\n    ) : null\n  }\n\n  @Bind()\n  private _more(): void {\n    const { id, filter }: this['props'] = this.props\n\n    this.props.history.push(\n      SubmissionsRoute.makeURL({\n        filter,\n        id,\n        amount: this._getAmount() + PAGE_SIZE,\n      }),\n    )\n  }\n\n  private _getAmount(): number {\n    return this.props.amount || PAGE_SIZE\n  }\n\n  @Bind()\n  private _predicate({ dead, deleted, type, by }: Item): boolean {\n    if (dead || deleted || !by) return false\n\n    switch (this.props.filter) {\n      case 'comments':\n        return type === 'comment'\n      case 'submissions':\n        return type !== 'comment' && type !== 'pollopt'\n    }\n  }\n\n  private _subscribe(): void {\n    this._subscription = filterFeed$(\n      getUserSubmissions$(this.props.id),\n      this._predicate,\n      this._getAmount(),\n    ).subscribe(({ items, left }: { items: Item[]; left: number }) => {\n      this.setState({ items, left, loading: false })\n    })\n  }\n\n  private _unsubscribe(): void {\n    if (this._subscription) {\n      this._subscription.unsubscribe()\n    }\n  }\n}\n\nexport default withNamespaces('Submissions')(withRouter(Submissions))\n","import { Memoize } from 'lodash-decorators'\nimport { compile } from 'path-to-regexp'\nimport { ReactNode } from 'react'\nimport RouteConfig from './RouteConfig'\n\nabstract class AbstractRouteConfig<\n  Params extends Record<string | number, unknown> = {}\n> implements RouteConfig<Params> {\n  protected abstract URL: string\n\n  public abstract use(): ReactNode\n\n  public makeURL(params: Params): string {\n    const fn: this['makeURL'] = this._compileURL(this.URL)\n    return fn(params)\n  }\n\n  @Memoize()\n  private _compileURL(URL: string): this['makeURL'] {\n    return compile(URL)\n  }\n}\n\nexport default AbstractRouteConfig\n","import { Bind } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { Route, RouteComponentProps } from 'react-router-dom'\nimport AbstractRouteConfig from './AbstractRouteConfig'\n\nexport type AsString<T extends Record<string | number, unknown>> = {\n  [k in keyof T]: T[k] extends string ? T[k] : string\n}\n\nabstract class SimpleRouteConfig<\n  Params extends Record<string | number, unknown> = {}\n> extends AbstractRouteConfig<Params> {\n  public use(): ReactNode {\n    return <Route path={this.URL}>{this._translateParams}</Route>\n  }\n\n  protected abstract translateParams(params: AsString<Params>): ReactNode\n\n  @Bind()\n  private _translateParams({\n    match,\n  }: RouteComponentProps<AsString<Params>>): ReactNode {\n    return match ? this.translateParams(match.params) : null\n  }\n}\n\nexport default SimpleRouteConfig\n","import React, { ReactNode } from 'react'\nimport { UserId } from '../../../api/types'\nimport Submissions from '../../../User/Submissions/Submissions'\nimport SimpleRouteConfig, { AsString } from '../../util/SimpleRouteConfig'\n\nexport type Filter = 'submissions' | 'comments'\nconst filters: Filter[] = ['submissions', 'comments']\n\ninterface SubmissionsRouteParams {\n  id: UserId\n  filter: Filter\n  amount?: number\n}\n\nclass SubmissionsRoute extends SimpleRouteConfig<SubmissionsRouteParams> {\n  protected URL: string = `/user/:id/:filter(${filters.join(\n    '|',\n  )})/:amount(\\\\d+)?`\n  protected translateParams({\n    id,\n    filter,\n    amount,\n  }: AsString<SubmissionsRouteParams>): ReactNode {\n    return (\n      <Submissions\n        amount={amount ? Number(amount) : undefined}\n        {...{ id, filter }}\n      />\n    )\n  }\n}\n\nexport default new SubmissionsRoute()\n","import { Component, ReactNode } from 'react'\nimport { Snapshot, Subscriber, Unsubscriber } from '../api/types'\n\nexport type WithUpdatesFrom<T> = (subscriber: Subscriber<T>) => Unsubscriber\n\ninterface WithUpdatesProps<T> {\n  from: WithUpdatesFrom<T>\n  children(data?: T): ReactNode\n}\n\ninterface WithUpdatesState<T> {\n  data?: T\n}\n\nclass WithUpdates<T> extends Component<\n  WithUpdatesProps<T>,\n  WithUpdatesState<T>\n> {\n  public state: WithUpdatesState<T> = {}\n  private _unsubscriber?: () => void\n\n  public componentDidMount(): void {\n    this._subscribe()\n  }\n\n  public componentDidUpdate(prevProps: WithUpdatesProps<T>): void {\n    if (prevProps.from !== this.props.from) {\n      this._unsubscribe()\n      this._subscribe()\n    }\n  }\n\n  public componentWillUnmount(): void {\n    this._unsubscribe()\n  }\n\n  public render(): ReactNode {\n    const { children }: this['props'] = this.props\n    return children(this.state.data)\n  }\n\n  private _subscribe(): void {\n    this._unsubscriber = this.props.from(\n      (snap: Snapshot<T>): void => {\n        this.setState({ data: snap.val() })\n      },\n    )\n  }\n\n  private _unsubscribe(): void {\n    if (this._unsubscriber) this._unsubscriber()\n    delete this._unsubscriber\n  }\n}\n\nexport default WithUpdates\n","import { Grid, Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport { Star } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport { getUser } from '../api'\nimport {\n  Subscriber,\n  Unsubscriber,\n  User as UserType,\n  UserId,\n} from '../api/types'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport SubmissionsRoute from '../routes/UserRoute/SubmissionsRoute/SubmissionsRoute'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface UserProps {\n  id: UserId\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  container: {\n    maxWidth: theme.mixins.appMaxWidth,\n    width: '100%',\n    padding: theme.spacing.unit,\n    display: 'grid',\n    gridTemplateAreas: `\n      \"usernameCaption  username     karma\"\n      \"createdCaption   created      karma\"\n      \"aboutCaption     about        about\"\n      \".                links        .\"\n      \"submissions      submissions  submissions\"`,\n    gridTemplateColumns: 'auto 1fr auto',\n    gridGap: `${theme.spacing.unit}px`,\n    justifyItems: 'start',\n    [theme.breakpoints.down('xs')]: {\n      gridTemplateAreas: `\n        \"karma            karma\"\n        \"usernameCaption  username\"\n        \"createdCaption   created\"\n        \"aboutCaption     about\"\n        \".                links\"\n        \"submissions      submissions\"`,\n      gridTemplateColumns: 'auto 1fr',\n    },\n  },\n  usernameCaption: {\n    gridArea: 'usernameCaption',\n  },\n  username: {\n    gridArea: 'username',\n  },\n  createdCaption: {\n    gridArea: 'createdCaption',\n  },\n  created: {\n    gridArea: 'created',\n  },\n  karma: {\n    gridArea: 'karma',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  aboutCaption: {\n    gridArea: 'aboutCaption',\n  },\n  about: {\n    gridArea: 'about',\n  },\n  links: {\n    gridArea: 'links',\n  },\n  link: {\n    '&.isActive::before': {\n      content: '\"> \"',\n    },\n  },\n  submissions: {\n    gridArea: 'submissions',\n    justifySelf: 'stretch',\n  },\n})\n\nclass User extends Component<UserProps & WithStyles & WithNamespaces> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._subscribe(this.props.id)}>\n        {this._renderUser}\n      </WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _renderUser(user: UserType): ReactNode {\n    if (!user) return null\n    const { classes, t }: this['props'] = this.props\n    const { id, created, karma, about }: UserType = user\n\n    return (\n      <>\n        <Grid container justify=\"center\">\n          <Grid item className={classes.container}>\n            <Typography className={classes.usernameCaption}>\n              {t('usernameCaption')}\n            </Typography>\n            <Typography\n              className={classes.username}\n              aria-labelledby={classes.usernameCaption}\n            >\n              {id}\n            </Typography>\n            <Typography className={classes.createdCaption}>\n              {t('createdCaption')}\n            </Typography>\n            <Typography\n              className={classes.created}\n              aria-labelledby={classes.createdCaption}\n            >\n              {t('shared:date', { date: created })}\n            </Typography>\n            <Typography className={classes.karma} variant=\"h4\">\n              <Star fontSize=\"inherit\" />\n              {karma}\n            </Typography>\n            <Typography className={classes.aboutCaption}>\n              {t('aboutCaption')}\n            </Typography>\n            <ContentHtml\n              className={classes.about}\n              aria-labelledby={classes.aboutCaption}\n            >\n              {about}\n            </ContentHtml>\n            <Typography className={classes.links} component=\"section\">\n              <Link\n                className={classes.link}\n                href={SubmissionsRoute.makeURL({\n                  id,\n                  filter: 'submissions',\n                })}\n              >\n                {t('submissions')}\n              </Link>\n              <Link\n                className={classes.link}\n                href={SubmissionsRoute.makeURL({ id, filter: 'comments' })}\n              >\n                {t('comments')}\n              </Link>\n            </Typography>\n            <section className={classes.submissions}>\n              {SubmissionsRoute.use()}\n            </section>\n          </Grid>\n        </Grid>\n      </>\n    )\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: UserId): WithUpdatesFrom<UserType> {\n    return (subscriber: Subscriber<UserType>): Unsubscriber =>\n      getUser(id, subscriber)\n  }\n}\n\nexport default withNamespaces('User')(withStyles(styles)(User))\n","import React, { ReactNode } from 'react'\nimport { UserId } from '../../api/types'\nimport User from '../../User/User'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\n\ninterface UserRouteParams {\n  id: UserId\n}\n\nclass UserRoute extends SimpleRouteConfig<UserRouteParams> {\n  protected URL: string = '/user/:id'\n  protected translateParams({ id }: AsString<UserRouteParams>): ReactNode {\n    return <User id={id} />\n  }\n}\n\nexport default new UserRoute()\n","import React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\n\ninterface TimeProps {\n  distance: number\n}\n\nclass Time extends Component<TimeProps & WithNamespaces> {\n  public render(): ReactNode {\n    const { distance, t }: this['props'] = this.props\n\n    return (\n      <time dateTime={new Date(distance * 1000).toISOString()}>\n        {t('shared:timeDistance', { time: distance })}\n      </time>\n    )\n  }\n}\n\nexport default withNamespaces()(Time)\n","import { Bind } from 'lodash-decorators'\nimport { Component, ReactNode } from 'react'\n\ninterface ToggleProps {\n  initial: boolean\n  onChange?(state: boolean): void\n  children(state: boolean, toggle: () => void): ReactNode\n}\n\ninterface ToggleState {\n  value: boolean\n}\n\nclass Toggle extends Component<ToggleProps, ToggleState> {\n  constructor(props: ToggleProps) {\n    super(props)\n    this.state = { value: props.initial }\n  }\n\n  public render(): ReactNode {\n    return this.props.children(this.state.value, this._toggle)\n  }\n\n  @Bind()\n  private _toggle(): void {\n    this.setState(\n      ({ value }: ToggleState) => ({ value: !value }),\n      () => {\n        if (this.props.onChange) this.props.onChange(this.state.value)\n      },\n    )\n  }\n}\n\nexport default Toggle\n","import { Button, Grid, Typography } from '@material-ui/core'\nimport { grey } from '@material-ui/core/colors'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { getItem } from '../api'\nimport {\n  Comment as CommentType,\n  ItemId,\n  Subscriber,\n  Unsubscriber,\n} from '../api/types'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport {\n  SESSION,\n  withStorage,\n  WithStorage,\n} from '../Root/StorageProvider/StorageProvider'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\nimport Time from '../Time/Time'\nimport WithToggle from '../WithToggle/WithToggle'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface CommentProps {\n  id: ItemId\n}\n\ntype CommentStorage = Record<ItemId, true>\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  root: {\n    '& + &, & &': {\n      marginTop: theme.spacing.unit,\n    },\n  },\n  inline: {\n    display: 'inline-block',\n  },\n  bar: {\n    // reset\n    background: 'none',\n    border: 0,\n    color: 'inherit',\n    font: 'inherit',\n    lineHeight: 'normal',\n    overflow: 'visible',\n    padding: 0,\n    outline: 'none',\n    WebkitUserSelect: 'none',\n    MozUserSelect: 'none',\n    msUserSelect: 'none',\n    '&::-moz-focus-inner': {\n      border: 0,\n      padding: 0,\n    },\n    // end reset\n    width: '100%',\n    height: '100%',\n    minWidth: 0,\n    minHeight: 0,\n    boxShadow: theme.shadows[0],\n    cursor: 'pointer',\n    borderLeft: `${theme.spacing.unit / 4}px solid ${grey[400]}`,\n    '&:hover, &:focus, &:active': {\n      borderLeftColor: grey[600],\n    },\n  },\n  barContainer: {\n    flex: `0 0 ${theme.spacing.unit * 1.5}px`,\n    marginRight: theme.spacing.unit * 0.25,\n  },\n  content: {\n    flex: `1 0 0`,\n    maxWidth: `calc(100% - ${theme.spacing.unit * (1.5 + 0.25)}px)`,\n  },\n  expandButton: {\n    ...theme.typography.caption,\n    padding: 0,\n    minWidth: 0,\n    minHeight: 0,\n    marginLeft: theme.spacing.unit,\n    color: theme.palette.text.secondary,\n    '&:hover, &:focus, &:active': {\n      fontWeight: theme.typography.fontWeightMedium,\n      textDecoration: 'underline',\n    },\n  },\n})\n\nclass Comment extends Component<\n  CommentProps & WithStyles & WithStorage<CommentStorage> & WithNamespaces\n> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._subscribe(this.props.id)}>\n        {this._renderComment}\n      </WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _renderComment(comment?: CommentType): ReactNode {\n    if (!comment) return null\n    const { by, text, time, dead, deleted }: CommentType = comment\n    if (dead || deleted) return null\n    const { classes, storage, id, t }: this['props'] = this.props\n    const nodeId: string = `comment-${id}`\n\n    return (\n      <WithToggle initial={!!storage.get(id)} onChange={this._onToggle}>\n        {(collapsed: boolean, toggle: () => void): ReactNode => (\n          <Grid container className={classes.root} component=\"section\">\n            <Grid item className={classes.barContainer}>\n              <button\n                className={classes.bar}\n                onClick={toggle}\n                aria-label={t('collapse')}\n                aria-controls={nodeId}\n                aria-expanded={!collapsed}\n              />\n            </Grid>\n            <Grid\n              item\n              className={classes.content}\n              id={nodeId}\n              aria-hidden={collapsed}\n            >\n              <Typography\n                variant=\"caption\"\n                color=\"textSecondary\"\n                className={classes.inline}\n                component=\"aside\"\n              >\n                {[\n                  <Link\n                    key=\"user\"\n                    href={UserRoute.makeURL({ id: by })}\n                    className={classes.inline}\n                  >\n                    {by}\n                  </Link>,\n                  ' ',\n                  <Link\n                    key=\"time\"\n                    href={ItemRoute.makeURL({ id })}\n                    className={classes.inline}\n                  >\n                    <Time distance={time} />\n                  </Link>,\n                  ...(collapsed\n                    ? [\n                        ' ',\n                        <Button\n                          key=\"expand\"\n                          className={classes.expandButton}\n                          onClick={toggle}\n                          aria-label={t('expand')}\n                          disableRipple\n                        >\n                          [+]\n                        </Button>,\n                      ]\n                    : []),\n                ]}\n              </Typography>\n              {collapsed ? null : (\n                <>\n                  <ContentHtml>{text}</ContentHtml>\n                  {this._renderKids(comment)}\n                </>\n              )}\n            </Grid>\n          </Grid>\n        )}\n      </WithToggle>\n    )\n  }\n\n  private _renderKids(comment: CommentType): ReactNode {\n    return comment.kids\n      ? comment.kids.map((kid: ItemId) => <Self key={kid} id={kid} />)\n      : null\n  }\n\n  @Bind()\n  private _onToggle(collapsed: boolean): void {\n    const { storage, id }: this['props'] = this.props\n\n    if (collapsed) {\n      storage.set(id, true)\n    } else {\n      storage.delete(id)\n    }\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<CommentType> {\n    return (subscriber: Subscriber<CommentType>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n}\n\nconst Self: ComponentType<CommentProps> = withStorage('comment', SESSION)(\n  withNamespaces('Comment')(withStyles(styles)(Comment)),\n)\nexport default Self\n","import { Grid } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ReactNode } from 'react'\nimport { getItem } from '../api'\nimport { Item, ItemId, Subscriber, Unsubscriber } from '../api/types'\nimport Comment from '../Comment/Comment'\nimport Headline from '../Headline/Headline'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\nexport interface ThreadProps {\n  id: ItemId\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  container: {\n    maxWidth: theme.mixins.appMaxWidth,\n    padding: theme.spacing.unit,\n  },\n  spacer: {\n    margin: theme.spacing.unit,\n  },\n})\n\nclass Thread extends Component<ThreadProps & WithStyles> {\n  public render(): ReactNode {\n    const { classes, id }: this['props'] = this.props\n\n    return (\n      <Grid container justify=\"center\">\n        <Grid\n          item\n          container\n          direction=\"column\"\n          className={classes.container}\n          component=\"article\"\n        >\n          <WithUpdates from={this._subscribe(id)}>\n            {this._renderItem}\n          </WithUpdates>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  @Bind()\n  private _renderItem(data?: Item): ReactNode {\n    if (!data) return null\n\n    return (\n      <>\n        <Headline id={this.props.id} expanded />\n        {this._renderComments(data)}\n      </>\n    )\n  }\n\n  private _renderComments(data: Item): ReactNode {\n    if ('kids' in data) {\n      return (\n        <>\n          <span className={this.props.classes.spacer} />\n          {data.kids.map((kid: ItemId) => (\n            <Comment id={kid} key={kid} />\n          ))}\n        </>\n      )\n    }\n\n    return null\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<Item> {\n    return (subscriber: Subscriber<Item>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n}\n\nexport default withStyles(styles)(Thread)\n","import React, { ReactNode } from 'react'\nimport { ItemId } from '../../api/types'\nimport Thread from '../../Thread/Thread'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\n\ninterface ItemRouteParams {\n  id: ItemId\n}\n\nclass ItemRoute extends SimpleRouteConfig<ItemRouteParams> {\n  protected URL: string = '/item/:id(\\\\d+)'\n  protected translateParams({ id }: AsString<ItemRouteParams>): ReactNode {\n    return <Thread id={Number(id)} />\n  }\n}\n\nexport default new ItemRoute()\n","import { Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { getItem } from '../api'\nimport {\n  Comment,\n  Item,\n  ItemId,\n  Job,\n  Poll,\n  PollOption,\n  Story,\n  Subscriber,\n  Unsubscriber,\n} from '../api/types'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\nimport Time from '../Time/Time'\nimport { interleave } from '../util/interleave'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface HeadlineProps {\n  id?: ItemId\n  item?: Item\n  expanded?: true\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  link: {\n    color: theme.palette.link.default,\n    '&:focus, &:active, &:visited': {\n      color: theme.palette.link.active,\n      outline: 'none',\n    },\n  },\n  inline: {\n    display: 'inline-block',\n  },\n  expandedText: {\n    marginTop: theme.spacing.unit,\n  },\n  pollOptions: {\n    paddingLeft: theme.spacing.unit * 4,\n  },\n})\n\ntype Core = Story | Job | Poll\nclass Headline extends Component<HeadlineProps & WithStyles & WithNamespaces> {\n  public render(): ReactNode {\n    const { item, id }: this['props'] = this.props\n\n    if (id) {\n      return (\n        <WithUpdates from={this._subscribe(id)}>{this._renderItem}</WithUpdates>\n      )\n    }\n\n    if (item) {\n      return this._renderItem(item)\n    }\n\n    throw new Error('either id or item should be provided')\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<Item> {\n    return (subscriber: Subscriber<Item>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n\n  @Bind()\n  private _renderItem(item?: Item): ReactNode {\n    return <section>{item ? this._item(item) : this._empty()}</section>\n  }\n\n  private _empty(): ReactNode {\n    return (\n      <>\n        <Typography variant=\"body1\">???</Typography>\n        {this._caption(['???'])}\n      </>\n    )\n  }\n\n  private _item(item: Item): ReactNode {\n    switch (item.type) {\n      case 'story':\n        return this._core(item)\n      case 'job':\n        return this._core(item)\n      case 'poll':\n        return this._core(item)\n      case 'pollopt':\n        return this._pollOption(item)\n      case 'comment':\n        return this._comment(item)\n      default:\n        throw new Error(`unknown item type ${(item as Item).type}`)\n    }\n  }\n\n  private _core(item: Core): ReactNode {\n    return (\n      <>\n        {this._headerToUrlOrComments(item)}\n        {this._deriveCaption(item)}\n        {this._maybeText(item, true)}\n        {this._maybePollOptions(item)}\n      </>\n    )\n  }\n\n  private _pollOption({ text, score, poll }: PollOption): ReactNode {\n    const { t }: this['props'] = this.props\n\n    return (\n      <>\n        <Typography variant=\"body1\">{text}</Typography>\n        {this._caption([\n          t('points', { count: score }),\n          '|',\n          this._captionLink(\n            'parentPoll',\n            ItemRoute.makeURL({ id: poll }),\n            t('poll'),\n          ),\n        ])}\n      </>\n    )\n  }\n\n  private _comment(comment: Comment): ReactNode {\n    const { by, id, time, parent, dead, deleted }: Comment = comment\n    if (dead || deleted) return null\n    const { t }: this['props'] = this.props\n\n    return (\n      <>\n        {this._caption([\n          this._captionLink('by', UserRoute.makeURL({ id: by }), by),\n          this._captionLink(\n            'time',\n            ItemRoute.makeURL({ id }),\n            <Time distance={time} key=\"time\" />,\n          ),\n          '|',\n          this._captionLink(\n            'parent',\n            ItemRoute.makeURL({ id: parent }),\n            t('parent'),\n          ),\n        ])}\n        {this._maybeText(comment, false)}\n      </>\n    )\n  }\n\n  private _header(\n    external: boolean,\n    href: string,\n    children: ReactNode,\n  ): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return (\n      <Link\n        variant=\"body1\"\n        className={classes.link}\n        {...{ external, href, children }}\n      />\n    )\n  }\n\n  private _headerToUrlOrComments(item: Core): ReactNode {\n    const { id, title }: typeof item = item\n    return 'url' in item && item.url\n      ? this._header(true, item.url, title)\n      : this._header(false, ItemRoute.makeURL({ id }), title)\n  }\n\n  private _caption(content: ReactNode[]): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return (\n      <Typography\n        variant=\"caption\"\n        color=\"textSecondary\"\n        className={classes.inline}\n        component=\"aside\"\n      >\n        {interleave(content, ' ')}\n      </Typography>\n    )\n  }\n\n  private _captionLink(\n    key: string,\n    href: string,\n    children: ReactNode,\n  ): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return <Link className={classes.inline} {...{ key, href, children }} />\n  }\n\n  private _deriveCaption(item: Core): ReactNode {\n    const { t }: this['props'] = this.props\n    const { score, by, time, id }: typeof item = item\n\n    return this._caption([\n      t('points', { count: score }),\n      t('by'),\n      this._captionLink('by', UserRoute.makeURL({ id: by }), by),\n      this._captionLink(\n        'time',\n        ItemRoute.makeURL({ id }),\n        <Time distance={time} key=\"time\" />,\n      ),\n      ...('descendants' in item\n        ? [\n            '|',\n            this._captionLink(\n              'comments',\n              ItemRoute.makeURL({ id }),\n              t('comments', { count: item.descendants }),\n            ),\n          ]\n        : []),\n    ])\n  }\n\n  private _maybeText(item: Item, spaced: boolean): ReactNode {\n    const { expanded, classes }: this['props'] = this.props\n\n    return expanded && 'text' in item ? (\n      <ContentHtml className={spaced ? classes.expandedText : ''}>\n        {item.text}\n      </ContentHtml>\n    ) : null\n  }\n\n  private _maybePollOptions(item: Core): ReactNode {\n    const { expanded, classes }: this['props'] = this.props\n\n    return expanded && 'parts' in item ? (\n      <section className={classes.pollOptions}>\n        {item.parts.map(\n          (part: ItemId): ReactNode => (\n            <Self id={part} key={part} />\n          ),\n        )}\n      </section>\n    ) : null\n  }\n}\n\nconst Self: ComponentType<HeadlineProps> = withNamespaces('Headline')(\n  withStyles(styles)(Headline),\n)\nexport default Self\n","import React, { Component, ReactNode } from 'react'\nimport { arrayEquals } from '../util'\n\ninterface PaginatedProps<T = unknown> {\n  data: T[]\n  page: number\n  pageSize: number\n  children: (paginated: T[], numberOfPages: number) => ReactNode\n}\n\ninterface PaginatedState<T = unknown> {\n  paginated: T[]\n}\n\nfunction paginate<T = unknown>({\n  data,\n  page,\n  pageSize,\n}: PaginatedProps<T>): T[] {\n  const begin: number = page * pageSize\n  return data.slice(begin, begin + pageSize)\n}\n\nclass Paginated<T = unknown> extends Component<\n  PaginatedProps<T>,\n  PaginatedState<T>\n> {\n  public static getDerivedStateFromProps<T = unknown>(\n    nextProps: PaginatedProps<T>,\n    { paginated }: PaginatedState<T>,\n  ): Partial<PaginatedState<T>> | null {\n    const nextPaginated: T[] = paginate(nextProps)\n\n    return arrayEquals(paginated, nextPaginated)\n      ? null\n      : { paginated: nextPaginated }\n  }\n\n  public state: PaginatedState<T> = { paginated: [] }\n\n  public render(): ReactNode {\n    const { data, children, pageSize }: this['props'] = this.props\n\n    return children(\n      this.state.paginated,\n      Math.floor(((data.length || 1) - 1) / pageSize),\n    )\n  }\n}\n\nexport default Paginated\n","export function arrayEquals<T>(left: T[], right: T[]): boolean {\n  return (\n    left.length === right.length &&\n    left.every((v: T, i: number): boolean => v === right[i])\n  )\n}\n","import { Button, Card, Grid, Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactElement, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport {\n  getAskStories,\n  getBestStories,\n  getJobStories,\n  getNewStories,\n  getShowStories,\n  getTopStories,\n} from '../api'\nimport { FeedReader, ItemId, Items } from '../api/types'\nimport Headline from '../Headline/Headline'\nimport Paginated from '../Paginated/Paginated'\nimport FeedRoute, { MainFeed } from '../routes/FeedRoute/FeedRoute'\nimport { clamp } from '../util'\nimport WithUpdates from '../WithUpdates/WithUpdates'\n\ninterface HeadlineListProps {\n  page?: number\n  feed?: MainFeed\n}\n\nconst PAGE_SIZE: number = 30\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  list: {\n    padding: 0,\n    margin: 0,\n    maxWidth: theme.mixins.appMaxWidth,\n    flexGrow: 1,\n  },\n  card: {\n    padding: theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  pager: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: `0 ${theme.spacing.unit}px`,\n  },\n})\n\nfunction ButtonLinkTo(to: string): ComponentType {\n  return function LinkTo(props: {}): ReactElement<{}> {\n    return <Link to={to} {...props} />\n  }\n}\n\nclass HeadlineList extends Component<\n  HeadlineListProps & WithStyles & WithNamespaces\n> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._getFeedReader()}>{this._paginated}</WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _paginated(data: Items = []): ReactNode {\n    return (\n      <Paginated data={data} page={this._getPage()} pageSize={PAGE_SIZE}>\n        {this._renderList}\n      </Paginated>\n    )\n  }\n\n  @Bind()\n  private _renderList(items: Items, numberOfPages: number): ReactNode {\n    const { classes, t }: this['props'] = this.props\n\n    return (\n      <article>\n        <Grid container justify=\"center\">\n          <Grid item component=\"ul\" className={classes.list}>\n            {items.map(\n              (id: ItemId): ReactNode => (\n                <Card component=\"li\" className={classes.card} key={id}>\n                  <Headline id={id} />\n                </Card>\n              ),\n            )}\n            {this._renderPager(numberOfPages)}\n          </Grid>\n        </Grid>\n      </article>\n    )\n  }\n\n  private _renderPager(numberOfPages: number): ReactNode {\n    const { classes, t }: this['props'] = this.props\n\n    return numberOfPages ? (\n      <Grid\n        item\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignContent=\"center\"\n      >\n        <Grid item>\n          <Button\n            disabled={this._getPage() <= 0}\n            component={ButtonLinkTo(\n              FeedRoute.makeURL({\n                feed: this._getFeed(),\n                page: clamp(this._getPage() - 1, 0, numberOfPages),\n              }),\n            )}\n          >\n            {t('previous')}\n          </Button>\n        </Grid>\n        <Grid item className={classes.pager}>\n          <Typography>\n            {this._getPage()}\n            {' / '}\n            {numberOfPages}\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Button\n            disabled={this._getPage() >= numberOfPages}\n            component={ButtonLinkTo(\n              FeedRoute.makeURL({\n                feed: this._getFeed(),\n                page: clamp(this._getPage() + 1, 0, numberOfPages),\n              }),\n            )}\n          >\n            {t('next')}\n          </Button>\n        </Grid>\n      </Grid>\n    ) : null\n  }\n\n  private _getPage(): number {\n    return this.props.page || 0\n  }\n\n  private _getFeed(): MainFeed {\n    return this.props.feed || 'top'\n  }\n\n  private _getFeedReader(): FeedReader {\n    const feed: MainFeed = this._getFeed()\n\n    switch (feed) {\n      case 'top':\n        return getTopStories\n      case 'new':\n        return getNewStories\n      case 'best':\n        return getBestStories\n      case 'ask':\n        return getAskStories\n      case 'show':\n        return getShowStories\n      case 'job':\n        return getJobStories\n    }\n  }\n}\n\nexport default withNamespaces('HeadlineList')(withStyles(styles)(HeadlineList))\n","import React, { ReactNode } from 'react'\nimport HeadlineList from '../../HeadlineList/HeadlineList'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\n\nexport type MainFeed = 'top' | 'new' | 'best' | 'ask' | 'show' | 'job'\nexport const feeds: MainFeed[] = ['top', 'new', 'best', 'ask', 'show', 'job']\n\ninterface FeedRouteParams {\n  feed: MainFeed\n  page?: number\n}\n\nclass FeedRoute extends SimpleRouteConfig<FeedRouteParams> {\n  protected URL: string = `/:feed(${feeds.join('|')})/:page(\\\\d+)?`\n  protected translateParams({\n    feed,\n    page,\n  }: AsString<FeedRouteParams>): ReactNode {\n    return <HeadlineList feed={feed} page={Number(page || '0')} />\n  }\n}\n\nexport default new FeedRoute()\n","import { Component, ReactNode } from 'react'\n\nclass Pending extends Component {\n  public render(): ReactNode {\n    return this.props.children\n  }\n}\n\nexport default Pending\n","import { Component, ReactNode } from 'react'\n\nexport interface RejectedProps {\n  error?: Error\n  children(error: Error): ReactNode\n}\n\nclass Rejected extends Component<RejectedProps> {\n  public render(): ReactNode {\n    return this.props.children(this.props.error as Error)\n  }\n}\n\nexport default Rejected\n","import { Component, ReactNode } from 'react'\n\nexport interface ResolvedProps<T> {\n  data?: T\n  children(data: T): ReactNode\n}\n\nclass Resolved<T> extends Component<ResolvedProps<T>> {\n  public render(): ReactNode {\n    return this.props.children(this.props.data as T)\n  }\n}\n\nexport default Resolved\n","import {\n  Children,\n  cloneElement,\n  Component,\n  ReactChild,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { PENDING, REJECTED, RESOLVED, StatefulPromise } from '../util'\nimport Pending from './Pending'\nimport Rejected, { RejectedProps } from './Rejected'\nimport Resolved, { ResolvedProps } from './Resolved'\n\nexport interface AsyncProps<T> {\n  promise(): Promise<T>\n}\n\ninterface StateToChild<T = unknown> {\n  [PENDING]: null | ReactElement<{}>\n  [RESOLVED]: null | ReactElement<ResolvedProps<T>>\n  [REJECTED]: null | ReactElement<RejectedProps>\n}\n\ninterface AsyncState<T> {\n  promise: StatefulPromise<T>\n  data?: T\n  error?: Error\n}\n\nclass Async<T> extends Component<AsyncProps<T>, AsyncState<T>> {\n  public static Pending: typeof Pending = Pending\n  public static Rejected: typeof Rejected = Rejected\n  public static Resolved: typeof Resolved = Resolved\n  private static _emptyStateToChild: StateToChild = {\n    [PENDING]: null,\n    [RESOLVED]: null,\n    [REJECTED]: null,\n  }\n\n  public constructor(props: Async<T>['props']) {\n    super(props)\n    const promise: StatefulPromise<T> = new StatefulPromise(props.promise())\n    this.state = { promise }\n  }\n\n  public componentDidMount(): void {\n    this.state.promise.value\n      .then((result: T) =>\n        this.setState({\n          data: result,\n        }),\n      )\n      .catch((error: unknown) =>\n        this.setState({\n          error: error instanceof Error ? error : new Error(`${error}`),\n        }),\n      )\n  }\n\n  public render(): ReactNode {\n    const stateToChild: StateToChild<T> = this._getStateToChild()\n    let element:\n      | null\n      | ReactElement<ResolvedProps<T>>\n      | ReactElement<RejectedProps> = null\n\n    switch (this.state.promise.state) {\n      case PENDING:\n        return stateToChild[PENDING]\n      case RESOLVED:\n        element = stateToChild[RESOLVED]\n        if (!element) return null\n        return cloneElement(element, { data: this.state.data })\n      case REJECTED:\n        element = stateToChild[REJECTED]\n        if (!element) return null\n        return cloneElement(element, { error: this.state.error })\n    }\n  }\n\n  private _getStateToChild(): StateToChild<T> {\n    const result: StateToChild = { ...Async._emptyStateToChild }\n    Children.forEach(this.props.children, (child: ReactChild) => {\n      if (typeof child !== 'object') return this._dieInvalidChild()\n\n      switch (child.type) {\n        case Pending:\n          result[PENDING] = result[PENDING] || child\n          break\n        case Resolved:\n          result[RESOLVED] = result[RESOLVED] || child\n          break\n        case Rejected:\n          result[REJECTED] = result[REJECTED] || child\n          break\n        default:\n          this._dieInvalidChild()\n      }\n    })\n\n    return result as StateToChild<T>\n  }\n\n  private _dieInvalidChild(): never {\n    throw new Error('use only Async.* components as a child to Async')\n  }\n}\n\nexport default Async\n","import { Grid } from '@material-ui/core'\nimport { StyleRules, withStyles, WithStyles } from '@material-ui/core/styles'\nimport React, { Component, ReactNode } from 'react'\n\nconst styles: StyleRules = {\n  container: {\n    height: '100vh',\n  },\n}\n\nclass FullPage extends Component<WithStyles> {\n  public render(): ReactNode {\n    const { classes }: FullPage['props'] = this.props\n\n    return (\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"center\"\n        className={classes.container}\n      >\n        <Grid item>{this.props.children}</Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default withStyles(styles)(FullPage)\n","import {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { AlertCircle } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport FullPage from '../FullPage/FullPage'\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  icon: {\n    fontSize: theme.typography.h1.fontSize,\n  },\n})\n\nclass ErrorPage extends Component<WithStyles> {\n  public render(): ReactNode {\n    const { classes }: ErrorPage['props'] = this.props\n\n    return (\n      <FullPage>\n        <AlertCircle className={classes.icon} color=\"error\" />\n      </FullPage>\n    )\n  }\n}\n\nexport default withStyles(styles)(ErrorPage)\n","import { CircularProgress } from '@material-ui/core'\nimport React, { Component, ReactNode } from 'react'\nimport FullPage from '../FullPage/FullPage'\n\nclass LoadingPage extends Component {\n  public render(): ReactNode {\n    return (\n      <FullPage>\n        <CircularProgress size={80} />\n      </FullPage>\n    )\n  }\n}\n\nexport default LoadingPage\n","import { i18n } from 'i18next'\nimport { Bind, Once } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { I18nextProvider } from 'react-i18next'\nimport Async from '../../Async/Async'\nimport ErrorPage from '../../ErrorPage/ErrorPage'\nimport { setup } from '../../i18n'\nimport LoadingPage from '../../LoadingPage/LoadingPage'\nimport { noop } from '../../util'\nimport { withStorage, WithStorage } from '../StorageProvider/StorageProvider'\n\ninterface LanguageProviderProps extends WithStorage<LanguageProviderState> {}\ninterface LanguageProviderState {\n  language: string\n}\n\nexport interface LanguageContextType {\n  selectedLanguage: string\n  setLanguage(language: string): void\n}\n\nconst DEFAULT_LANGUAGE: string = 'en-GB'\nexport const LanguageContext: React.Context<\n  LanguageContextType\n> = React.createContext({\n  selectedLanguage: DEFAULT_LANGUAGE,\n  setLanguage: noop,\n})\n\nclass LanguageProvider extends React.Component<\n  LanguageProviderProps,\n  LanguageProviderState\n> {\n  public state: LanguageProviderState = { language: DEFAULT_LANGUAGE }\n  constructor(props: LanguageProviderProps) {\n    super(props)\n    this.state = {\n      language: props.storage.get('language', DEFAULT_LANGUAGE),\n    }\n  }\n\n  public render(): ReactNode {\n    return (\n      <Async promise={this._i18n}>\n        <Async.Pending>\n          <LoadingPage />\n        </Async.Pending>\n        <Async.Resolved>\n          {(i18next: i18n): ReactNode => {\n            return (\n              <I18nextProvider i18n={i18next}>\n                <LanguageContext.Provider\n                  value={this._getLanguageContext(i18next)}\n                >\n                  {this.props.children}\n                </LanguageContext.Provider>\n              </I18nextProvider>\n            )\n          }}\n        </Async.Resolved>\n        <Async.Rejected>{(): ReactNode => <ErrorPage />}</Async.Rejected>\n      </Async>\n    )\n  }\n\n  private _getLanguageContext(i18next: i18n): LanguageContextType {\n    return {\n      selectedLanguage: this.state.language,\n      setLanguage: (language: string): void => {\n        if (this.state.language !== language) {\n          i18next.changeLanguage(language)\n          this.props.storage.set('language', language)\n          this.setState({ language })\n        }\n      },\n    }\n  }\n\n  @Bind()\n  @Once()\n  private _i18n(): Promise<i18n> {\n    return setup(this.state.language)\n  }\n}\n\nexport default withStorage('language')(LanguageProvider)\n","import { format as formatDate, formatDistance, Locale } from 'date-fns'\nimport i18next, { i18n } from 'i18next'\n\nexport function setup(initLanguage: string): Promise<i18n> {\n  let currentLocale: Locale | undefined\n\n  return new Promise(\n    (resolve: (i: i18n) => void, reject: (e: Error) => void): void => {\n      i18next\n        .use({\n          type: 'backend',\n          read(\n            language: string,\n            namespace: string,\n            callback: (err: Error | null, result?: object) => void,\n          ): void {\n            import(`./locales/${language}/${namespace}.json`)\n              .then((result: object) => callback(null, result))\n              .catch(() => {\n                callback(null, {})\n              })\n          },\n        })\n        .init(\n          {\n            debug: false,\n            lng: initLanguage,\n            fallbackLng: false,\n            defaultNS: 'shared',\n            ns: 'shared',\n            interpolation: {\n              escapeValue: false,\n              formatSeparator: '|',\n              format(value: unknown, format?: string): string {\n                switch (format) {\n                  case 'distance': {\n                    if (typeof value !== 'number') {\n                      throw new Error('invalid distance value')\n                    }\n                    return formatDistance(new Date(1000 * value), new Date(), {\n                      addSuffix: true,\n                      locale: currentLocale,\n                    })\n                  }\n                  case 'date': {\n                    if (typeof value !== 'number') {\n                      throw new Error('invalid distance value')\n                    }\n                    return formatDate(new Date(1000 * value), 'PP', {\n                      locale: currentLocale,\n                    })\n                  }\n                  default:\n                    throw new Error('formatter not implemented')\n                }\n              },\n            },\n            react: {\n              wait: true,\n            },\n          },\n          (error: unknown) => {\n            if (error) {\n              reject(new Error(`${error}`))\n            } else {\n              resolve(i18next)\n            }\n          },\n        )\n        .on('languageChanged', (language: string) => {\n          import(/* webpackInclude: /(en-GB|en-US)\\/index.js$/ */ `date-fns/locale/${language}`)\n            .then(\n              (locale: Locale): void => {\n                currentLocale = locale\n              },\n            )\n            .catch((error: Error) => {\n              if (process.env.NODE_ENV === 'development') {\n                // tslint:disable-next-line no-console\n                console.warn('locale not found', language, error)\n              }\n            })\n        })\n    },\n  )\n}\n","import {\n  createMuiTheme,\n  CssBaseline,\n  MuiThemeProvider,\n  PaletteType,\n  Theme,\n} from '@material-ui/core'\nimport { indigo } from '@material-ui/core/colors'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { noop } from '../../util'\nimport { WithStorage, withStorage } from '../StorageProvider/StorageProvider'\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    appMaxWidth: number\n    toolbarMaxWidth: number\n  }\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface PaletteOptions {\n    link: {\n      default: string\n      active: string\n    }\n  }\n\n  interface Palette {\n    link: {\n      default: string\n      active: string\n    }\n  }\n}\n\ninterface ThemeProviderProps extends WithStorage<ThemeProviderState> {}\n\ninterface ThemeProviderState {\n  theme: PaletteType\n}\n\nexport interface ThemeContextType {\n  selectedTheme: PaletteType\n  setTheme(theme: PaletteType): void\n}\n\nconst DEFAULT_THEME: PaletteType = 'dark'\nexport const ThemeContext: React.Context<\n  ThemeContextType\n> = React.createContext({\n  selectedTheme: DEFAULT_THEME,\n  setTheme: noop,\n} as ThemeContextType)\n\nclass ThemeProvider extends React.Component<\n  ThemeProviderProps,\n  ThemeProviderState\n> {\n  constructor(props: ThemeProviderProps) {\n    super(props)\n    this.state = {\n      theme: props.storage.get('theme', DEFAULT_THEME),\n    }\n  }\n\n  public render(): ReactNode {\n    return (\n      <MuiThemeProvider theme={this._createMuiTheme(this.state.theme)}>\n        <CssBaseline />\n        <ThemeContext.Provider\n          value={{\n            setTheme: this._setTheme,\n            selectedTheme: this.state.theme,\n          }}\n        >\n          {this.props.children}\n        </ThemeContext.Provider>\n      </MuiThemeProvider>\n    )\n  }\n\n  @Bind()\n  private _setTheme(theme: PaletteType): void {\n    if (this.state.theme !== theme) {\n      this.setState({ theme })\n      this.props.storage.set('theme', theme)\n    }\n  }\n\n  @Memoize()\n  private _createMuiTheme(type: PaletteType): Theme {\n    return createMuiTheme({\n      mixins: {\n        appMaxWidth: 8 * 120,\n        toolbarMaxWidth: 8 * 150,\n      },\n      palette: {\n        type,\n        link:\n          type === 'light'\n            ? {\n                default: indigo.A700,\n                active: indigo[700],\n              }\n            : {\n                default: indigo.A100,\n                active: indigo[100],\n              },\n      },\n      typography: {\n        useNextVariants: true,\n      },\n    })\n  }\n}\n\nexport default withStorage('theme')(ThemeProvider)\n","import {\n  List,\n  ListItem,\n  ListItemText,\n  ListSubheader,\n  Radio,\n} from '@material-ui/core'\nimport React, { ReactElement, ReactNode } from 'react'\n\nexport function OptionList<Key extends string | number = string>(\n  title: string,\n  optionTranslations: { [k in Key]: string },\n  onSelected: (option: Key) => () => void,\n  isSelected: (option: Key) => boolean,\n): ReactElement<{}> {\n  const options: Key[] = Object.keys(optionTranslations) as Key[]\n\n  return (\n    <List subheader={<ListSubheader>{title}</ListSubheader>}>\n      {options.map(\n        (option: Key): ReactNode => (\n          <ListItem key={option} button onClick={onSelected(option)}>\n            <Radio checked={isSelected(option)} tabIndex={-1} disableRipple />\n            <ListItemText>{optionTranslations[option]}</ListItemText>\n          </ListItem>\n        ),\n      )}\n    </List>\n  )\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  PaletteType,\n  withMobileDialog,\n} from '@material-ui/core'\nimport { DialogProps } from '@material-ui/core/Dialog'\nimport { StyleRules, WithStyles, withStyles } from '@material-ui/core/styles'\nimport { Settings as SettingsIcon } from 'mdi-material-ui'\nimport React, { Component, ComponentType, ReactElement, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport {\n  LanguageContext,\n  LanguageContextType,\n} from '../../Root/LanguageProvider/LanguageProvider'\nimport {\n  ThemeContext,\n  ThemeContextType,\n} from '../../Root/ThemeProvider/ThemeProvider'\nimport WithToggle from '../../WithToggle/WithToggle'\nimport { OptionList } from './OptionList/OptionList'\n\nconst withSettingsNamespace: ReturnType<typeof withNamespaces> = withNamespaces(\n  'Settings',\n)\n\nconst LanguageSettings: ComponentType = withSettingsNamespace(\n  ({ t }: WithNamespaces): ReactElement<{}> => {\n    const languages: { [language: string]: string } = t('languages', {\n      returnObjects: true,\n    })\n\n    return (\n      <LanguageContext.Consumer>\n        {(context: LanguageContextType): ReactNode =>\n          OptionList(\n            t('language'),\n            languages,\n            (language: string) => (): void => context.setLanguage(language),\n            (language: string) => context.selectedLanguage === language,\n          )\n        }\n      </LanguageContext.Consumer>\n    )\n  },\n)\nconst ThemeSettings: ComponentType = withSettingsNamespace(\n  ({ t }: WithNamespaces): ReactElement<{}> => {\n    const themes: { [language in PaletteType]: string } = t('themes', {\n      returnObjects: true,\n    })\n\n    return (\n      <ThemeContext.Consumer>\n        {(context: ThemeContextType): ReactNode =>\n          OptionList(\n            t('theme'),\n            themes,\n            (theme: PaletteType) => (): void => context.setTheme(theme),\n            (theme: PaletteType) => context.selectedTheme === theme,\n          )\n        }\n      </ThemeContext.Consumer>\n    )\n  },\n)\n\nconst ResponsiveDialog: ComponentType<DialogProps> = withMobileDialog<\n  DialogProps\n>()(Dialog)\n\nconst styles: StyleRules = {\n  dialogContent: { padding: 0 },\n}\n\nclass Settings extends Component<WithNamespaces & WithStyles> {\n  public render(): ReactNode {\n    const { t, classes }: Settings['props'] = this.props\n\n    return (\n      <WithToggle initial={false}>\n        {(state: boolean, toggle: () => void): ReactNode => (\n          <>\n            <IconButton\n              onClick={toggle}\n              color=\"inherit\"\n              aria-label={t('settings')}\n              aria-haspopup\n            >\n              <SettingsIcon />\n            </IconButton>\n            <ResponsiveDialog open={state} onClose={toggle}>\n              <DialogTitle>{t('settings')}</DialogTitle>\n              <DialogContent className={classes.dialogContent}>\n                <LanguageSettings />\n                <ThemeSettings />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={toggle}>{t('shared:close')}</Button>\n              </DialogActions>\n            </ResponsiveDialog>\n          </>\n        )}\n      </WithToggle>\n    )\n  }\n}\n\nexport default withSettingsNamespace(withStyles(styles)(Settings))\n","import {\n  AppBar,\n  Button,\n  Drawer,\n  Grid,\n  List,\n  ListItem,\n  Toolbar,\n  Typography,\n} from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { Hackernews } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport Breakpoint from '../Breakpoint/Breakpoint'\nimport Link from '../Link/Link'\nimport FeedRoute, { feeds, MainFeed } from '../routes/FeedRoute/FeedRoute'\nimport { interleave } from '../util'\nimport WithToggle from '../WithToggle/WithToggle'\nimport Settings from './Settings/Settings'\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  toolbar: {\n    maxWidth: theme.mixins.toolbarMaxWidth,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  home: {\n    display: 'flex',\n    alignItems: 'center',\n    marginRight: theme.spacing.unit,\n  },\n  feedList: {\n    display: 'block',\n    margin: 0,\n    padding: 0,\n  },\n  feedLink: {\n    display: 'inline-block',\n    margin: 0,\n    padding: 0,\n  },\n  feedLinkText: {\n    fontWeight: theme.typography.fontWeightLight,\n    flexGrow: 1,\n    '&.isActive::before': {\n      content: '\"> \"',\n    },\n  },\n  homeButton: {\n    textTransform: 'none',\n  },\n  drawer: {\n    minWidth: '50vw',\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n  contentShift: {\n    ...theme.mixins.toolbar,\n    display: 'block',\n  },\n})\n\nclass Header extends Component<WithNamespaces & WithStyles> {\n  public render(): ReactNode {\n    const { t, classes }: Header['props'] = this.props\n\n    return (\n      <>\n        <AppBar>\n          <Toolbar className={classes.toolbar}>\n            <Breakpoint at=\"sm\">\n              <Breakpoint.Up>\n                <Grid container component=\"nav\">\n                  <Link\n                    href={FeedRoute.makeURL({ feed: 'top' })}\n                    className={classes.home}\n                  >\n                    <Hackernews />\n                    <Typography variant=\"h6\" color=\"inherit\">\n                      {t('shared:appName')}\n                    </Typography>\n                  </Link>\n                  <ul className={classes.feedList} aria-label={t('feeds')}>\n                    {interleave(\n                      feeds.map((feed: MainFeed) => (\n                        <li className={classes.feedLink} key={feed}>\n                          <Link\n                            href={FeedRoute.makeURL({ feed })}\n                            variant=\"h6\"\n                            className={classes.feedLinkText}\n                          >\n                            {t(feed)}\n                          </Link>\n                        </li>\n                      )),\n                      ' | ',\n                    )}\n                  </ul>\n                </Grid>\n              </Breakpoint.Up>\n              <Breakpoint.Down>\n                <WithToggle initial={false}>\n                  {(open: boolean, toggle: () => void): ReactNode => (\n                    <>\n                      <Button\n                        className={classes.homeButton}\n                        onClick={toggle}\n                        color=\"inherit\"\n                      >\n                        <Hackernews color=\"inherit\" />\n                        <Typography variant=\"h6\" color=\"inherit\">\n                          {t('shared:appName')}\n                        </Typography>\n                      </Button>\n                      <Drawer anchor=\"left\" open={open} onClose={toggle}>\n                        <nav>\n                          <List\n                            className={classes.drawer}\n                            aria-label={t('feeds')}\n                          >\n                            {feeds.map((feed: MainFeed) => (\n                              <ListItem key={feed} button component=\"li\">\n                                <Link\n                                  href={FeedRoute.makeURL({ feed })}\n                                  color=\"textPrimary\"\n                                  variant=\"h6\"\n                                  className={classes.feedLinkText}\n                                  onClick={toggle}\n                                >\n                                  {t(feed)}\n                                </Link>\n                              </ListItem>\n                            ))}\n                          </List>\n                        </nav>\n                      </Drawer>\n                    </>\n                  )}\n                </WithToggle>\n              </Breakpoint.Down>\n            </Breakpoint>\n            <span className={classes.spacer} />\n            <Settings />\n          </Toolbar>\n        </AppBar>\n        <span className={classes.contentShift} />\n      </>\n    )\n  }\n}\n\nexport default withNamespaces('Header')(withStyles(styles)(Header))\n","import React, { Component, ReactNode } from 'react'\nimport { HashRouter } from 'react-router-dom'\nimport LanguageProvider from './LanguageProvider/LanguageProvider'\nimport StorageProvider from './StorageProvider/StorageProvider'\nimport ThemeProvider from './ThemeProvider/ThemeProvider'\n\nclass Root extends Component {\n  public render(): ReactNode {\n    return (\n      <StorageProvider>\n        <HashRouter>\n          <ThemeProvider>\n            <LanguageProvider>{this.props.children}</LanguageProvider>\n          </ThemeProvider>\n        </HashRouter>\n      </StorageProvider>\n    )\n  }\n}\n\nexport default Root\n","import { Typography } from '@material-ui/core'\nimport React, { ReactNode } from 'react'\nimport { Route } from 'react-router-dom'\nimport FullPage from '../../FullPage/FullPage'\nimport RouteConfig from '../util/RouteConfig'\n\nclass NotFoundRoute implements RouteConfig {\n  public makeURL(): never {\n    throw new Error('cannot make 404 URL')\n  }\n\n  public use(): ReactNode {\n    return (\n      <Route>\n        <FullPage>\n          <Typography variant=\"h2\">404</Typography>\n        </FullPage>\n      </Route>\n    )\n  }\n}\n\nexport default new NotFoundRoute()\n","import React, { ReactNode } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport FeedRoute from '../FeedRoute/FeedRoute'\nimport AbstractRouteConfig from '../util/AbstractRouteConfig'\n\nclass RootRoute extends AbstractRouteConfig {\n  protected URL: string = '/'\n  public use(): ReactNode {\n    return (\n      <Redirect from={this.URL} to={FeedRoute.makeURL({ feed: 'top' })} exact />\n    )\n  }\n}\n\nexport default new RootRoute()\n","import React, { Component } from 'react'\nimport { Switch } from 'react-router-dom'\nimport Header from '../Header/Header'\nimport Root from '../Root/Root'\nimport FeedRoute from '../routes/FeedRoute/FeedRoute'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport NotFoundRoute from '../routes/NotFoundRoute/NotFoundRoute'\nimport RootRoute from '../routes/RootRoute/RootRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\n\nclass App extends Component {\n  public render(): JSX.Element {\n    return (\n      <Root>\n        <Header />\n        <main>\n          <Switch>\n            {RootRoute.use()}\n            {FeedRoute.use()}\n            {ItemRoute.use()}\n            {UserRoute.use()}\n            {NotFoundRoute.use()}\n          </Switch>\n        </main>\n      </Root>\n    )\n  }\n}\n\nexport default App\n","import 'typeface-roboto'\n\nimport React from 'react'\nimport reactDom from 'react-dom'\n\nimport App from './App/App'\n\n// import { register } from './serviceWorker/serviceWorker'\n// register()\n\nreactDom.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}