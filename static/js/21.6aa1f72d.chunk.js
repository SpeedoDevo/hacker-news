(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{3801:function(t,e,n){"use strict";n.r(e);var r=n(3),i=n(4),s=n(6),a=n(5),o=n(7),c=n(28),u=n(17),p=n(21),l=n(0),m=n.n(l),b=n(42),h=n(3813),f=n(61),d=n(3750),y=n(275),_=n(3746),v=n(3810),O=n(3808),j=n(3747),g=n(3748),k=n(3809),w=n(18),E=n(161);function P(t){return new f.a(function(e){return Object(E.i)(t,function(t){e.next(t.val())})})}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return t.pipe(Object(_.a)(function(t){return t?t.map(function(t){return function(t){return P("item/".concat(t))}(t)}):[]}),Object(_.a)(function(t){return{length:t.length,item$$:Object(d.a)(t)}}),Object(v.a)(function(t){var r=t.length,i=t.item$$,s=Math.round,a=Math.sqrt,o=Object(w.f)(s(a(r)),1,n),c=0;return i.pipe(Object(v.a)(function(t){return t?t.pipe(Object(O.a)()):y.a},o),Object(j.a)(function(t,n){return c=n,!!t&&e(t)}),Object(g.a)(n),Object(k.a)(),Object(_.a)(function(t){return{items:t,left:r-c-1}}))}))}var A,C,D,$=n(163),x=n(282),M=n(3782),U=(A=Object(p.Bind)(),C=Object(p.Bind)(),D=function(t){function e(){var t,n;Object(r.a)(this,e);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(a.a)(e)).call.apply(t,[this].concat(o)))).state={items:[],left:0,loading:!0},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this._subscribe()}},{key:"componentDidUpdate",value:function(t){var e=this.props.id!==t.id||this.props.filter!==t.filter;(e||this.props.amount!==t.amount)&&(this._unsubscribe(),this._subscribe(),this.setState({loading:!0})),e&&this.setState({items:[],left:0})}},{key:"componentWillUnmount",value:function(){this._unsubscribe()}},{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,this._renderEmptyPlaceholder(),"comments"===this.props.filter?this._renderComments():this._renderSubmissions(),this.state.loading?m.a.createElement(u.m,null):null,this._renderPager())}},{key:"_renderEmptyPlaceholder",value:function(){var t=this.state,e=t.loading,n=t.items,r=this.props,i=r.t,s=r.filter;return e||n.length?null:m.a.createElement($.a,{message:i("empty",{context:s})})}},{key:"_renderComments",value:function(){return this.state.items.map(function(t){return m.a.createElement(x.a,{item:t,expanded:!0,key:t.id})})}},{key:"_renderSubmissions",value:function(){return this.state.items.map(function(t){return m.a.createElement(x.a,{item:t,key:t.id})})}},{key:"_renderPager",value:function(){return this.state.left?m.a.createElement(u.k,{container:!0,spacing:8,justify:"center"},m.a.createElement(u.k,{item:!0},m.a.createElement(u.b,{onClick:this._more},this.props.t("more")))):null}},{key:"_more",value:function(){var t=this.props,e=t.id,n=t.filter;this.props.history.push(M.a.makeURL({filter:n,id:e,amount:this._getAmount()+30}))}},{key:"_getAmount",value:function(){return this.props.amount||30}},{key:"_predicate",value:function(t){var e=t.dead,n=t.deleted,r=t.type,i=t.by;if(e||n||!i)return!1;switch(this.props.filter){case"comments":return"comment"===r;case"submissions":return"comment"!==r&&"pollopt"!==r}}},{key:"_subscribe",value:function(){var t,e=this;this._subscription=S((t=this.props.id,P("user/".concat(t,"/submitted"))),this._predicate,this._getAmount()).subscribe(function(t){var n=t.items,r=t.left;e.setState({items:n,left:r,loading:!1})})}},{key:"_unsubscribe",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),e}(l.Component),Object(c.a)(D.prototype,"_more",[A],Object.getOwnPropertyDescriptor(D.prototype,"_more"),D.prototype),Object(c.a)(D.prototype,"_predicate",[C],Object.getOwnPropertyDescriptor(D.prototype,"_predicate"),D.prototype),D);e.default=Object(b.c)("Submissions")(Object(h.a)(U))}}]);
//# sourceMappingURL=21.6aa1f72d.chunk.js.map