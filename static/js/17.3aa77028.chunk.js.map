{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js","Paginated/Paginated.tsx","HeadlineList/HeadlineList.tsx"],"names":["_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","Object","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","value","call","undefined","__webpack_require__","d","__webpack_exports__","Paginated","state","paginated","_this$props","this","props","data","children","pageSize","Math","floor","length","nextProps","_ref2","nextPaginated","_ref","page","begin","paginate","arrayEquals","Component","ButtonLinkTo","to","react_default","a","createElement","Link","assign","HeadlineList","Bind","WithUpdates","from","_getFeedReader","_paginated","_data","src_Paginated_Paginated","_getPage","_renderList","items","numberOfPages","classes","t","DocumentTitle","_getFeed","index_es","container","justify","item","component","className","list","map","id","card","Headline","_renderPager","_this$props2","direction","alignContent","disabled","FeedRoute","makeURL","feed","clamp","pager","getTopStories","getNewStories","getBestStories","getAskStories","getShowStories","getJobStories","withNamespaces","withStyles","theme","padding","margin","maxWidth","mixins","appMaxWidth","flexGrow","spacing","unit","display","alignItems","concat"],"mappings":"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","file":"static/js/17.3aa77028.chunk.js","sourcesContent":["export default function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}","import { Component, ReactNode } from 'react'\nimport { Optional } from '../types'\nimport { arrayEquals } from '../util'\n\ninterface PaginatedProps<T = unknown> {\n  data: T[]\n  page: number\n  pageSize: number\n  children: (paginated: T[], numberOfPages: number) => ReactNode\n}\n\ninterface PaginatedState<T = unknown> {\n  paginated: T[]\n}\n\nfunction paginate<T = unknown>({\n  data,\n  page,\n  pageSize,\n}: PaginatedProps<T>): T[] {\n  const begin: number = page * pageSize\n  return data.slice(begin, begin + pageSize)\n}\n\nclass Paginated<T = unknown> extends Component<\n  PaginatedProps<T>,\n  PaginatedState<T>\n> {\n  public static getDerivedStateFromProps<T = unknown>(\n    nextProps: PaginatedProps<T>,\n    { paginated }: PaginatedState<T>,\n  ): Optional<Partial<PaginatedState<T>>> {\n    const nextPaginated: T[] = paginate(nextProps)\n\n    return arrayEquals(paginated, nextPaginated)\n      ? null\n      : { paginated: nextPaginated }\n  }\n\n  public state: PaginatedState<T> = { paginated: [] }\n\n  public render(): ReactNode {\n    const { data, children, pageSize }: this['props'] = this.props\n\n    return children(\n      this.state.paginated,\n      Math.floor(((data.length || 1) - 1) / pageSize),\n    )\n  }\n}\n\nexport default Paginated\n","import { Button, Card, Grid, Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactElement, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport {\n  getAskStories,\n  getBestStories,\n  getJobStories,\n  getNewStories,\n  getShowStories,\n  getTopStories,\n} from '../api'\nimport { FeedReader, ItemId, Items } from '../api/types'\nimport DocumentTitle from '../DocumentTitle/DocumentTitle'\nimport Headline from '../Headline/Headline'\nimport Paginated from '../Paginated/Paginated'\nimport FeedRoute, { MainFeed } from '../routes/FeedRoute/FeedRoute'\nimport { Optional } from '../types'\nimport { clamp } from '../util'\nimport WithUpdates from '../WithUpdates/WithUpdates'\n\ninterface HeadlineListProps {\n  page?: number\n  feed?: MainFeed\n}\n\nconst PAGE_SIZE: number = 30\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  list: {\n    padding: 0,\n    margin: 0,\n    maxWidth: theme.mixins.appMaxWidth,\n    flexGrow: 1,\n  },\n  card: {\n    padding: theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  pager: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: `0 ${theme.spacing.unit}px`,\n  },\n})\n\nfunction ButtonLinkTo(to: string): ComponentType {\n  return function LinkTo(props: {}): ReactElement<{}> {\n    return <Link to={to} {...props} />\n  }\n}\n\nclass HeadlineList extends Component<\n  HeadlineListProps & WithStyles & WithNamespaces\n> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._getFeedReader()}>{this._paginated}</WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _paginated(_data?: Optional<Items>): ReactNode {\n    const data: Items = _data || []\n    return (\n      <Paginated data={data} page={this._getPage()} pageSize={PAGE_SIZE}>\n        {this._renderList}\n      </Paginated>\n    )\n  }\n\n  @Bind()\n  private _renderList(items: Items, numberOfPages: number): ReactNode {\n    const { classes, t }: this['props'] = this.props\n\n    return (\n      <article>\n        <DocumentTitle>\n          {t('title', { context: this._getFeed() })}\n        </DocumentTitle>\n        <Grid container justify=\"center\">\n          <Grid item component=\"ul\" className={classes.list}>\n            {items.map(\n              (id: ItemId): ReactNode => (\n                <Card component=\"li\" className={classes.card} key={id}>\n                  <Headline id={id} />\n                </Card>\n              ),\n            )}\n            {this._renderPager(numberOfPages)}\n          </Grid>\n        </Grid>\n      </article>\n    )\n  }\n\n  private _renderPager(numberOfPages: number): ReactNode {\n    const { classes, t }: this['props'] = this.props\n\n    return numberOfPages ? (\n      <Grid\n        item\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignContent=\"center\"\n      >\n        <Grid item>\n          <Button\n            disabled={this._getPage() <= 0}\n            component={ButtonLinkTo(\n              FeedRoute.makeURL({\n                feed: this._getFeed(),\n                page: clamp(this._getPage() - 1, 0, numberOfPages),\n              }),\n            )}\n          >\n            {t('previous')}\n          </Button>\n        </Grid>\n        <Grid item className={classes.pager}>\n          <Typography>\n            {this._getPage()}\n            {' / '}\n            {numberOfPages}\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Button\n            disabled={this._getPage() >= numberOfPages}\n            component={ButtonLinkTo(\n              FeedRoute.makeURL({\n                feed: this._getFeed(),\n                page: clamp(this._getPage() + 1, 0, numberOfPages),\n              }),\n            )}\n          >\n            {t('next')}\n          </Button>\n        </Grid>\n      </Grid>\n    ) : null\n  }\n\n  private _getPage(): number {\n    return this.props.page || 0\n  }\n\n  private _getFeed(): MainFeed {\n    return this.props.feed || 'top'\n  }\n\n  private _getFeedReader(): FeedReader {\n    const feed: MainFeed = this._getFeed()\n\n    switch (feed) {\n      case 'top':\n        return getTopStories\n      case 'new':\n        return getNewStories\n      case 'best':\n        return getBestStories\n      case 'ask':\n        return getAskStories\n      case 'show':\n        return getShowStories\n      case 'job':\n        return getJobStories\n    }\n  }\n}\n\nexport default withNamespaces('HeadlineList')(withStyles(styles)(HeadlineList))\n"],"sourceRoot":""}