{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js","Comment/Comment.tsx","Thread/Thread.tsx"],"names":["_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","Object","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","value","call","undefined","__webpack_require__","d","__webpack_exports__","Comment","Bind","Memoize","react_default","a","createElement","WithUpdates","from","this","_subscribe","props","id","_renderComment","comment","_this","by","text","time","dead","deleted","_this$props","classes","storage","t","nodeId","concat","WithToggle","initial","get","onChange","_onToggle","collapsed","toggle","index_es","container","className","root","component","item","barContainer","bar","onClick","aria-label","aria-controls","aria-expanded","content","aria-hidden","variant","color","inline","Link","href","UserRoute","makeURL","ItemRoute","Time","distance","toConsumableArray","expandButton","disableRipple","Fragment","ContentHtml","_renderKids","kids","map","kid","Self","_this$props2","set","delete","subscriber","getItem","Component","withStorage","SESSION","withNamespaces","withStyles","theme","& + &, & &","marginTop","spacing","unit","display","background","border","font","lineHeight","overflow","padding","outline","WebkitUserSelect","MozUserSelect","msUserSelect","&::-moz-focus-inner","width","height","minWidth","minHeight","boxShadow","shadows","cursor","borderLeft","grey","&:hover, &:focus, &:active","borderLeftColor","flex","marginRight","maxWidth","esm_objectSpread","typography","caption","marginLeft","palette","secondary","fontWeight","fontWeightMedium","textDecoration","Thread","justify","direction","_renderItem","_empty","DocumentTitle","objectSpread","type","Headline","expanded","_renderComments","EmptyPlaceHolder","message","data","spacer","src_Comment_Comment","mixins","appMaxWidth","margin"],"mappings":"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","file":"static/js/18.4355aed8.chunk.js","sourcesContent":["export default function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}","import { Button, Grid, Typography } from '@material-ui/core'\nimport { grey } from '@material-ui/core/colors'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { getItem } from '../api'\nimport {\n  Comment as CommentType,\n  ItemId,\n  Subscriber,\n  Unsubscriber,\n} from '../api/types'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport {\n  SESSION,\n  withStorage,\n  WithStorage,\n} from '../Root/StorageProvider/StorageProvider'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\nimport Time from '../Time/Time'\nimport { Optional } from '../types'\nimport WithToggle from '../WithToggle/WithToggle'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface CommentProps {\n  id: ItemId\n}\n\ntype CommentStorage = Record<ItemId, true>\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  root: {\n    '& + &, & &': {\n      marginTop: theme.spacing.unit,\n    },\n  },\n  inline: {\n    display: 'inline-block',\n  },\n  bar: {\n    // reset\n    background: 'none',\n    border: 0,\n    color: 'inherit',\n    font: 'inherit',\n    lineHeight: 'normal',\n    overflow: 'visible',\n    padding: 0,\n    outline: 'none',\n    WebkitUserSelect: 'none',\n    MozUserSelect: 'none',\n    msUserSelect: 'none',\n    '&::-moz-focus-inner': {\n      border: 0,\n      padding: 0,\n    },\n    // end reset\n    width: '100%',\n    height: '100%',\n    minWidth: 0,\n    minHeight: 0,\n    boxShadow: theme.shadows[0],\n    cursor: 'pointer',\n    borderLeft: `${theme.spacing.unit / 4}px solid ${grey[400]}`,\n    '&:hover, &:focus, &:active': {\n      borderLeftColor: grey[600],\n    },\n  },\n  barContainer: {\n    flex: `0 0 ${theme.spacing.unit * 1.5}px`,\n    marginRight: theme.spacing.unit * 0.25,\n  },\n  content: {\n    flex: `1 0 0`,\n    maxWidth: `calc(100% - ${theme.spacing.unit * (1.5 + 0.25)}px)`,\n  },\n  expandButton: {\n    ...theme.typography.caption,\n    padding: 0,\n    minWidth: 0,\n    minHeight: 0,\n    marginLeft: theme.spacing.unit,\n    color: theme.palette.text.secondary,\n    '&:hover, &:focus, &:active': {\n      fontWeight: theme.typography.fontWeightMedium,\n      textDecoration: 'underline',\n    },\n  },\n})\n\nclass Comment extends Component<\n  CommentProps & WithStyles & WithStorage<CommentStorage> & WithNamespaces\n> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._subscribe(this.props.id)}>\n        {this._renderComment}\n      </WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _renderComment(comment?: Optional<CommentType>): ReactNode {\n    if (!comment) return null\n    const { by, text, time, dead, deleted }: CommentType = comment\n    if (dead || deleted) return null\n    const { classes, storage, id, t }: this['props'] = this.props\n    const nodeId: string = `comment-${id}`\n\n    return (\n      <WithToggle initial={!!storage.get(id)} onChange={this._onToggle}>\n        {(collapsed: boolean, toggle: () => void): ReactNode => (\n          <Grid container className={classes.root} component=\"section\">\n            <Grid item className={classes.barContainer}>\n              <button\n                className={classes.bar}\n                onClick={toggle}\n                aria-label={t('collapse')}\n                aria-controls={nodeId}\n                aria-expanded={!collapsed}\n              />\n            </Grid>\n            <Grid\n              item\n              className={classes.content}\n              id={nodeId}\n              aria-hidden={collapsed}\n            >\n              <Typography\n                variant=\"caption\"\n                color=\"textSecondary\"\n                className={classes.inline}\n                component=\"aside\"\n              >\n                {[\n                  <Link\n                    key=\"user\"\n                    href={UserRoute.makeURL({ id: by })}\n                    className={classes.inline}\n                  >\n                    {by}\n                  </Link>,\n                  ' ',\n                  <Link\n                    key=\"time\"\n                    href={ItemRoute.makeURL({ id })}\n                    className={classes.inline}\n                  >\n                    <Time distance={time} />\n                  </Link>,\n                  ...(collapsed\n                    ? [\n                        ' ',\n                        <Button\n                          key=\"expand\"\n                          className={classes.expandButton}\n                          onClick={toggle}\n                          aria-label={t('expand')}\n                          disableRipple\n                        >\n                          [+]\n                        </Button>,\n                      ]\n                    : []),\n                ]}\n              </Typography>\n              {collapsed ? null : (\n                <>\n                  <ContentHtml>{text}</ContentHtml>\n                  {this._renderKids(comment)}\n                </>\n              )}\n            </Grid>\n          </Grid>\n        )}\n      </WithToggle>\n    )\n  }\n\n  private _renderKids(comment: CommentType): ReactNode {\n    return comment.kids\n      ? comment.kids.map((kid: ItemId) => <Self key={kid} id={kid} />)\n      : null\n  }\n\n  @Bind()\n  private _onToggle(collapsed: boolean): void {\n    const { storage, id }: this['props'] = this.props\n\n    if (collapsed) {\n      storage.set(id, true)\n    } else {\n      storage.delete(id)\n    }\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<CommentType> {\n    return (subscriber: Subscriber<CommentType>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n}\n\nconst Self: ComponentType<CommentProps> = withStorage('comment', SESSION)(\n  withNamespaces('Comment')(withStyles(styles)(Comment)),\n)\nexport default Self\n","import { Grid } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport { getItem } from '../api'\nimport { Item, ItemId, Subscriber, Unsubscriber } from '../api/types'\nimport Comment from '../Comment/Comment'\nimport DocumentTitle from '../DocumentTitle/DocumentTitle'\nimport EmptyPlaceHolder from '../EmptyPlaceholder/EmptyPlaceHolder'\nimport Headline from '../Headline/Headline'\nimport { Optional } from '../types'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\nexport interface ThreadProps {\n  id: ItemId\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  container: {\n    maxWidth: theme.mixins.appMaxWidth,\n    padding: theme.spacing.unit,\n  },\n  spacer: {\n    margin: theme.spacing.unit,\n  },\n})\n\nclass Thread extends Component<ThreadProps & WithStyles & WithNamespaces> {\n  public render(): ReactNode {\n    const { classes, id }: this['props'] = this.props\n\n    return (\n      <Grid container justify=\"center\">\n        <Grid\n          item\n          container\n          direction=\"column\"\n          className={classes.container}\n          component=\"article\"\n        >\n          <WithUpdates from={this._subscribe(id)}>\n            {this._renderItem}\n          </WithUpdates>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  @Bind()\n  private _renderItem(item?: Optional<Item>): ReactNode {\n    if (item === undefined) return null\n    if (item === null) return this._empty()\n\n    return (\n      <>\n        <DocumentTitle>\n          {this.props.t('title', { context: item.type, ...item })}\n        </DocumentTitle>\n        <Headline item={item} expanded />\n        {this._renderComments(item)}\n      </>\n    )\n  }\n\n  private _empty(): ReactNode {\n    return <EmptyPlaceHolder message={this.props.t('empty')} />\n  }\n\n  private _renderComments(data: Item): ReactNode {\n    if ('kids' in data) {\n      return (\n        <>\n          <span className={this.props.classes.spacer} />\n          {data.kids.map((kid: ItemId) => (\n            <Comment id={kid} key={kid} />\n          ))}\n        </>\n      )\n    }\n\n    return null\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<Item> {\n    return (subscriber: Subscriber<Item>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n}\n\nexport default withNamespaces('Thread')(withStyles(styles)(Thread))\n"],"sourceRoot":""}