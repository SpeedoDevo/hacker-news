{"version":3,"sources":["api/firebase.ts","util/interleave.ts","util/arrayEquals.ts","util/clamp.ts","util/noop.ts","util/StatefulPromise.ts","util/index.ts","api/types/index.ts","api/index.ts","Root/StorageProvider/interfaces/index.ts","i18n/locales lazy /^/.//.*/.json$/ groupOptions: {} namespace object","../node_modules/date-fns/locale lazy /^/.//.*$/ include: /(en-GB|en-US)//index.js$/ groupOptions: {} namespace object","Breakpoint/Breakpoint.tsx","Link/Link.tsx","ContentHtml/ContentHtml.tsx","Root/StorageProvider/NamespacedAbstractStorage/NamespacedAbstractStorage.ts","Root/StorageProvider/LocalStorage/LocalStorage.ts","Root/StorageProvider/SessionStorage/SessionStorage.ts","Root/StorageProvider/StorageProvider.tsx","User/Submissions/Submissions.tsx","routes/util/AbstractRouteConfig.ts","routes/util/SimpleRouteConfig.tsx","routes/UserRoute/SubmissionsRoute/SubmissionsRoute.tsx","WithUpdates/WithUpdates.tsx","User/User.tsx","routes/UserRoute/UserRoute.tsx","Time/Time.tsx","WithToggle/WithToggle.tsx","Comment/Comment.tsx","Thread/Thread.tsx","routes/ItemRoute/ItemRoute.tsx","Headline/Headline.tsx","Paginated/Paginated.tsx","HeadlineList/HeadlineList.tsx","routes/FeedRoute/FeedRoute.tsx","Async/Pending.tsx","Async/Rejected.tsx","Async/Resolved.tsx","Async/Async.tsx","FullPage/FullPage.tsx","ErrorPage/ErrorPage.tsx","LoadingPage/LoadingPage.tsx","Root/LanguageProvider/LanguageProvider.tsx","i18n/index.ts","Root/ThemeProvider/ThemeProvider.tsx","Header/Settings/OptionList/OptionList.tsx","Header/Settings/Settings.tsx","Header/Header.tsx","Root/Root.tsx","routes/NotFoundRoute/NotFoundRoute.tsx","routes/RootRoute/RootRoute.tsx","App/App.tsx","index.tsx","api/rx.ts"],"names":["__webpack_require__","d","__webpack_exports__","withUnsubscriber","getItem","getUser","getTopStories","getNewStories","getBestStories","getAskStories","getShowStories","getJobStories","_firebase_app__WEBPACK_IMPORTED_MODULE_0__","_firebase_app__WEBPACK_IMPORTED_MODULE_0___default","n","mem__WEBPACK_IMPORTED_MODULE_2__","mem__WEBPACK_IMPORTED_MODULE_2___default","authDomain","concat","databaseURL","api","app","initializeApp","projectId","database","ref","path","cb","child","off","on","snap","whenExists","id","getFeed","mem","interleave","array","insert","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","push","err","return","pop","arrayEquals","left","right","length","every","v","i","clamp","low","arguments","high","Infinity","noop","StatefulPromiseState","PENDING","REJECTED","RESOLVED","StatefulPromise","_this","this","Object","classCallCheck","state","then","catch","StatefulPromise_StatefulPromise","_firebase__WEBPACK_IMPORTED_MODULE_0__","o","map","./en/Comment.json","./en/Header.json","./en/Headline.json","./en/HeadlineList.json","./en/Settings.json","./en/Submissions.json","./en/User.json","./en/shared.json","webpackAsyncContext","req","ids","e","t","Promise","resolve","Error","code","keys","module","exports","./en-GB","./en-GB/","./en-GB/index","./en-GB/index.js","./en-US","./en-US/","./en-US/index","./en-US/index.js","Up","_ref","children","react_default","a","createElement","Fragment","Down","_ref2","Breakpoint","up","isWidthUp","props","at","width","render","Children","forEach","_dieInvalidChild","type","Component","assign","withWidth","withHref","href","external","other","objectWithoutProperties","NavLink","to","activeClassName","Link","_withHref","_this$props","classes","className","_this$props$external","_this$props$color","color","_this$props$variant","variant","index_es","classnames","link","component","withStyles","_theme","textDecoration","&:hover, &:focus, &:active","outline","ContentHtml","content","dangerouslySetInnerHTML","__html","theme","objectSpread","typography","body2","margin","overflow","wordBreak","& *","& p","marginTop","spacing","unit","maxWidth","& pre, & code","fontFamily","& a","palette","default","display","whiteSpace","textOverflow","verticalAlign","&:hover, &:focus","&:focus, &:active, &:visited","active","NamespacedAbstractStorage","_namespace","_cache","_decode","key","otherwise","_encode","JSON","parse","storage","setItem","stringify","LocalStorage","window","localStorage","create","namespace","SessionStorage","sessionStorage","StorageType","LOCAL","SESSION","StorageContext","createContext","getStore","withStorage","Cmp","Consumer","context","StorageProvider","Bind","Provider","_getStore","Submissions","items","loading","_subscribe","prevProps","reload","filter","amount","_unsubscribe","setState","_renderEmptyPlaceholder","_renderComments","_renderSubmissions","_renderPager","_this$state","container","alignItems","direction","aria-label","src_Headline_Headline","expanded","justify","onClick","_more","history","SubmissionsRoute","makeURL","_getAmount","dead","deleted","by","_this2","_subscription","filterFeed$","getUserSubmissions$","_predicate","subscribe","unsubscribe","withNamespaces","withRouter","AbstractRouteConfig","Memoize","params","_compileURL","URL","fn","compile","SimpleRouteConfig","Route","_translateParams","match","translateParams","filters","UserRoute_SubmissionsRoute_SubmissionsRoute","join","User_Submissions_Submissions","Number","WithUpdates","from","data","_unsubscriber","val","User","src_WithUpdates_WithUpdates","_renderUser","user","created","karma","about","usernameCaption","username","aria-labelledby","createdCaption","date","mdi_material_ui_index_es","fontSize","aboutCaption","src_ContentHtml_ContentHtml","links","src_Link_Link","submissions","use","subscriber","defineProperty","mixins","appMaxWidth","padding","gridTemplateAreas","gridTemplateColumns","gridGap","justifyItems","breakpoints","down","gridArea","&.isActive::before","justifySelf","routes_UserRoute_UserRoute","src_User_User","Time","distance","dateTime","Date","toISOString","time","Toggle","possibleConstructorReturn","getPrototypeOf","call","initial","_toggle","onChange","Comment","_renderComment","comment","text","nodeId","WithToggle","get","_onToggle","collapsed","toggle","root","barContainer","bar","aria-controls","aria-expanded","aria-hidden","inline","UserRoute","ItemRoute","src_Time_Time","toConsumableArray","expandButton","disableRipple","_renderKids","kids","kid","Self","_this$props2","set","delete","& + &, & &","background","border","font","lineHeight","WebkitUserSelect","MozUserSelect","msUserSelect","&::-moz-focus-inner","height","minWidth","minHeight","boxShadow","shadows","cursor","borderLeft","grey","borderLeftColor","flex","marginRight","caption","marginLeft","secondary","fontWeight","fontWeightMedium","Thread","_renderItem","spacer","src_Comment_Comment","routes_ItemRoute_ItemRoute","src_Thread_Thread","Headline","_item","_empty","_caption","_core","_pollOption","_comment","_headerToUrlOrComments","_deriveCaption","_maybeText","_maybePollOptions","score","poll","count","_captionLink","parent","title","url","_header","descendants","spaced","expandedText","_this$props3","pollOptions","parts","part","Headline_Self","paddingLeft","Paginated","paginated","pageSize","Math","floor","nextProps","nextPaginated","page","begin","slice","paginate","ButtonLinkTo","es_Link","HeadlineList","_getFeedReader","_paginated","src_Paginated_Paginated","_getPage","_renderList","numberOfPages","list","card","alignContent","disabled","FeedRoute","feed","_getFeed","pager","flexGrow","feeds","routes_FeedRoute_FeedRoute","src_HeadlineList_HeadlineList","Pending","Rejected","error","Resolved","Async","promise","result","stateToChild","_getStateToChild","element","cloneElement","_this3","_emptyStateToChild","FullPage","ErrorPage","src_FullPage_FullPage","icon","h1","LoadingPage","size","DEFAULT_LANGUAGE","LanguageContext","React","selectedLanguage","setLanguage","LanguageProvider","Once","language","src_Async_Async","_i18n","src_LoadingPage_LoadingPage","i18next","es","i18n","_getLanguageContext","src_ErrorPage_ErrorPage","changeLanguage","initLanguage","currentLocale","reject","read","callback","init","debug","lng","fallbackLng","defaultNS","ns","interpolation","escapeValue","formatSeparator","format","formatDistance","addSuffix","locale","formatDate","react","wait","setup","DEFAULT_THEME","ThemeContext","selectedTheme","setTheme","ThemeProvider","core_styles","_createMuiTheme","_setTheme","createMuiTheme","toolbarMaxWidth","indigo","A700","A100","useNextVariants","OptionList","optionTranslations","onSelected","isSelected","options","subheader","option","button","checked","tabIndex","withSettingsNamespace","LanguageSettings","languages","returnObjects","ThemeSettings","themes","ResponsiveDialog","withMobileDialog","Dialog","Settings","aria-haspopup","open","onClose","dialogContent","Header","toolbar","src_Breakpoint_Breakpoint","home","feedList","feedLink","feedLinkText","homeButton","anchor","drawer","Header_Settings_Settings","contentShift","alignSelf","fontWeightLight","textTransform","Root","Root_StorageProvider_StorageProvider","HashRouter","Root_ThemeProvider_ThemeProvider","Root_LanguageProvider_LanguageProvider","routes_NotFoundRoute_NotFoundRoute","routes_RootRoute_RootRoute","Redirect","exact","App","src_Root_Root","src_Header_Header","Switch","RootRoute","NotFoundRoute","reactDom","src_App_App","document","getElementById","rxjs__WEBPACK_IMPORTED_MODULE_0__","rxjs__WEBPACK_IMPORTED_MODULE_1__","rxjs_operators__WEBPACK_IMPORTED_MODULE_2__","rxjs_operators__WEBPACK_IMPORTED_MODULE_3__","rxjs_operators__WEBPACK_IMPORTED_MODULE_4__","rxjs_operators__WEBPACK_IMPORTED_MODULE_5__","rxjs_operators__WEBPACK_IMPORTED_MODULE_6__","rxjs_operators__WEBPACK_IMPORTED_MODULE_7__","_util__WEBPACK_IMPORTED_MODULE_8__","_firebase__WEBPACK_IMPORTED_MODULE_9__","getApi$","Observable","feed$","predicate","limit","pipe","getItem$","item$s","item$$","flatMap","round","sqrt","parallel","lastFiltered","item$","first","index","take","toArray"],"mappings":"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","file":"static/js/main.349c2c23.chunk.js","sourcesContent":["import app from '@firebase/app'\nimport { FirebaseApp } from '@firebase/app-types'\nimport '@firebase/database'\nimport {\n  DataSnapshot,\n  FirebaseDatabase,\n  Reference,\n} from '@firebase/database-types'\nimport mem from 'mem'\nimport { Feed, FeedId, Item, ItemId, User, UserId } from './types'\n\nconst projectId: string = 'hacker-news'\nconst authDomain: string = `${projectId}.firebaseio.com`\nconst databaseURL: string = `https://${authDomain}`\n\nconst firebase: Required<FirebaseApp> = app.initializeApp({\n  authDomain,\n  databaseURL,\n  projectId,\n}) as Required<FirebaseApp>\n\nconst database: FirebaseDatabase = firebase.database()\nconst api: Reference = database.ref('v0')\n\nexport interface Snapshot<T = unknown> extends DataSnapshot {\n  val(): T\n}\nexport type Subscriber<T = unknown> = (snap: Snapshot<T>) => void\nexport type Unsubscriber = () => void\n\nfunction whenExists<T>(cb: Subscriber<T>): (snap: Snapshot<T> | null) => void {\n  return (snap: Snapshot<T> | null): void => {\n    if (snap) cb(snap)\n  }\n}\n\nexport function withUnsubscriber<T>(\n  path: string,\n  cb: Subscriber<T>,\n): Unsubscriber {\n  const ref: Reference = api.child(path)\n  const off: ReturnType<Reference['off']> = ref.on('value', whenExists(cb))\n  return (): void => {\n    ref.off('value', off)\n  }\n}\n\nexport function getItem<T extends Item>(\n  id: ItemId,\n  cb: Subscriber<T>,\n): Unsubscriber {\n  return withUnsubscriber(`item/${id}`, cb)\n}\n\nexport function getUser(id: UserId, cb: Subscriber<User>): Unsubscriber {\n  return withUnsubscriber(`user/${id}`, cb)\n}\n\nexport type FeedReader = (cb: Subscriber<Feed>) => Unsubscriber\n\nconst getFeed: (id: FeedId) => FeedReader = mem(\n  (id: FeedId): FeedReader => (cb: Subscriber<Feed>): Unsubscriber =>\n    withUnsubscriber(id, cb),\n)\n\nexport const getTopStories: FeedReader = getFeed('topstories')\nexport const getNewStories: FeedReader = getFeed('newstories')\nexport const getBestStories: FeedReader = getFeed('beststories')\nexport const getAskStories: FeedReader = getFeed('askstories')\nexport const getShowStories: FeedReader = getFeed('showstories')\nexport const getJobStories: FeedReader = getFeed('jobstories')\n\nexport * from './types'\n","export function interleave<T = unknown, U = unknown>(\n  array: T[],\n  insert: U,\n): Array<T | U> {\n  const res: Array<T | U> = []\n  for (const item of array) {\n    res.push(item, insert)\n  }\n  res.pop()\n  return res\n}\n","export function arrayEquals<T>(left: T[], right: T[]): boolean {\n  return (\n    left.length === right.length &&\n    left.every((v: T, i: number): boolean => v === right[i])\n  )\n}\n","export function clamp(\n  n: number,\n  low: number = 0,\n  high: number = Infinity,\n): number {\n  if (n < low) {\n    return low\n  }\n\n  if (n > high) {\n    return high\n  }\n\n  return n\n}\n","// tslint:disable-next-line no-any\nexport function noop(...args: any[]): void {\n  // noop\n}\n","export enum StatefulPromiseState {\n  PENDING,\n  RESOLVED,\n  REJECTED,\n}\n\nexport const {\n  PENDING,\n  REJECTED,\n  RESOLVED,\n}: typeof StatefulPromiseState = StatefulPromiseState\n\nexport class StatefulPromise<T> {\n  public state: StatefulPromiseState = StatefulPromiseState.PENDING\n  constructor(public value: Promise<T>) {\n    value\n      .then(() => {\n        this.state = StatefulPromiseState.RESOLVED\n      })\n      .catch(() => {\n        this.state = StatefulPromiseState.REJECTED\n      })\n  }\n}\n","export * from './arrayEquals'\nexport * from './clamp'\nexport * from './interleave'\nexport * from './noop'\nexport * from './StatefulPromise'\n","export * from './Feed'\nexport * from './Item'\nexport * from './primitives'\nexport * from './User'\n","export * from './firebase'\nexport * from './rx'\n","export * from './Storage'\n","var map = {\n\t\"./en/Comment.json\": [\n\t\t3780,\n\t\t3\n\t],\n\t\"./en/Header.json\": [\n\t\t3781,\n\t\t4\n\t],\n\t\"./en/Headline.json\": [\n\t\t3782,\n\t\t5\n\t],\n\t\"./en/HeadlineList.json\": [\n\t\t3783,\n\t\t6\n\t],\n\t\"./en/Settings.json\": [\n\t\t3784,\n\t\t7\n\t],\n\t\"./en/Submissions.json\": [\n\t\t3785,\n\t\t8\n\t],\n\t\"./en/User.json\": [\n\t\t3786,\n\t\t9\n\t],\n\t\"./en/shared.json\": [\n\t\t3787,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3775;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./en-GB\": [\n\t\t137,\n\t\t0\n\t],\n\t\"./en-GB/\": [\n\t\t137,\n\t\t0\n\t],\n\t\"./en-GB/index\": [\n\t\t137,\n\t\t0\n\t],\n\t\"./en-GB/index.js\": [\n\t\t137,\n\t\t0\n\t],\n\t\"./en-US\": [\n\t\t138,\n\t\t1\n\t],\n\t\"./en-US/\": [\n\t\t138,\n\t\t1\n\t],\n\t\"./en-US/index\": [\n\t\t138,\n\t\t1\n\t],\n\t\"./en-US/index.js\": [\n\t\t138,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3776;\nmodule.exports = webpackAsyncContext;","import { Breakpoint as BreakpointId } from '@material-ui/core/styles/createBreakpoints'\nimport withWidth, { isWidthUp, WithWidth } from '@material-ui/core/withWidth'\nimport React, {\n  Children,\n  Component,\n  ComponentClass,\n  ComponentType,\n  Fragment,\n  ReactChild,\n  ReactElement,\n  ReactNode,\n} from 'react'\n\ninterface BreakpointProps {\n  at: BreakpointId\n}\n\ninterface JustChildren {\n  children: ReactNode\n}\nconst Up: ComponentType<JustChildren> = ({\n  children,\n}: JustChildren): ReactElement<{}> => <>{children}</>\nconst Down: ComponentType<JustChildren> = ({\n  children,\n}: JustChildren): ReactElement<{}> => <>{children}</>\n\nclass Breakpoint extends Component<BreakpointProps & WithWidth> {\n  public render(): ReactNode {\n    const up: boolean = isWidthUp(this.props.at, this.props.width)\n    let render: ReactNode = null\n    Children.forEach(\n      this.props.children,\n      (child: ReactChild): void => {\n        if (typeof child !== 'object') return this._dieInvalidChild()\n\n        switch (child.type) {\n          case Up:\n            if (up) {\n              render = render || child\n            }\n            break\n          case Down:\n            if (!up) {\n              render = render || child\n            }\n            break\n          default:\n            this._dieInvalidChild()\n        }\n      },\n    )\n\n    return render\n  }\n  private _dieInvalidChild(): void {\n    throw new Error('use only Breakpoint.* components as a child to Breakpoint')\n  }\n}\n\nexport default Object.assign(withWidth()(Breakpoint), { Up, Down })\n","import { Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { TypographyProps } from '@material-ui/core/Typography'\nimport classnames from 'classnames'\nimport mem from 'mem'\nimport React, {\n  Component,\n  FunctionComponent,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { NavLink } from 'react-router-dom'\n\ninterface LinkProps extends TypographyProps {\n  external?: boolean\n  href: string\n  children: ReactNode\n}\n\nconst styles: StyleRulesCallback = (_theme: Theme): StyleRules => ({\n  link: {\n    textDecoration: 'none',\n    '&:hover, &:focus, &:active': {\n      textDecoration: 'underline',\n      outline: 'none',\n    },\n  },\n})\n\nfunction withHref(href: string, external: boolean): FunctionComponent {\n  return function Anchor({\n    children,\n    ...other\n  }: {\n    children?: ReactNode\n  }): ReactElement<{}> {\n    return external ? (\n      <a href={href} {...other}>\n        {children}\n      </a>\n    ) : (\n      <NavLink to={href} activeClassName=\"isActive\" {...other}>\n        {children}\n      </NavLink>\n    )\n  }\n}\n\nclass Link extends Component<LinkProps & WithStyles> {\n  private _withHref: (\n    href: string,\n    external: boolean,\n  ) => FunctionComponent = mem(withHref)\n\n  public render(): ReactNode {\n    const {\n      classes,\n      href,\n      children,\n      className,\n      external = false,\n      color = 'inherit',\n      variant = 'inherit',\n      ...other\n    }: Link['props'] = this.props\n\n    return (\n      <Typography\n        className={classnames(classes.link, className)}\n        component={this._withHref(href, external)}\n        {...{ color, variant }}\n        {...other}\n      >\n        {children}\n      </Typography>\n    )\n  }\n}\n\nexport default withStyles(styles)(Link)\n","import {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport classnames from 'classnames'\nimport React, { Component, ReactNode } from 'react'\n\ninterface ContentHtmlProps {\n  className?: string\n  children: string\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  content: {\n    ...theme.typography.body2,\n    margin: 0,\n    width: '100%',\n    overflow: 'auto',\n    wordBreak: 'break-word',\n    '& *': {\n      margin: 0,\n    },\n    '& p': {\n      ...theme.typography.body2,\n      marginTop: theme.spacing.unit / 2,\n      maxWidth: '100%',\n      overflow: 'auto',\n      wordBreak: 'break-word',\n    },\n    '& pre, & code': {\n      ...theme.typography.body2,\n      maxWidth: '100%',\n      overflow: 'auto',\n      fontFamily: 'monospace',\n    },\n    '& a': {\n      ...theme.typography.body2,\n      color: theme.palette.link.default,\n      display: 'inline-block',\n      maxWidth: '100%',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n      verticalAlign: 'top',\n      textDecoration: 'none',\n      '&:hover, &:focus': {\n        textDecoration: 'underline',\n      },\n      '&:focus, &:active, &:visited': {\n        color: theme.palette.link.active,\n        outline: 'none',\n      },\n    },\n  },\n})\n\nclass ContentHtml extends Component<ContentHtmlProps & WithStyles> {\n  public render(): ReactNode {\n    const { classes, className }: this['props'] = this.props\n\n    return (\n      <p\n        className={classnames(classes.content, className)}\n        dangerouslySetInnerHTML={{ __html: this.props.children }}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ContentHtml)\n","import { Storage as StorageInterface, StorageBase } from '../interfaces'\n\nabstract class NamespacedAbstractStorage<T extends StorageBase>\n  implements StorageInterface<T> {\n  private _cache: T\n\n  constructor(private _namespace: string) {\n    this._cache = this._decode()\n  }\n\n  public get<Key extends keyof T, Otherwise = undefined>(\n    key: Key,\n    otherwise?: Otherwise,\n  ): T[Key] | Otherwise {\n    return this._cache[key] || otherwise\n  }\n\n  public set<Key extends keyof T>(key: Key, value: T[Key]): void {\n    this._cache[key] = value\n    this._encode()\n  }\n\n  public delete<Key extends keyof T>(key: Key): void {\n    delete this._cache[key]\n    this._encode()\n  }\n\n  protected abstract get storage(): Storage\n\n  private _decode(): T {\n    return JSON.parse(this.storage.getItem(this._namespace) || '{}')\n  }\n\n  private _encode(): void {\n    this.storage.setItem(this._namespace, JSON.stringify(this._cache))\n  }\n}\n\nexport default NamespacedAbstractStorage\n","import mem from 'mem'\nimport {\n  Storage as StorageInterface,\n  StorageBase,\n  StorageFactory,\n} from '../interfaces'\nimport NamespacedAbstractStorage from '../NamespacedAbstractStorage/NamespacedAbstractStorage'\n\nclass LocalStorage<T extends StorageBase> extends NamespacedAbstractStorage<T> {\n  public static create: StorageFactory['create'] = mem<\n    StorageFactory['create']\n  >(\n    <T extends StorageBase>(namespace: string): StorageInterface<T> => {\n      return new LocalStorage(namespace)\n    },\n  )\n\n  protected get storage(): Storage {\n    if (!window.localStorage) {\n      throw new Error('no local storage')\n    }\n\n    return localStorage\n  }\n}\n\nexport default LocalStorage as StorageFactory\n","import mem from 'mem'\nimport {\n  Storage as StorageInterface,\n  StorageBase,\n  StorageFactory,\n} from '../interfaces'\nimport NamespacedAbstractStorage from '../NamespacedAbstractStorage/NamespacedAbstractStorage'\n\nclass SessionStorage<T extends StorageBase> extends NamespacedAbstractStorage<\n  T\n> {\n  public static create: StorageFactory['create'] = mem<\n    StorageFactory['create']\n  >(\n    <T extends StorageBase>(namespace: string): StorageInterface<T> => {\n      return new SessionStorage(namespace)\n    },\n  )\n\n  protected get storage(): Storage {\n    if (!window.sessionStorage) {\n      throw new Error('no session storage')\n    }\n\n    return sessionStorage\n  }\n}\n\nexport default SessionStorage as StorageFactory\n","import { Bind } from 'lodash-decorators'\nimport React, {\n  Component,\n  ComponentType,\n  Context,\n  createContext,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { noop } from '../../util'\nimport { Storage, StorageBase } from './interfaces'\nimport LocalStorage from './LocalStorage/LocalStorage'\nimport SessionStorage from './SessionStorage/SessionStorage'\n\nexport type Storage<T extends StorageBase> = Storage<T>\nexport enum StorageType {\n  LOCAL,\n  SESSION,\n}\nexport const { LOCAL, SESSION }: typeof StorageType = StorageType\n\ninterface StorageContextType {\n  getStore<T extends StorageBase>(\n    namespace: string,\n    type?: StorageType,\n  ): Storage<T>\n}\n\nconst StorageContext: Context<StorageContextType> = createContext({\n  getStore: noop,\n} as StorageContextType)\n\nexport function StorageConsumer<T>({\n  namespace,\n  type,\n  children,\n}: {\n  namespace: string\n  type?: StorageType\n  children: (storage: Storage<T>) => ReactNode\n}): ReactElement<{}> {\n  return (\n    <StorageContext.Consumer>\n      {(context: StorageContextType): ReactNode =>\n        children(context.getStore(namespace, type))\n      }\n    </StorageContext.Consumer>\n  )\n}\n\nexport interface WithStorage<T> {\n  storage: Storage<T>\n}\ntype WithoutStorage<P> = Pick<P, Exclude<keyof P, 'storage'>>\n\nexport function withStorage<T extends StorageBase>(\n  namespace: string,\n  type?: StorageType,\n): <P extends WithStorage<T>>(\n  Cmp: ComponentType<P>,\n) => ComponentType<WithoutStorage<P>> {\n  return <P extends WithStorage<T>>(\n    Cmp: ComponentType<P>,\n  ): ComponentType<WithoutStorage<P>> => {\n    return function WithStorageCmp(props: WithoutStorage<P>): ReactElement<{}> {\n      return (\n        <StorageContext.Consumer>\n          {(context: StorageContextType): ReactElement<{}> => (\n            <Cmp storage={context.getStore(namespace, type)} {...props} />\n          )}\n        </StorageContext.Consumer>\n      )\n    }\n  }\n}\n\nclass StorageProvider extends Component {\n  public render(): ReactNode {\n    return (\n      <StorageContext.Provider\n        value={{\n          getStore: this._getStore,\n        }}\n      >\n        {this.props.children}\n      </StorageContext.Provider>\n    )\n  }\n\n  @Bind()\n  private _getStore<T extends StorageBase>(\n    namespace: string,\n    type: StorageType = LOCAL,\n  ): Storage<T> {\n    switch (type) {\n      case LOCAL:\n        return LocalStorage.create(namespace)\n      case SESSION:\n        return SessionStorage.create(namespace)\n    }\n  }\n}\n\nexport default StorageProvider\n","import { Button, Grid, LinearProgress, Typography } from '@material-ui/core'\nimport { Bind } from 'lodash-decorators'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport { RouteComponentProps, withRouter } from 'react-router'\nimport { Subscription } from 'rxjs'\nimport { Item, UserId } from '../../api'\nimport { filterFeed$, getUserSubmissions$ } from '../../api/rx'\nimport Headline from '../../Headline/Headline'\nimport SubmissionsRoute, {\n  Filter,\n} from '../../routes/UserRoute/SubmissionsRoute/SubmissionsRoute'\n\ninterface SubmissionsProps {\n  id: UserId\n  filter: Filter\n  amount?: number\n}\n\ninterface SubmissionsState {\n  items: Item[]\n  left: number\n  loading: boolean\n}\n\nconst PAGE_SIZE: number = 30\n\nclass Submissions extends Component<\n  SubmissionsProps & RouteComponentProps & WithNamespaces,\n  SubmissionsState\n> {\n  public state: SubmissionsState = { items: [], left: 0, loading: true }\n  private _subscription?: Subscription\n\n  public componentDidMount(): void {\n    this._subscribe()\n  }\n\n  public componentDidUpdate(prevProps: SubmissionsProps): void {\n    const reload: boolean =\n      this.props.id !== prevProps.id || this.props.filter !== prevProps.filter\n    if (reload || this.props.amount !== prevProps.amount) {\n      this._unsubscribe()\n      this._subscribe()\n      this.setState({ loading: true })\n    }\n\n    if (reload) {\n      this.setState({ items: [], left: 0 })\n    }\n  }\n\n  public componentWillUnmount(): void {\n    this._unsubscribe()\n  }\n\n  public render(): ReactNode {\n    return (\n      <>\n        {this._renderEmptyPlaceholder()}\n        {this.props.filter === 'comments'\n          ? this._renderComments()\n          : this._renderSubmissions()}\n        {this.state.loading ? <LinearProgress /> : null}\n        {this._renderPager()}\n      </>\n    )\n  }\n\n  private _renderEmptyPlaceholder(): ReactNode {\n    const { loading, items }: this['state'] = this.state\n    const { t }: this['props'] = this.props\n\n    return loading || items.length ? null : (\n      <Grid container spacing={16} alignItems=\"center\" direction=\"column\">\n        <Grid item>\n          <Typography variant=\"h6\">{t('empty')}</Typography>\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h4\" aria-label={t('shrugLabel')}>\n            {t('shrug')}\n          </Typography>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  private _renderComments(): ReactNode {\n    return this.state.items.map((item: Item) => (\n      <Headline item={item} expanded key={item.id} />\n    ))\n  }\n\n  private _renderSubmissions(): ReactNode {\n    return this.state.items.map((item: Item) => (\n      <Headline item={item} key={item.id} />\n    ))\n  }\n\n  private _renderPager(): ReactNode {\n    return this.state.left ? (\n      <Grid container spacing={8} justify=\"center\">\n        <Grid item>\n          <Button onClick={this._more}>{this.props.t('more')}</Button>\n        </Grid>\n      </Grid>\n    ) : null\n  }\n\n  @Bind()\n  private _more(): void {\n    const { id, filter }: this['props'] = this.props\n\n    this.props.history.push(\n      SubmissionsRoute.makeURL({\n        filter,\n        id,\n        amount: this._getAmount() + PAGE_SIZE,\n      }),\n    )\n  }\n\n  private _getAmount(): number {\n    return this.props.amount || PAGE_SIZE\n  }\n\n  @Bind()\n  private _predicate({ dead, deleted, type, by }: Item): boolean {\n    if (dead || deleted || !by) return false\n\n    switch (this.props.filter) {\n      case 'comments':\n        return type === 'comment'\n      case 'submissions':\n        return type !== 'comment' && type !== 'pollopt'\n    }\n  }\n\n  private _subscribe(): void {\n    this._subscription = filterFeed$(\n      getUserSubmissions$(this.props.id),\n      this._predicate,\n      this._getAmount(),\n    ).subscribe(({ items, left }: { items: Item[]; left: number }) => {\n      this.setState({ items, left, loading: false })\n    })\n  }\n\n  private _unsubscribe(): void {\n    if (this._subscription) {\n      this._subscription.unsubscribe()\n    }\n  }\n}\n\nexport default withNamespaces('Submissions')(withRouter(Submissions))\n","import { Memoize } from 'lodash-decorators'\nimport { compile } from 'path-to-regexp'\nimport { ReactNode } from 'react'\nimport RouteConfig from './RouteConfig'\n\nabstract class AbstractRouteConfig<\n  Params extends Record<string | number, unknown> = {}\n> implements RouteConfig<Params> {\n  protected abstract URL: string\n\n  public abstract use(): ReactNode\n\n  public makeURL(params: Params): string {\n    const fn: this['makeURL'] = this._compileURL(this.URL)\n    return fn(params)\n  }\n\n  @Memoize()\n  private _compileURL(URL: string): this['makeURL'] {\n    return compile(URL)\n  }\n}\n\nexport default AbstractRouteConfig\n","import { Bind } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { Route, RouteComponentProps } from 'react-router'\nimport AbstractRouteConfig from './AbstractRouteConfig'\n\nexport type AsString<T extends Record<string | number, unknown>> = {\n  [k in keyof T]: T[k] extends string ? T[k] : string\n}\n\nabstract class SimpleRouteConfig<\n  Params extends Record<string | number, unknown> = {}\n> extends AbstractRouteConfig<Params> {\n  public use(): ReactNode {\n    return <Route path={this.URL}>{this._translateParams}</Route>\n  }\n\n  protected abstract translateParams(params: AsString<Params>): ReactNode\n\n  @Bind()\n  private _translateParams({\n    match,\n  }: RouteComponentProps<AsString<Params>>): ReactNode {\n    return match ? this.translateParams(match.params) : null\n  }\n}\n\nexport default SimpleRouteConfig\n","import React, { ReactNode } from 'react'\nimport { UserId } from '../../../api'\nimport Submissions from '../../../User/Submissions/Submissions'\nimport SimpleRouteConfig, { AsString } from '../../util/SimpleRouteConfig'\n\nexport type Filter = 'submissions' | 'comments'\nconst filters: Filter[] = ['submissions', 'comments']\n\ninterface SubmissionsRouteParams {\n  id: UserId\n  filter: Filter\n  amount?: number\n}\n\nclass SubmissionsRoute extends SimpleRouteConfig<SubmissionsRouteParams> {\n  protected URL: string = `/user/:id/:filter(${filters.join(\n    '|',\n  )})/:amount(\\\\d+)?`\n  protected translateParams({\n    id,\n    filter,\n    amount,\n  }: AsString<SubmissionsRouteParams>): ReactNode {\n    return (\n      <Submissions\n        amount={amount ? Number(amount) : undefined}\n        {...{ id, filter }}\n      />\n    )\n  }\n}\n\nexport default new SubmissionsRoute()\n","import { Component, ReactNode } from 'react'\nimport { Snapshot, Subscriber, Unsubscriber } from '../api'\n\nexport type WithUpdatesFrom<T> = (subscriber: Subscriber<T>) => Unsubscriber\n\ninterface WithUpdatesProps<T> {\n  from: WithUpdatesFrom<T>\n  children(data?: T): ReactNode\n}\n\ninterface WithUpdatesState<T> {\n  data?: T\n}\n\nclass WithUpdates<T> extends Component<\n  WithUpdatesProps<T>,\n  WithUpdatesState<T>\n> {\n  public state: WithUpdatesState<T> = {}\n  private _unsubscriber?: () => void\n\n  public componentDidMount(): void {\n    this._subscribe()\n  }\n\n  public componentDidUpdate(prevProps: WithUpdatesProps<T>): void {\n    if (prevProps.from !== this.props.from) {\n      this._unsubscribe()\n      this._subscribe()\n    }\n  }\n\n  public componentWillUnmount(): void {\n    this._unsubscribe()\n  }\n\n  public render(): ReactNode {\n    const { children }: this['props'] = this.props\n    return children(this.state.data)\n  }\n\n  private _subscribe(): void {\n    this._unsubscriber = this.props.from(\n      (snap: Snapshot<T>): void => {\n        this.setState({ data: snap.val() })\n      },\n    )\n  }\n\n  private _unsubscribe(): void {\n    if (this._unsubscriber) this._unsubscriber()\n    delete this._unsubscriber\n  }\n}\n\nexport default WithUpdates\n","import { Grid, Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport { Star } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport {\n  getUser,\n  Subscriber,\n  Unsubscriber,\n  User as UserType,\n  UserId,\n} from '../api'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport SubmissionsRoute from '../routes/UserRoute/SubmissionsRoute/SubmissionsRoute'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface UserProps {\n  id: UserId\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  container: {\n    maxWidth: theme.mixins.appMaxWidth,\n    width: '100%',\n    padding: theme.spacing.unit,\n    display: 'grid',\n    gridTemplateAreas: `\n      \"usernameCaption  username     karma\"\n      \"createdCaption   created      karma\"\n      \"aboutCaption     about        about\"\n      \".                links        .\"\n      \"submissions      submissions  submissions\"`,\n    gridTemplateColumns: 'auto 1fr auto',\n    gridGap: `${theme.spacing.unit}px`,\n    justifyItems: 'start',\n    [theme.breakpoints.down('xs')]: {\n      gridTemplateAreas: `\n        \"karma            karma\"\n        \"usernameCaption  username\"\n        \"createdCaption   created\"\n        \"aboutCaption     about\"\n        \".                links\"\n        \"submissions      submissions\"`,\n      gridTemplateColumns: 'auto 1fr',\n    },\n  },\n  usernameCaption: {\n    gridArea: 'usernameCaption',\n  },\n  username: {\n    gridArea: 'username',\n  },\n  createdCaption: {\n    gridArea: 'createdCaption',\n  },\n  created: {\n    gridArea: 'created',\n  },\n  karma: {\n    gridArea: 'karma',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  aboutCaption: {\n    gridArea: 'aboutCaption',\n  },\n  about: {\n    gridArea: 'about',\n  },\n  links: {\n    gridArea: 'links',\n  },\n  link: {\n    '&.isActive::before': {\n      content: '\"> \"',\n    },\n  },\n  submissions: {\n    gridArea: 'submissions',\n    justifySelf: 'stretch',\n  },\n})\n\nclass User extends Component<UserProps & WithStyles & WithNamespaces> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._subscribe(this.props.id)}>\n        {this._renderUser}\n      </WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _renderUser(user: UserType): ReactNode {\n    if (!user) return null\n    const { classes, t }: this['props'] = this.props\n    const { id, created, karma, about }: UserType = user\n\n    return (\n      <>\n        <Grid container justify=\"center\">\n          <Grid item className={classes.container}>\n            <Typography className={classes.usernameCaption}>\n              {t('usernameCaption')}\n            </Typography>\n            <Typography\n              className={classes.username}\n              aria-labelledby={classes.usernameCaption}\n            >\n              {id}\n            </Typography>\n            <Typography className={classes.createdCaption}>\n              {t('createdCaption')}\n            </Typography>\n            <Typography\n              className={classes.created}\n              aria-labelledby={classes.createdCaption}\n            >\n              {t('shared:date', { date: created })}\n            </Typography>\n            <Typography className={classes.karma} variant=\"h4\">\n              <Star fontSize=\"inherit\" />\n              {karma}\n            </Typography>\n            <Typography className={classes.aboutCaption}>\n              {t('aboutCaption')}\n            </Typography>\n            <ContentHtml\n              className={classes.about}\n              aria-labelledby={classes.aboutCaption}\n            >\n              {about}\n            </ContentHtml>\n            <Typography className={classes.links} component=\"section\">\n              <Link\n                className={classes.link}\n                href={SubmissionsRoute.makeURL({\n                  id,\n                  filter: 'submissions',\n                })}\n              >\n                {t('submissions')}\n              </Link>\n              <Link\n                className={classes.link}\n                href={SubmissionsRoute.makeURL({ id, filter: 'comments' })}\n              >\n                {t('comments')}\n              </Link>\n            </Typography>\n            <section className={classes.submissions}>\n              {SubmissionsRoute.use()}\n            </section>\n          </Grid>\n        </Grid>\n      </>\n    )\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: UserId): WithUpdatesFrom<UserType> {\n    return (subscriber: Subscriber<UserType>): Unsubscriber =>\n      getUser(id, subscriber)\n  }\n}\n\nexport default withNamespaces('User')(withStyles(styles)(User))\n","import React, { ReactNode } from 'react'\nimport { UserId } from '../../api'\nimport User from '../../User/User'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\n\ninterface UserRouteParams {\n  id: UserId\n}\n\nclass UserRoute extends SimpleRouteConfig<UserRouteParams> {\n  protected URL: string = '/user/:id'\n  protected translateParams({ id }: AsString<UserRouteParams>): ReactNode {\n    return <User id={id} />\n  }\n}\n\nexport default new UserRoute()\n","import React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\n\ninterface TimeProps {\n  distance: number\n}\n\nclass Time extends Component<TimeProps & WithNamespaces> {\n  public render(): ReactNode {\n    const { distance, t }: this['props'] = this.props\n\n    return (\n      <time dateTime={new Date(distance * 1000).toISOString()}>\n        {t('shared:timeDistance', { time: distance })}\n      </time>\n    )\n  }\n}\n\nexport default withNamespaces()(Time)\n","import { Bind } from 'lodash-decorators'\nimport { Component, ReactNode } from 'react'\n\ninterface ToggleProps {\n  initial: boolean\n  onChange?(state: boolean): void\n  children(state: boolean, toggle: () => void): ReactNode\n}\n\ninterface ToggleState {\n  value: boolean\n}\n\nclass Toggle extends Component<ToggleProps, ToggleState> {\n  constructor(props: ToggleProps) {\n    super(props)\n    this.state = { value: props.initial }\n  }\n\n  public render(): ReactNode {\n    return this.props.children(this.state.value, this._toggle)\n  }\n\n  @Bind()\n  private _toggle(): void {\n    this.setState(\n      ({ value }: ToggleState) => ({ value: !value }),\n      () => {\n        if (this.props.onChange) this.props.onChange(this.state.value)\n      },\n    )\n  }\n}\n\nexport default Toggle\n","import { Button, Grid, Typography } from '@material-ui/core'\nimport { grey } from '@material-ui/core/colors'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport {\n  Comment as CommentType,\n  getItem,\n  ItemId,\n  Subscriber,\n  Unsubscriber,\n} from '../api'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport {\n  SESSION,\n  withStorage,\n  WithStorage,\n} from '../Root/StorageProvider/StorageProvider'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\nimport Time from '../Time/Time'\nimport WithToggle from '../WithToggle/WithToggle'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface CommentProps {\n  id: ItemId\n}\n\ntype CommentStorage = Record<ItemId, true>\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  root: {\n    '& + &, & &': {\n      marginTop: theme.spacing.unit,\n    },\n  },\n  inline: {\n    display: 'inline-block',\n  },\n  bar: {\n    // reset\n    background: 'none',\n    border: 0,\n    color: 'inherit',\n    font: 'inherit',\n    lineHeight: 'normal',\n    overflow: 'visible',\n    padding: 0,\n    outline: 'none',\n    WebkitUserSelect: 'none',\n    MozUserSelect: 'none',\n    msUserSelect: 'none',\n    '&::-moz-focus-inner': {\n      border: 0,\n      padding: 0,\n    },\n    // end reset\n    width: '100%',\n    height: '100%',\n    minWidth: 0,\n    minHeight: 0,\n    boxShadow: theme.shadows[0],\n    cursor: 'pointer',\n    borderLeft: `${theme.spacing.unit / 4}px solid ${grey[400]}`,\n    '&:hover, &:focus, &:active': {\n      borderLeftColor: grey[600],\n    },\n  },\n  barContainer: {\n    flex: `0 0 ${theme.spacing.unit * 1.5}px`,\n    marginRight: theme.spacing.unit * 0.25,\n  },\n  content: {\n    flex: `1 0 0`,\n    maxWidth: `calc(100% - ${theme.spacing.unit * (1.5 + 0.25)}px)`,\n  },\n  expandButton: {\n    ...theme.typography.caption,\n    padding: 0,\n    minWidth: 0,\n    minHeight: 0,\n    marginLeft: theme.spacing.unit,\n    color: theme.palette.text.secondary,\n    '&:hover, &:focus, &:active': {\n      fontWeight: theme.typography.fontWeightMedium,\n      textDecoration: 'underline',\n    },\n  },\n})\n\nclass Comment extends Component<\n  CommentProps & WithStyles & WithStorage<CommentStorage> & WithNamespaces\n> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._subscribe(this.props.id)}>\n        {this._renderComment}\n      </WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _renderComment(comment?: CommentType): ReactNode {\n    if (!comment) return null\n    const { by, text, time, dead, deleted }: CommentType = comment\n    if (dead || deleted) return null\n    const { classes, storage, id, t }: this['props'] = this.props\n    const nodeId: string = `comment-${id}`\n\n    return (\n      <WithToggle initial={!!storage.get(id)} onChange={this._onToggle}>\n        {(collapsed: boolean, toggle: () => void): ReactNode => (\n          <Grid container className={classes.root} component=\"section\">\n            <Grid item className={classes.barContainer}>\n              <button\n                className={classes.bar}\n                onClick={toggle}\n                aria-label={t('collapse')}\n                aria-controls={nodeId}\n                aria-expanded={!collapsed}\n              />\n            </Grid>\n            <Grid\n              item\n              className={classes.content}\n              id={nodeId}\n              aria-hidden={collapsed}\n            >\n              <Typography\n                variant=\"caption\"\n                color=\"textSecondary\"\n                className={classes.inline}\n                component=\"aside\"\n              >\n                {[\n                  <Link\n                    key=\"user\"\n                    href={UserRoute.makeURL({ id: by })}\n                    className={classes.inline}\n                  >\n                    {by}\n                  </Link>,\n                  ' ',\n                  <Link\n                    key=\"time\"\n                    href={ItemRoute.makeURL({ id })}\n                    className={classes.inline}\n                  >\n                    <Time distance={time} />\n                  </Link>,\n                  ...(collapsed\n                    ? [\n                        ' ',\n                        <Button\n                          key=\"expand\"\n                          className={classes.expandButton}\n                          onClick={toggle}\n                          aria-label={t('expand')}\n                          disableRipple\n                        >\n                          [+]\n                        </Button>,\n                      ]\n                    : []),\n                ]}\n              </Typography>\n              {collapsed ? null : (\n                <>\n                  <ContentHtml>{text}</ContentHtml>\n                  {this._renderKids(comment)}\n                </>\n              )}\n            </Grid>\n          </Grid>\n        )}\n      </WithToggle>\n    )\n  }\n\n  private _renderKids(comment: CommentType): ReactNode {\n    return comment.kids\n      ? comment.kids.map((kid: ItemId) => <Self key={kid} id={kid} />)\n      : null\n  }\n\n  @Bind()\n  private _onToggle(collapsed: boolean): void {\n    const { storage, id }: this['props'] = this.props\n\n    if (collapsed) {\n      storage.set(id, true)\n    } else {\n      storage.delete(id)\n    }\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<CommentType> {\n    return (subscriber: Subscriber<CommentType>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n}\n\nconst Self: ComponentType<CommentProps> = withStorage('comment', SESSION)(\n  withNamespaces('Comment')(withStyles(styles)(Comment)),\n)\nexport default Self\n","import { Grid } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ReactNode } from 'react'\nimport { getItem, Item, ItemId, Subscriber, Unsubscriber } from '../api'\nimport Comment from '../Comment/Comment'\nimport Headline from '../Headline/Headline'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\nexport interface ThreadProps {\n  id: ItemId\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  container: {\n    maxWidth: theme.mixins.appMaxWidth,\n    padding: theme.spacing.unit,\n  },\n  spacer: {\n    margin: theme.spacing.unit,\n  },\n})\n\nclass Thread extends Component<ThreadProps & WithStyles> {\n  public render(): ReactNode {\n    const { classes, id }: this['props'] = this.props\n\n    return (\n      <Grid container justify=\"center\">\n        <Grid\n          item\n          container\n          direction=\"column\"\n          className={classes.container}\n          component=\"article\"\n        >\n          <WithUpdates from={this._subscribe(id)}>\n            {this._renderItem}\n          </WithUpdates>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  @Bind()\n  private _renderItem(data?: Item): ReactNode {\n    if (!data) return null\n\n    return (\n      <>\n        <Headline id={this.props.id} expanded />\n        {this._renderComments(data)}\n      </>\n    )\n  }\n\n  private _renderComments(data: Item): ReactNode {\n    if ('kids' in data) {\n      return (\n        <>\n          <span className={this.props.classes.spacer} />\n          {data.kids.map((kid: ItemId) => (\n            <Comment id={kid} key={kid} />\n          ))}\n        </>\n      )\n    }\n\n    return null\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<Item> {\n    return (subscriber: Subscriber<Item>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n}\n\nexport default withStyles(styles)(Thread)\n","import React, { ReactNode } from 'react'\nimport { ItemId } from '../../api'\nimport Thread from '../../Thread/Thread'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\n\ninterface ItemRouteParams {\n  id: ItemId\n}\n\nclass ItemRoute extends SimpleRouteConfig<ItemRouteParams> {\n  protected URL: string = '/item/:id(\\\\d+)'\n  protected translateParams({ id }: AsString<ItemRouteParams>): ReactNode {\n    return <Thread id={Number(id)} />\n  }\n}\n\nexport default new ItemRoute()\n","import { Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport {\n  Comment,\n  getItem,\n  Item,\n  ItemId,\n  Job,\n  Poll,\n  PollOption,\n  Story,\n  Subscriber,\n  Unsubscriber,\n} from '../api'\nimport ContentHtml from '../ContentHtml/ContentHtml'\nimport Link from '../Link/Link'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\nimport Time from '../Time/Time'\nimport { interleave } from '../util/interleave'\nimport WithUpdates, { WithUpdatesFrom } from '../WithUpdates/WithUpdates'\n\ninterface HeadlineProps {\n  id?: ItemId\n  item?: Item\n  expanded?: true\n}\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  link: {\n    color: theme.palette.link.default,\n    '&:focus, &:active, &:visited': {\n      color: theme.palette.link.active,\n      outline: 'none',\n    },\n  },\n  inline: {\n    display: 'inline-block',\n  },\n  expandedText: {\n    marginTop: theme.spacing.unit,\n  },\n  pollOptions: {\n    paddingLeft: theme.spacing.unit * 4,\n  },\n})\n\ntype Core = Story | Job | Poll\nclass Headline extends Component<HeadlineProps & WithStyles & WithNamespaces> {\n  public render(): ReactNode {\n    const { item, id }: this['props'] = this.props\n\n    if (id) {\n      return (\n        <WithUpdates from={this._subscribe(id)}>{this._renderItem}</WithUpdates>\n      )\n    }\n\n    if (item) {\n      return this._renderItem(item)\n    }\n\n    throw new Error('either id or item should be provided')\n  }\n\n  @Bind()\n  @Memoize()\n  private _subscribe(id: ItemId): WithUpdatesFrom<Item> {\n    return (subscriber: Subscriber<Item>): Unsubscriber =>\n      getItem(id, subscriber)\n  }\n\n  @Bind()\n  private _renderItem(item?: Item): ReactNode {\n    return <section>{item ? this._item(item) : this._empty()}</section>\n  }\n\n  private _empty(): ReactNode {\n    return (\n      <>\n        <Typography variant=\"body1\">???</Typography>\n        {this._caption(['???'])}\n      </>\n    )\n  }\n\n  private _item(item: Item): ReactNode {\n    switch (item.type) {\n      case 'story':\n        return this._core(item)\n      case 'job':\n        return this._core(item)\n      case 'poll':\n        return this._core(item)\n      case 'pollopt':\n        return this._pollOption(item)\n      case 'comment':\n        return this._comment(item)\n      default:\n        throw new Error(`unknown item type ${(item as Item).type}`)\n    }\n  }\n\n  private _core(item: Core): ReactNode {\n    return (\n      <>\n        {this._headerToUrlOrComments(item)}\n        {this._deriveCaption(item)}\n        {this._maybeText(item, true)}\n        {this._maybePollOptions(item)}\n      </>\n    )\n  }\n\n  private _pollOption({ text, score, poll }: PollOption): ReactNode {\n    const { t }: this['props'] = this.props\n\n    return (\n      <>\n        <Typography variant=\"body1\">{text}</Typography>\n        {this._caption([\n          t('points', { count: score }),\n          '|',\n          this._captionLink(\n            'parentPoll',\n            ItemRoute.makeURL({ id: poll }),\n            t('poll'),\n          ),\n        ])}\n      </>\n    )\n  }\n\n  private _comment(comment: Comment): ReactNode {\n    const { by, id, time, parent, dead, deleted }: Comment = comment\n    if (dead || deleted) return null\n    const { t }: this['props'] = this.props\n\n    return (\n      <>\n        {this._caption([\n          this._captionLink('by', UserRoute.makeURL({ id: by }), by),\n          this._captionLink(\n            'time',\n            ItemRoute.makeURL({ id }),\n            <Time distance={time} key=\"time\" />,\n          ),\n          '|',\n          this._captionLink(\n            'parent',\n            ItemRoute.makeURL({ id: parent }),\n            t('parent'),\n          ),\n        ])}\n        {this._maybeText(comment, false)}\n      </>\n    )\n  }\n\n  private _header(\n    external: boolean,\n    href: string,\n    children: ReactNode,\n  ): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return (\n      <Link\n        variant=\"body1\"\n        className={classes.link}\n        {...{ external, href, children }}\n      />\n    )\n  }\n\n  private _headerToUrlOrComments(item: Core): ReactNode {\n    const { id, title }: typeof item = item\n    return 'url' in item && item.url\n      ? this._header(true, item.url, title)\n      : this._header(false, ItemRoute.makeURL({ id }), title)\n  }\n\n  private _caption(content: ReactNode[]): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return (\n      <Typography\n        variant=\"caption\"\n        color=\"textSecondary\"\n        className={classes.inline}\n        component=\"aside\"\n      >\n        {interleave(content, ' ')}\n      </Typography>\n    )\n  }\n\n  private _captionLink(\n    key: string,\n    href: string,\n    children: ReactNode,\n  ): ReactNode {\n    const { classes }: this['props'] = this.props\n\n    return <Link className={classes.inline} {...{ key, href, children }} />\n  }\n\n  private _deriveCaption(item: Core): ReactNode {\n    const { t }: this['props'] = this.props\n    const { score, by, time, id }: typeof item = item\n\n    return this._caption([\n      t('points', { count: score }),\n      t('by'),\n      this._captionLink('by', UserRoute.makeURL({ id: by }), by),\n      this._captionLink(\n        'time',\n        ItemRoute.makeURL({ id }),\n        <Time distance={time} key=\"time\" />,\n      ),\n      ...('descendants' in item\n        ? [\n            '|',\n            this._captionLink(\n              'comments',\n              ItemRoute.makeURL({ id }),\n              t('comments', { count: item.descendants }),\n            ),\n          ]\n        : []),\n    ])\n  }\n\n  private _maybeText(item: Item, spaced: boolean): ReactNode {\n    const { expanded, classes }: this['props'] = this.props\n\n    return expanded && 'text' in item ? (\n      <ContentHtml className={spaced ? classes.expandedText : ''}>\n        {item.text}\n      </ContentHtml>\n    ) : null\n  }\n\n  private _maybePollOptions(item: Core): ReactNode {\n    const { expanded, classes }: this['props'] = this.props\n\n    return expanded && 'parts' in item ? (\n      <section className={classes.pollOptions}>\n        {item.parts.map(\n          (part: ItemId): ReactNode => (\n            <Self id={part} key={part} />\n          ),\n        )}\n      </section>\n    ) : null\n  }\n}\n\nconst Self: ComponentType<HeadlineProps> = withNamespaces('Headline')(\n  withStyles(styles)(Headline),\n)\nexport default Self\n","import React, { Component, ReactNode } from 'react'\nimport { arrayEquals } from '../util'\n\ninterface PaginatedProps<T = unknown> {\n  data: T[]\n  page: number\n  pageSize: number\n  children: (paginated: T[], numberOfPages: number) => ReactNode\n}\n\ninterface PaginatedState<T = unknown> {\n  paginated: T[]\n}\n\nfunction paginate<T = unknown>({\n  data,\n  page,\n  pageSize,\n}: PaginatedProps<T>): T[] {\n  const begin: number = page * pageSize\n  return data.slice(begin, begin + pageSize)\n}\n\nclass Paginated<T = unknown> extends Component<\n  PaginatedProps<T>,\n  PaginatedState<T>\n> {\n  public static getDerivedStateFromProps<T = unknown>(\n    nextProps: PaginatedProps<T>,\n    { paginated }: PaginatedState<T>,\n  ): Partial<PaginatedState<T>> | null {\n    const nextPaginated: T[] = paginate(nextProps)\n\n    return arrayEquals(paginated, nextPaginated)\n      ? null\n      : { paginated: nextPaginated }\n  }\n\n  public state: PaginatedState<T> = { paginated: [] }\n\n  public render(): ReactNode {\n    const { data, children, pageSize }: this['props'] = this.props\n\n    return children(\n      this.state.paginated,\n      Math.floor(((data.length || 1) - 1) / pageSize),\n    )\n  }\n}\n\nexport default Paginated\n","import { Button, Card, Grid, Typography } from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { Bind } from 'lodash-decorators'\nimport React, { Component, ComponentType, ReactElement, ReactNode } from 'react'\nimport { WithNamespaces, withNamespaces } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport {\n  FeedReader,\n  getAskStories,\n  getBestStories,\n  getJobStories,\n  getNewStories,\n  getShowStories,\n  getTopStories,\n  ItemId,\n  Items,\n} from '../api'\nimport Headline from '../Headline/Headline'\nimport Paginated from '../Paginated/Paginated'\nimport FeedRoute, { MainFeed } from '../routes/FeedRoute/FeedRoute'\nimport { clamp } from '../util'\nimport WithUpdates from '../WithUpdates/WithUpdates'\n\ninterface HeadlineListProps {\n  page?: number\n  feed?: MainFeed\n}\n\nconst PAGE_SIZE: number = 30\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  list: {\n    padding: 0,\n    margin: 0,\n    maxWidth: theme.mixins.appMaxWidth,\n    flexGrow: 1,\n  },\n  card: {\n    padding: theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  pager: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: `0 ${theme.spacing.unit}px`,\n  },\n})\n\nfunction ButtonLinkTo(to: string): ComponentType {\n  return function LinkTo(props: {}): ReactElement<{}> {\n    return <Link to={to} {...props} />\n  }\n}\n\nclass HeadlineList extends Component<\n  HeadlineListProps & WithStyles & WithNamespaces\n> {\n  public render(): ReactNode {\n    return (\n      <WithUpdates from={this._getFeedReader()}>{this._paginated}</WithUpdates>\n    )\n  }\n\n  @Bind()\n  private _paginated(data: Items = []): ReactNode {\n    return (\n      <Paginated data={data} page={this._getPage()} pageSize={PAGE_SIZE}>\n        {this._renderList}\n      </Paginated>\n    )\n  }\n\n  @Bind()\n  private _renderList(items: Items, numberOfPages: number): ReactNode {\n    const { classes, t }: this['props'] = this.props\n\n    return (\n      <article>\n        <Grid container justify=\"center\">\n          <Grid item component=\"ul\" className={classes.list}>\n            {items.map(\n              (id: ItemId): ReactNode => (\n                <Card component=\"li\" className={classes.card} key={id}>\n                  <Headline id={id} />\n                </Card>\n              ),\n            )}\n            {this._renderPager(numberOfPages)}\n          </Grid>\n        </Grid>\n      </article>\n    )\n  }\n\n  private _renderPager(numberOfPages: number): ReactNode {\n    const { classes, t }: this['props'] = this.props\n\n    return numberOfPages ? (\n      <Grid\n        item\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignContent=\"center\"\n      >\n        <Grid item>\n          <Button\n            disabled={this._getPage() <= 0}\n            component={ButtonLinkTo(\n              FeedRoute.makeURL({\n                feed: this._getFeed(),\n                page: clamp(this._getPage() - 1, 0, numberOfPages),\n              }),\n            )}\n          >\n            {t('previous')}\n          </Button>\n        </Grid>\n        <Grid item className={classes.pager}>\n          <Typography>\n            {this._getPage()}\n            {' / '}\n            {numberOfPages}\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Button\n            disabled={this._getPage() >= numberOfPages}\n            component={ButtonLinkTo(\n              FeedRoute.makeURL({\n                feed: this._getFeed(),\n                page: clamp(this._getPage() + 1, 0, numberOfPages),\n              }),\n            )}\n          >\n            {t('next')}\n          </Button>\n        </Grid>\n      </Grid>\n    ) : null\n  }\n\n  private _getPage(): number {\n    return this.props.page || 0\n  }\n\n  private _getFeed(): MainFeed {\n    return this.props.feed || 'top'\n  }\n\n  private _getFeedReader(): FeedReader {\n    const feed: MainFeed = this._getFeed()\n\n    switch (feed) {\n      case 'top':\n        return getTopStories\n      case 'new':\n        return getNewStories\n      case 'best':\n        return getBestStories\n      case 'ask':\n        return getAskStories\n      case 'show':\n        return getShowStories\n      case 'job':\n        return getJobStories\n    }\n  }\n}\n\nexport default withNamespaces('HeadlineList')(withStyles(styles)(HeadlineList))\n","import React, { ReactNode } from 'react'\nimport HeadlineList from '../../HeadlineList/HeadlineList'\nimport SimpleRouteConfig, { AsString } from '../util/SimpleRouteConfig'\n\nexport type MainFeed = 'top' | 'new' | 'best' | 'ask' | 'show' | 'job'\nexport const feeds: MainFeed[] = ['top', 'new', 'best', 'ask', 'show', 'job']\n\ninterface FeedRouteParams {\n  feed: MainFeed\n  page?: number\n}\n\nclass FeedRoute extends SimpleRouteConfig<FeedRouteParams> {\n  protected URL: string = `/:feed(${feeds.join('|')})/:page(\\\\d+)?`\n  protected translateParams({\n    feed,\n    page,\n  }: AsString<FeedRouteParams>): ReactNode {\n    return <HeadlineList feed={feed} page={Number(page || '0')} />\n  }\n}\n\nexport default new FeedRoute()\n","import { Component, ReactNode } from 'react'\n\nclass Pending extends Component {\n  public render(): ReactNode {\n    return this.props.children\n  }\n}\n\nexport default Pending\n","import { Component, ReactNode } from 'react'\n\nexport interface RejectedProps {\n  error?: Error\n  children(error: Error): ReactNode\n}\n\nclass Rejected extends Component<RejectedProps> {\n  public render(): ReactNode {\n    return this.props.children(this.props.error as Error)\n  }\n}\n\nexport default Rejected\n","import { Component, ReactNode } from 'react'\n\nexport interface ResolvedProps<T> {\n  data?: T\n  children(data: T): ReactNode\n}\n\nclass Resolved<T> extends Component<ResolvedProps<T>> {\n  public render(): ReactNode {\n    return this.props.children(this.props.data as T)\n  }\n}\n\nexport default Resolved\n","import {\n  Children,\n  cloneElement,\n  Component,\n  ReactChild,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport { PENDING, REJECTED, RESOLVED, StatefulPromise } from '../util'\nimport Pending from './Pending'\nimport Rejected, { RejectedProps } from './Rejected'\nimport Resolved, { ResolvedProps } from './Resolved'\n\nexport interface AsyncProps<T> {\n  promise(): Promise<T>\n}\n\ninterface StateToChild<T = unknown> {\n  [PENDING]: null | ReactElement<{}>\n  [RESOLVED]: null | ReactElement<ResolvedProps<T>>\n  [REJECTED]: null | ReactElement<RejectedProps>\n}\n\ninterface AsyncState<T> {\n  promise: StatefulPromise<T>\n  data?: T\n  error?: Error\n}\n\nclass Async<T> extends Component<AsyncProps<T>, AsyncState<T>> {\n  public static Pending: typeof Pending = Pending\n  public static Rejected: typeof Rejected = Rejected\n  public static Resolved: typeof Resolved = Resolved\n  private static _emptyStateToChild: StateToChild = {\n    [PENDING]: null,\n    [RESOLVED]: null,\n    [REJECTED]: null,\n  }\n\n  public constructor(props: Async<T>['props']) {\n    super(props)\n    const promise: StatefulPromise<T> = new StatefulPromise(props.promise())\n    this.state = { promise }\n  }\n\n  public componentDidMount(): void {\n    this.state.promise.value\n      .then((result: T) =>\n        this.setState({\n          data: result,\n        }),\n      )\n      .catch((error: unknown) =>\n        this.setState({\n          error: error instanceof Error ? error : new Error(`${error}`),\n        }),\n      )\n  }\n\n  public render(): ReactNode {\n    const stateToChild: StateToChild<T> = this._getStateToChild()\n    let element:\n      | null\n      | ReactElement<ResolvedProps<T>>\n      | ReactElement<RejectedProps> = null\n\n    switch (this.state.promise.state) {\n      case PENDING:\n        return stateToChild[PENDING]\n      case RESOLVED:\n        element = stateToChild[RESOLVED]\n        if (!element) return null\n        return cloneElement(element, { data: this.state.data })\n      case REJECTED:\n        element = stateToChild[REJECTED]\n        if (!element) return null\n        return cloneElement(element, { error: this.state.error })\n    }\n  }\n\n  private _getStateToChild(): StateToChild<T> {\n    const result: StateToChild = { ...Async._emptyStateToChild }\n    Children.forEach(this.props.children, (child: ReactChild) => {\n      if (typeof child !== 'object') return this._dieInvalidChild()\n\n      switch (child.type) {\n        case Pending:\n          result[PENDING] = result[PENDING] || child\n          break\n        case Resolved:\n          result[RESOLVED] = result[RESOLVED] || child\n          break\n        case Rejected:\n          result[REJECTED] = result[REJECTED] || child\n          break\n        default:\n          this._dieInvalidChild()\n      }\n    })\n\n    return result as StateToChild<T>\n  }\n\n  private _dieInvalidChild(): never {\n    throw new Error('use only Async.* components as a child to Async')\n  }\n}\n\nexport default Async\n","import { Grid } from '@material-ui/core'\nimport { StyleRules, withStyles, WithStyles } from '@material-ui/core/styles'\nimport React, { Component, ReactNode } from 'react'\n\nconst styles: StyleRules = {\n  container: {\n    height: '100vh',\n  },\n}\n\nclass FullPage extends Component<WithStyles> {\n  public render(): ReactNode {\n    const { classes }: FullPage['props'] = this.props\n\n    return (\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"center\"\n        className={classes.container}\n      >\n        <Grid item>{this.props.children}</Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default withStyles(styles)(FullPage)\n","import {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport { AlertCircle } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport FullPage from '../FullPage/FullPage'\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  icon: {\n    fontSize: theme.typography.h1.fontSize,\n  },\n})\n\nclass ErrorPage extends Component<WithStyles> {\n  public render(): ReactNode {\n    const { classes }: ErrorPage['props'] = this.props\n\n    return (\n      <FullPage>\n        <AlertCircle className={classes.icon} color=\"error\" />\n      </FullPage>\n    )\n  }\n}\n\nexport default withStyles(styles)(ErrorPage)\n","import { CircularProgress } from '@material-ui/core'\nimport React, { Component, ReactNode } from 'react'\nimport FullPage from '../FullPage/FullPage'\n\nclass LoadingPage extends Component {\n  public render(): ReactNode {\n    return (\n      <FullPage>\n        <CircularProgress size={80} />\n      </FullPage>\n    )\n  }\n}\n\nexport default LoadingPage\n","import { i18n } from 'i18next'\nimport { Bind, Once } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { I18nextProvider } from 'react-i18next'\nimport Async from '../../Async/Async'\nimport ErrorPage from '../../ErrorPage/ErrorPage'\nimport { setup } from '../../i18n'\nimport LoadingPage from '../../LoadingPage/LoadingPage'\nimport { noop } from '../../util'\nimport { withStorage, WithStorage } from '../StorageProvider/StorageProvider'\n\ninterface LanguageProviderProps extends WithStorage<LanguageProviderState> {}\ninterface LanguageProviderState {\n  language: string\n}\n\nexport interface LanguageContextType {\n  selectedLanguage: string\n  setLanguage(language: string): void\n}\n\nconst DEFAULT_LANGUAGE: string = 'en-GB'\nexport const LanguageContext: React.Context<\n  LanguageContextType\n> = React.createContext({\n  selectedLanguage: DEFAULT_LANGUAGE,\n  setLanguage: noop,\n})\n\nclass LanguageProvider extends React.Component<\n  LanguageProviderProps,\n  LanguageProviderState\n> {\n  public state: LanguageProviderState = { language: DEFAULT_LANGUAGE }\n  constructor(props: LanguageProviderProps) {\n    super(props)\n    this.state = {\n      language: props.storage.get('language', DEFAULT_LANGUAGE),\n    }\n  }\n\n  public render(): ReactNode {\n    return (\n      <Async promise={this._i18n}>\n        <Async.Pending>\n          <LoadingPage />\n        </Async.Pending>\n        <Async.Resolved>\n          {(i18next: i18n): ReactNode => {\n            return (\n              <I18nextProvider i18n={i18next}>\n                <LanguageContext.Provider\n                  value={this._getLanguageContext(i18next)}\n                >\n                  {this.props.children}\n                </LanguageContext.Provider>\n              </I18nextProvider>\n            )\n          }}\n        </Async.Resolved>\n        <Async.Rejected>{(): ReactNode => <ErrorPage />}</Async.Rejected>\n      </Async>\n    )\n  }\n\n  private _getLanguageContext(i18next: i18n): LanguageContextType {\n    return {\n      selectedLanguage: this.state.language,\n      setLanguage: (language: string): void => {\n        if (this.state.language !== language) {\n          i18next.changeLanguage(language)\n          this.props.storage.set('language', language)\n          this.setState({ language })\n        }\n      },\n    }\n  }\n\n  @Bind()\n  @Once()\n  private _i18n(): Promise<i18n> {\n    return setup(this.state.language)\n  }\n}\n\nexport default withStorage('language')(LanguageProvider)\n","import { format as formatDate, formatDistance, Locale } from 'date-fns'\nimport i18next, { i18n } from 'i18next'\n\nexport function setup(initLanguage: string): Promise<i18n> {\n  let currentLocale: Locale | undefined\n\n  return new Promise(\n    (resolve: (i: i18n) => void, reject: (e: Error) => void): void => {\n      i18next\n        .use({\n          type: 'backend',\n          read(\n            language: string,\n            namespace: string,\n            callback: (err: Error | null, result?: object) => void,\n          ): void {\n            import(`./locales/${language}/${namespace}.json`)\n              .then((result: object) => callback(null, result))\n              .catch(() => {\n                callback(null, {})\n              })\n          },\n        })\n        .init(\n          {\n            debug: false,\n            lng: initLanguage,\n            fallbackLng: false,\n            defaultNS: 'shared',\n            ns: 'shared',\n            interpolation: {\n              escapeValue: false,\n              formatSeparator: '|',\n              format(value: unknown, format?: string): string {\n                switch (format) {\n                  case 'distance': {\n                    if (typeof value !== 'number') {\n                      throw new Error('invalid distance value')\n                    }\n                    return formatDistance(new Date(1000 * value), new Date(), {\n                      addSuffix: true,\n                      locale: currentLocale,\n                    })\n                  }\n                  case 'date': {\n                    if (typeof value !== 'number') {\n                      throw new Error('invalid distance value')\n                    }\n                    return formatDate(new Date(1000 * value), 'PP', {\n                      locale: currentLocale,\n                    })\n                  }\n                  default:\n                    throw new Error('formatter not implemented')\n                }\n              },\n            },\n            react: {\n              wait: true,\n            },\n          },\n          (error: unknown) => {\n            if (error) {\n              reject(new Error(`${error}`))\n            } else {\n              resolve(i18next)\n            }\n          },\n        )\n        .on('languageChanged', (language: string) => {\n          import(/* webpackInclude: /(en-GB|en-US)\\/index.js$/ */ `date-fns/locale/${language}`)\n            .then(\n              (locale: Locale): void => {\n                currentLocale = locale\n              },\n            )\n            .catch((error: Error) => {\n              if (process.env.NODE_ENV === 'development') {\n                // tslint:disable-next-line no-console\n                console.warn('locale not found', language, error)\n              }\n            })\n        })\n    },\n  )\n}\n","import {\n  createMuiTheme,\n  CssBaseline,\n  MuiThemeProvider,\n  PaletteType,\n  Theme,\n} from '@material-ui/core'\nimport { indigo } from '@material-ui/core/colors'\nimport { Bind, Memoize } from 'lodash-decorators'\nimport React, { ReactNode } from 'react'\nimport { noop } from '../../util'\nimport { WithStorage, withStorage } from '../StorageProvider/StorageProvider'\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    appMaxWidth: number\n    toolbarMaxWidth: number\n  }\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface PaletteOptions {\n    link: {\n      default: string\n      active: string\n    }\n  }\n\n  interface Palette {\n    link: {\n      default: string\n      active: string\n    }\n  }\n}\n\ninterface ThemeProviderProps extends WithStorage<ThemeProviderState> {}\n\ninterface ThemeProviderState {\n  theme: PaletteType\n}\n\nexport interface ThemeContextType {\n  selectedTheme: PaletteType\n  setTheme(theme: PaletteType): void\n}\n\nconst DEFAULT_THEME: PaletteType = 'dark'\nexport const ThemeContext: React.Context<\n  ThemeContextType\n> = React.createContext({\n  selectedTheme: DEFAULT_THEME,\n  setTheme: noop,\n} as ThemeContextType)\n\nclass ThemeProvider extends React.Component<\n  ThemeProviderProps,\n  ThemeProviderState\n> {\n  constructor(props: ThemeProviderProps) {\n    super(props)\n    this.state = {\n      theme: props.storage.get('theme', DEFAULT_THEME),\n    }\n  }\n\n  public render(): ReactNode {\n    return (\n      <MuiThemeProvider theme={this._createMuiTheme(this.state.theme)}>\n        <CssBaseline />\n        <ThemeContext.Provider\n          value={{\n            setTheme: this._setTheme,\n            selectedTheme: this.state.theme,\n          }}\n        >\n          {this.props.children}\n        </ThemeContext.Provider>\n      </MuiThemeProvider>\n    )\n  }\n\n  @Bind()\n  private _setTheme(theme: PaletteType): void {\n    if (this.state.theme !== theme) {\n      this.setState({ theme })\n      this.props.storage.set('theme', theme)\n    }\n  }\n\n  @Memoize()\n  private _createMuiTheme(type: PaletteType): Theme {\n    return createMuiTheme({\n      mixins: {\n        appMaxWidth: 8 * 120,\n        toolbarMaxWidth: 8 * 150,\n      },\n      palette: {\n        type,\n        link:\n          type === 'light'\n            ? {\n                default: indigo.A700,\n                active: indigo[700],\n              }\n            : {\n                default: indigo.A100,\n                active: indigo[100],\n              },\n      },\n      typography: {\n        useNextVariants: true,\n      },\n    })\n  }\n}\n\nexport default withStorage('theme')(ThemeProvider)\n","import {\n  List,\n  ListItem,\n  ListItemText,\n  ListSubheader,\n  Radio,\n} from '@material-ui/core'\nimport React, { ReactElement, ReactNode } from 'react'\n\nexport function OptionList<Key extends string | number = string>(\n  title: string,\n  optionTranslations: { [k in Key]: string },\n  onSelected: (option: Key) => () => void,\n  isSelected: (option: Key) => boolean,\n): ReactElement<{}> {\n  const options: Key[] = Object.keys(optionTranslations) as Key[]\n\n  return (\n    <List subheader={<ListSubheader>{title}</ListSubheader>}>\n      {options.map(\n        (option: Key): ReactNode => (\n          <ListItem key={option} button onClick={onSelected(option)}>\n            <Radio checked={isSelected(option)} tabIndex={-1} disableRipple />\n            <ListItemText>{optionTranslations[option]}</ListItemText>\n          </ListItem>\n        ),\n      )}\n    </List>\n  )\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  PaletteType,\n  withMobileDialog,\n} from '@material-ui/core'\nimport { DialogProps } from '@material-ui/core/Dialog'\nimport { StyleRules, WithStyles, withStyles } from '@material-ui/core/styles'\nimport { Settings as SettingsIcon } from 'mdi-material-ui'\nimport React, { Component, ComponentType, ReactElement, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport {\n  LanguageContext,\n  LanguageContextType,\n} from '../../Root/LanguageProvider/LanguageProvider'\nimport {\n  ThemeContext,\n  ThemeContextType,\n} from '../../Root/ThemeProvider/ThemeProvider'\nimport WithToggle from '../../WithToggle/WithToggle'\nimport { OptionList } from './OptionList/OptionList'\n\nconst withSettingsNamespace: ReturnType<typeof withNamespaces> = withNamespaces(\n  'Settings',\n)\n\nconst LanguageSettings: ComponentType = withSettingsNamespace(\n  ({ t }: WithNamespaces): ReactElement<{}> => {\n    const languages: { [language: string]: string } = t('languages', {\n      returnObjects: true,\n    })\n\n    return (\n      <LanguageContext.Consumer>\n        {(context: LanguageContextType): ReactNode =>\n          OptionList(\n            t('language'),\n            languages,\n            (language: string) => (): void => context.setLanguage(language),\n            (language: string) => context.selectedLanguage === language,\n          )\n        }\n      </LanguageContext.Consumer>\n    )\n  },\n)\nconst ThemeSettings: ComponentType = withSettingsNamespace(\n  ({ t }: WithNamespaces): ReactElement<{}> => {\n    const themes: { [language in PaletteType]: string } = t('themes', {\n      returnObjects: true,\n    })\n\n    return (\n      <ThemeContext.Consumer>\n        {(context: ThemeContextType): ReactNode =>\n          OptionList(\n            t('theme'),\n            themes,\n            (theme: PaletteType) => (): void => context.setTheme(theme),\n            (theme: PaletteType) => context.selectedTheme === theme,\n          )\n        }\n      </ThemeContext.Consumer>\n    )\n  },\n)\n\nconst ResponsiveDialog: ComponentType<DialogProps> = withMobileDialog<\n  DialogProps\n>()(Dialog)\n\nconst styles: StyleRules = {\n  dialogContent: { padding: 0 },\n}\n\nclass Settings extends Component<WithNamespaces & WithStyles> {\n  public render(): ReactNode {\n    const { t, classes }: Settings['props'] = this.props\n\n    return (\n      <WithToggle initial={false}>\n        {(state: boolean, toggle: () => void): ReactNode => (\n          <>\n            <IconButton\n              onClick={toggle}\n              color=\"inherit\"\n              aria-label={t('settings')}\n              aria-haspopup\n            >\n              <SettingsIcon />\n            </IconButton>\n            <ResponsiveDialog open={state} onClose={toggle}>\n              <DialogTitle>{t('settings')}</DialogTitle>\n              <DialogContent className={classes.dialogContent}>\n                <LanguageSettings />\n                <ThemeSettings />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={toggle}>{t('shared:close')}</Button>\n              </DialogActions>\n            </ResponsiveDialog>\n          </>\n        )}\n      </WithToggle>\n    )\n  }\n}\n\nexport default withSettingsNamespace(withStyles(styles)(Settings))\n","import {\n  AppBar,\n  Button,\n  Drawer,\n  Grid,\n  List,\n  ListItem,\n  Toolbar,\n  Typography,\n} from '@material-ui/core'\nimport {\n  StyleRules,\n  StyleRulesCallback,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles'\nimport { Hackernews } from 'mdi-material-ui'\nimport React, { Component, ReactNode } from 'react'\nimport { withNamespaces, WithNamespaces } from 'react-i18next'\nimport Breakpoint from '../Breakpoint/Breakpoint'\nimport Link from '../Link/Link'\nimport FeedRoute, { feeds, MainFeed } from '../routes/FeedRoute/FeedRoute'\nimport { interleave } from '../util'\nimport WithToggle from '../WithToggle/WithToggle'\nimport Settings from './Settings/Settings'\n\nconst styles: StyleRulesCallback = (theme: Theme): StyleRules => ({\n  toolbar: {\n    maxWidth: theme.mixins.toolbarMaxWidth,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  home: {\n    display: 'flex',\n    alignItems: 'center',\n    marginRight: theme.spacing.unit,\n  },\n  feedList: {\n    display: 'block',\n    margin: 0,\n    padding: 0,\n  },\n  feedLink: {\n    display: 'inline-block',\n    margin: 0,\n    padding: 0,\n  },\n  feedLinkText: {\n    fontWeight: theme.typography.fontWeightLight,\n    flexGrow: 1,\n    '&.isActive::before': {\n      content: '\"> \"',\n    },\n  },\n  homeButton: {\n    textTransform: 'none',\n  },\n  drawer: {\n    minWidth: '50vw',\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n  contentShift: {\n    ...theme.mixins.toolbar,\n    display: 'block',\n  },\n})\n\nclass Header extends Component<WithNamespaces & WithStyles> {\n  public render(): ReactNode {\n    const { t, classes }: Header['props'] = this.props\n\n    return (\n      <>\n        <AppBar>\n          <Toolbar className={classes.toolbar}>\n            <Breakpoint at=\"sm\">\n              <Breakpoint.Up>\n                <Grid container component=\"nav\">\n                  <Link\n                    href={FeedRoute.makeURL({ feed: 'top' })}\n                    className={classes.home}\n                  >\n                    <Hackernews />\n                    <Typography variant=\"h6\" color=\"inherit\">\n                      {t('shared:appName')}\n                    </Typography>\n                  </Link>\n                  <ul className={classes.feedList} aria-label={t('feeds')}>\n                    {interleave(\n                      feeds.map((feed: MainFeed) => (\n                        <li className={classes.feedLink} key={feed}>\n                          <Link\n                            href={FeedRoute.makeURL({ feed })}\n                            variant=\"h6\"\n                            className={classes.feedLinkText}\n                          >\n                            {t(feed)}\n                          </Link>\n                        </li>\n                      )),\n                      ' | ',\n                    )}\n                  </ul>\n                </Grid>\n              </Breakpoint.Up>\n              <Breakpoint.Down>\n                <WithToggle initial={false}>\n                  {(open: boolean, toggle: () => void): ReactNode => (\n                    <>\n                      <Button\n                        className={classes.homeButton}\n                        onClick={toggle}\n                        color=\"inherit\"\n                      >\n                        <Hackernews color=\"inherit\" />\n                        <Typography variant=\"h6\" color=\"inherit\">\n                          {t('shared:appName')}\n                        </Typography>\n                      </Button>\n                      <Drawer anchor=\"left\" open={open} onClose={toggle}>\n                        <nav>\n                          <List\n                            className={classes.drawer}\n                            aria-label={t('feeds')}\n                          >\n                            {feeds.map((feed: MainFeed) => (\n                              <ListItem key={feed} button component=\"li\">\n                                <Link\n                                  href={FeedRoute.makeURL({ feed })}\n                                  color=\"textPrimary\"\n                                  variant=\"h6\"\n                                  className={classes.feedLinkText}\n                                  onClick={toggle}\n                                >\n                                  {t(feed)}\n                                </Link>\n                              </ListItem>\n                            ))}\n                          </List>\n                        </nav>\n                      </Drawer>\n                    </>\n                  )}\n                </WithToggle>\n              </Breakpoint.Down>\n            </Breakpoint>\n            <span className={classes.spacer} />\n            <Settings />\n          </Toolbar>\n        </AppBar>\n        <span className={classes.contentShift} />\n      </>\n    )\n  }\n}\n\nexport default withNamespaces('Header')(withStyles(styles)(Header))\n","import React, { Component, ReactNode } from 'react'\nimport { HashRouter } from 'react-router-dom'\nimport LanguageProvider from './LanguageProvider/LanguageProvider'\nimport StorageProvider from './StorageProvider/StorageProvider'\nimport ThemeProvider from './ThemeProvider/ThemeProvider'\n\nclass Root extends Component {\n  public render(): ReactNode {\n    return (\n      <StorageProvider>\n        <HashRouter>\n          <ThemeProvider>\n            <LanguageProvider>{this.props.children}</LanguageProvider>\n          </ThemeProvider>\n        </HashRouter>\n      </StorageProvider>\n    )\n  }\n}\n\nexport default Root\n","import { Typography } from '@material-ui/core'\nimport React, { ReactNode } from 'react'\nimport { Route } from 'react-router'\nimport FullPage from '../../FullPage/FullPage'\nimport RouteConfig from '../util/RouteConfig'\n\nclass NotFoundRoute implements RouteConfig {\n  public makeURL(): never {\n    throw new Error('cannot make 404 URL')\n  }\n\n  public use(): ReactNode {\n    return (\n      <Route>\n        <FullPage>\n          <Typography variant=\"h2\">404</Typography>\n        </FullPage>\n      </Route>\n    )\n  }\n}\n\nexport default new NotFoundRoute()\n","import React, { ReactNode } from 'react'\nimport { Redirect } from 'react-router'\nimport FeedRoute from '../FeedRoute/FeedRoute'\nimport AbstractRouteConfig from '../util/AbstractRouteConfig'\n\nclass RootRoute extends AbstractRouteConfig {\n  protected URL: string = '/'\n  public use(): ReactNode {\n    return (\n      <Redirect from={this.URL} to={FeedRoute.makeURL({ feed: 'top' })} exact />\n    )\n  }\n}\n\nexport default new RootRoute()\n","import React, { Component } from 'react'\nimport { Switch } from 'react-router-dom'\nimport Header from '../Header/Header'\nimport Root from '../Root/Root'\nimport FeedRoute from '../routes/FeedRoute/FeedRoute'\nimport ItemRoute from '../routes/ItemRoute/ItemRoute'\nimport NotFoundRoute from '../routes/NotFoundRoute/NotFoundRoute'\nimport RootRoute from '../routes/RootRoute/RootRoute'\nimport UserRoute from '../routes/UserRoute/UserRoute'\n\nclass App extends Component {\n  public render(): JSX.Element {\n    return (\n      <Root>\n        <Header />\n        <main>\n          <Switch>\n            {RootRoute.use()}\n            {FeedRoute.use()}\n            {ItemRoute.use()}\n            {UserRoute.use()}\n            {NotFoundRoute.use()}\n          </Switch>\n        </main>\n      </Root>\n    )\n  }\n}\n\nexport default App\n","import 'typeface-roboto'\n\nimport React from 'react'\nimport reactDom from 'react-dom'\n\nimport App from './App/App'\n\n// import { register } from './serviceWorker/serviceWorker'\n// register()\n\nreactDom.render(<App />, document.getElementById('root'))\n","import { from, Observable, Subscriber, TeardownLogic } from 'rxjs'\nimport { filter, first, flatMap, map, take, toArray } from 'rxjs/operators'\nimport { clamp } from '../util'\nimport { Snapshot, withUnsubscriber } from './firebase'\nimport { FeedId, Item, ItemId, Items, UserId } from './types'\n\nfunction getApi$<T>(path: string): Observable<T> {\n  return new Observable(\n    (subscriber: Subscriber<T>): TeardownLogic => {\n      return withUnsubscriber(path, (snap: Snapshot<T>) => {\n        subscriber.next(snap.val())\n      })\n    },\n  )\n}\n\nexport function getItem$(id: ItemId): Observable<Item> {\n  return getApi$(`item/${id}`)\n}\n\nexport function getUserSubmissions$(id: UserId): Observable<Items> {\n  return getApi$(`user/${id}/submitted`)\n}\n\ninterface WithLeft {\n  left: number\n  items: Item[]\n}\n\nexport function filterFeed$(\n  feed$: Observable<Items>,\n  predicate: (item: Item) => boolean,\n  limit: number = Infinity,\n): Observable<WithLeft> {\n  interface WithLength {\n    length: number\n    item$$: Observable<Observable<Item>>\n  }\n\n  return feed$.pipe(\n    map((items: Items) => items.map((id: ItemId) => getItem$(id))),\n    map(\n      (item$s: Array<Observable<Item>>): WithLength => ({\n        length: item$s.length,\n        item$$: from(item$s),\n      }),\n    ),\n    flatMap(({ length, item$$ }: WithLength) => {\n      const { round, sqrt }: typeof Math = Math\n      const parallel: number = clamp(round(sqrt(length)), 1, limit)\n      let lastFiltered: number = 0\n\n      return item$$.pipe(\n        flatMap((item$: Observable<Item>) => item$.pipe(first()), parallel),\n        filter((item: Item, index: number) => {\n          lastFiltered = index\n          return predicate(item)\n        }),\n        take(limit),\n        toArray(),\n        map(\n          (items: Item[]): WithLeft => ({\n            items,\n            left: length - lastFiltered - 1,\n          }),\n        ),\n      )\n    }),\n  )\n}\n"],"sourceRoot":""}